
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF
    *   Même si un fichier échoue, on peut essayer de charger les autres et utiliser la version par défaut uniquement-8">
    <meta name="viewport" content="width=device-width, initial-scale=1 pour celui qui a échoué, au lieu de marquer `programsLoaded` comme complètement faux.

2.  **V.0">
    <title>ArmorWorkout - Électrique</title>
    <link rel="stylesheetérification de la Structure des Données Chargées** :
    *   S'assurer que `loadedWorkouts[" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0type]` est bien l'objet complet `{ routine_name, description, workout_data }` et que `load/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozWorkout` accède correctement à `loadedWorkouts[type].workout_data`.

3.  **Simplification de l'pmT/E0iPtmFIB46ZmdtAc9eNBvH0H/UI en Cas d'Erreur de Programme** :
    *   Si `programsLoaded` est `false`ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd. après la tentative de chargement, les boutons Push/Pull/Legs devraient rester désactivés et un message clairmin.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"> invitant à vérifier la connexion ou les fichiers Drive devrait être plus visible.

**Code HTML Corrigé (JavaScript
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;4 principalement) :**

Je vais me concentrer sur la robustesse de `loadProgramsFromDrive` et le feedback00;500;700&family=Orbitron:wght@400;50 utilisateur.

```html
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta0;700;900&display=swap" rel="stylesheet">
    <style>
 charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-        /* CSS IDENTIQUE À LA VERSION PRÉCÉDENTE - V3.7 POUR L'ESTHÉTIQUEscale=1.0">
    <title>ArmorWorkout - Électrique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6. */
        :root {
            --bg-color-dark: #030712; --secondary-4.0/css/all.min.css" integrity="sha512-iecdLmasklbg-color-dark: #0B132B; --primary-text-color-dark: #7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1F0F4F8; --secondary-text-color-dark: #A0AEC0; --borderypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH-color-dark: #1E293B; --accent-border-color-dark: rgba(96,0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src 165, 250, 0.3); --input-bg-dark: #1="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chartF2937;
            --neon-cyan: #22d3ee; --neon-blue.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis: #60A5FA; --neon-pink: #F472B6; --neon-.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
red: #F87171; --neon-yellow: #FBBF24; --neon    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@30-green: #34D399; --neon-purple: #A78BFA; --0;400;500;700&family=Orbitron:wght@400neon-orange: #FB923C;
            --neon-cyan-rgb: 34,;500;700;900&display=swap" rel="stylesheet">
    < 211, 238; --neon-blue-rgb: 96, 165, 250; --neon-pink-rgb: 244, 114,style>
        /* --- CSS (Identique à la version précédente V3.7 avec le thème électrique) --- 182; --neon-red-rgb: 248, 113, 1 */
        :root {
            --bg-color-dark: #030712; --secondary-13; --neon-yellow-rgb: 251, 191, 36;bg-color-dark: #0B132B; --primary-text-color-dark: # --neon-green-rgb: 52, 211, 153; --neon-F0F4F8; --secondary-text-color-dark: #A0AEC0; --borderpurple-rgb: 167, 139, 250; --neon-orange--color-dark: #1E293B;
            --electric-blue: #00Brgb: 251, 146, 60;
            --secondary-bg-colorFFF; --electric-cyan: #22D3EE; --electric-blue-light: #4D-dark-rgb: 11, 19, 43; --bg-color-dark-rgb: 3, 7, 18;
            --glow-cyan: 0 0 94FF; --glow-accent: #0AF;
            --electric-blue-rgb: 0, 115px rgba(var(--neon-cyan-rgb), 0.6); --glow-blue: 91, 255; --electric-cyan-rgb: 34, 211, 0 0 12px rgba(var(--neon-blue-rgb), 0.5);
            238; --glow-accent-rgb: 0, 170, 255;--glow-pink: 0 0 12px rgba(var(--neon-pink-rgb),  --secondary-bg-color-dark-rgb: 11, 19, 43; --0.5); --glow-red: 0 0 12px rgba(var(--neon-redbg-color-dark-rgb: 3, 7, 18;
            --exercise-color-val-rgb), 0.5);
            --glow-yellow: 0 0 12px rgba: var(--electric-blue-light); --break-color-val: var(--electric-cyan); --paused(var(--neon-yellow-rgb), 0.5); --glow-green: 0 0 -color-val: #A78BFA; --finished-color-val: #34D312px rgba(var(--neon-green-rgb), 0.5);
            --glow-purple99; --preparing-color-val: var(--electric-cyan); --idle-color-val: var: 0 0 12px rgba(var(--neon-purple-rgb), 0.5);
            --exercise-color-val: var(--neon-pink); --break-color-val: var(--neon-(--electric-blue);
            --exercise-color-rgb: 77, 148, 255yellow); --paused-color-val: var(--neon-purple); --finished-color-val: var(--; --break-color-rgb: var(--electric-cyan-rgb); --paused-color-rgb: 167, 139, 250; --finished-color-rgb: 52, neon-green); --preparing-color-val: var(--neon-yellow); --idle-color-val: var(--211, 153; --preparing-color-rgb: var(--electric-cyan-rgb); --idle-electric-blue); /* Changé pour electric blue */

            --exercise-color-rgb: var(--neon-pinkcolor-rgb: var(--electric-blue-rgb);
            --color-exercise: var(--exercise-color-rgb);
            --break-color-rgb: var(--neon-yellow-rgb);
            --paused-val); --color-break: var(--break-color-val); --color-prepare: var(--preparing-color-rgb: var(--neon-purple-rgb);
            --finished-color-rgb: var(--neon-green-rgb);
            --preparing-color-rgb: var(--neon-yellow-rgb);
-color-val); --color-finished: var(--finished-color-val); --color-paused: var(--paused-color-val); --color-idle: var(--secondary-text-color-dark);
                        --idle-color-rgb: var(--electric-blue-rgb);


            --color-exercise: var(----font-family-main: 'Inter', sans-serif; --font-family-timer: 'Orbitron', sans-exercise-color-val); 
            --color-break: var(--break-color-val);
            --color-serif; --font-family-titles: 'Orbitron', sans-serif;
            --border-radius-prepare: var(--preparing-color-val);
            --color-finished: var(--finished-color-vallg: 10px; --border-radius-md: 8px; --border-radius-sm);
            --color-paused: var(--paused-color-val);
            --color-idle: var: 6px; --transition-speed: 0.3s; --section-transition-speed: (--secondary-text-color-dark);

            --font-family-main: 'Inter', sans-serif;
0.4s;
            --bg-color: var(--bg-color-dark); --secondary-bg            --font-family-timer: 'Orbitron', sans-serif;
            --font-family-titles-color: var(--secondary-bg-color-dark); --primary-text-color: var(--primary-text-color: 'Orbitron', sans-serif; /* Pour les titres de section */

            --border-radius-lg:-dark); --secondary-text-color: var(--secondary-text-color-dark); --border-color 10px; --border-radius-md: 8px; --border-radius-sm: : var(--border-color-dark); --accent-border-color: rgba(var(--electric-blue-6px;
            --transition-speed: 0.3s; --section-transition-speed: rgb), 0.4); --input-bg: #1A202C;
            --current0.4s;

            --bg-color: var(--bg-color-dark);
            --secondary-timer-color: var(--idle-color-val); --current-timer-glow: 0 0-bg-color: var(--secondary-bg-color-dark);
            --primary-text-color: 15px var(--idle-color-val), 0 0 25px rgba(var(--idle- var(--primary-text-color-dark);
            --secondary-text-color: var(--secondary-textcolor-rgb), 0.3);
        }
        @keyframes subtlePulse { 0%, 100-color-dark);
            --border-color: var(--border-color-dark);
            --accent% { opacity: 0.7; transform: scale(1); } 50% { opacity: -border-color: rgba(var(--electric-blue-rgb), 0.4); /* Bordure d'accent1; transform: scale(1.015); } }
        @keyframes electricBorder { 0%uation bleue */
            --input-bg: #1A202C; /* Fond d'input plus sombre { box-shadow: 0 0 6px rgba(var(--electric-cyan-rgb), 0 */

            --current-timer-color: var(--idle-color-val);
            --current-timer.6), inset 0 0 4px rgba(var(--electric-cyan-rgb), 0.4);-glow: 0 0 10px var(--idle-color-val), 0 0  border-color: rgba(var(--electric-cyan-rgb), 0.7); } 50%20px rgba(var(--electric-blue-rgb), 0.4); /* Glow plus électrique */
        } { box-shadow: 0 0 18px rgba(var(--electric-blue-rgb), 

        @keyframes subtlePulse {
            0%, 100% { opacity: 0.7;0.8), inset 0 0 10px rgba(var(--electric-blue-rgb),  transform: scale(1); }
            50% { opacity: 1; transform: scale(1.0.6); border-color: rgba(var(--electric-blue-rgb), 0.9); } 100% { box-shadow: 0 0 6px rgba(var(--electric-cyan015); }
        }
        @keyframes electricBorder {
            0% { box-shadow: 0 -rgb), 0.6), inset 0 0 4px rgba(var(--electric-cyan-0 6px rgba(var(--electric-cyan-rgb), 0.6), inset 0 0 4pxrgb), 0.4); border-color: rgba(var(--electric-cyan-rgb), 0. rgba(var(--electric-cyan-rgb), 0.4); border-color: rgba(var(--electric-cyan-rgb), 0.7); }
            50% { box-shadow: 0 7); } }
        @keyframes textGlowPulse { 0%, 100% { text-shadow:0 18px rgba(var(--electric-blue-rgb), 0.8), inset 0  0 0 5px rgba(var(--current-timer-color-rgb), 0.7),0 10px rgba(var(--electric-blue-rgb), 0.6); border-color: 0 0 10px rgba(var(--current-timer-color-rgb), 0.5 rgba(var(--electric-blue-rgb), 0.9); }
            100% { box), 0 0 15px rgba(var(--current-timer-color-rgb), 0.-shadow: 0 0 6px rgba(var(--electric-cyan-rgb), 0.63); } 50% { text-shadow: 0 0 8px rgba(var(--current), inset 0 0 4px rgba(var(--electric-cyan-rgb), 0.4);-timer-color-rgb), 0.9), 0 0 15px rgba(var(-- border-color: rgba(var(--electric-cyan-rgb), 0.7); }
        }
current-timer-color-rgb), 0.7), 0 0 25px rgba(var        @keyframes textGlowPulse {
            0%, 100% { text-shadow: 0 0 (--current-timer-color-rgb), 0.5); } }
        @keyframes scanlines { 0% { background-position: 0 0; } 100% { background-position: 5px rgba(var(--current-timer-color-rgb), 0.7), 0 0 10px rgba(var(--current-timer-color-rgb), 0.5), 0 0 150 50px; } }
        * { box-sizing: border-box; margin: 0; padding:px rgba(var(--current-timer-color-rgb), 0.3); }
            50% 0; }
        html { scroll-behavior: smooth; font-size: 16px; } { text-shadow: 0 0 8px rgba(var(--current-timer-color-rgb),
        body { font-family: var(--font-family-main); background-color: var(--bg-color 0.9), 0 0 15px rgba(var(--current-timer-color-rgb); color: var(--primary-text-color); line-height: 1.65; transition: background), 0.7), 0 0 25px rgba(var(--current-timer-color--color var(--transition-speed) ease, color var(--transition-speed) ease; display: flex; flexrgb), 0.5); }
        }
         @keyframes scanlines {
            0% { background-direction: column; min-height: 100vh; -webkit-font-smoothing: antiali-position: 0 0; }
            100% { background-position: 0 5ased; overflow-x: hidden; background-image: radial-gradient(ellipse at center, rgba(var(--electric-0px; }
        }


        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16pxblue-rgb), 0.08) 0%, transparent 60%), linear-gradient(0deg, rgba(var(--bg-color-dark-rgb), 0.5) 0%, rgba(var(--bg; }
        body {
            font-family: var(--font-family-main);
            background--color-dark-rgb), 0.9) 100%); position: relative; }
        color: var(--bg-color);
            color: var(--primary-text-color);
            line-body::before { content: ""; position: fixed; top: 0; left: 0; right: 0height: 1.65;
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            min-height; bottom: 0; background-image: linear-gradient(rgba(var(--electric-blue-rgb), 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(var(--: 100vh;
            -webkit-font-smoothing: antialiased;
            overflow-electric-blue-rgb), 0.05) 1px, transparent 1px); background-sizex: hidden;
            background-image: radial-gradient(ellipse at center, rgba(var(--electric-blue-rgb: 30px 30px; z-index: -1; opacity: 0.7; animation), 0.08) 0%, transparent 60%),
                              linear-gradient(0deg, rgba: scanlines 2s linear infinite; }
        .container { max-width: 1100px; margin(var(--bg-color-dark-rgb), 0.5) 0%, rgba(var(--bg: 0 auto; padding: 30px 25px; width: 100%; flex-color-dark-rgb), 0.9) 100%);
            position: relative;
-grow: 1; display: flex; flex-direction: column; }
        header { padding: 1        }
        body::before { /* Grille techno subtile */
            content: "";
            position: fixed5px 0; background-color: rgba(var(--secondary-bg-color-dark-rgb), ;
            top: 0; left: 0; right: 0; bottom: 0;
0.5); backdrop-filter: blur(8px) saturate(150%); border-bottom:             background-image:
                linear-gradient(rgba(var(--electric-blue-rgb), 0.1px solid rgba(var(--electric-blue-rgb), 0.3); box-shadow: 003) 1px, transparent 1px), /* Plus subtil */
                linear-gradient(90deg, 2px 15px rgba(var(--electric-blue-rgb), 0.1); position: sticky; top:0; z-index: 1000; }
        body.workout-active rgba(var(--electric-blue-rgb), 0.03) 1px, transparent 1px);
            background-size: 35px 35px; /* Taille de la grille ajustée */
             header { transform: translateY(-100%); opacity: 0; visibility: hidden; transition: transform 0.4z-index: -1; 
            opacity: 0.5; /* Plus subtil */
            s ease-in-out, opacity 0.4s ease-in-out, visibility 0s linear 0.4s; }
        .header-content { display: flex; justify-content: space-animation: scanlines 3s linear infinite; 
        }

        .container { max-width: 110between; align-items: center; max-width: 1100px; margin: 0 auto0px; margin: 0 auto; padding: 30px 25px; width: 1; padding: 0 25px; flex-wrap: wrap; gap: 15px 200%; flex-grow: 1; display: flex; flex-direction: column; }
        header0px; }
        header h1 { font-size: 1.6em; color: var(-- {
            padding: 15px 0;
            background-color: rgba(var(--secondary-bgprimary-text-color); margin: 0; font-weight: 700; display: flex; align-items-color-dark-rgb), 0.65); /* Légèrement plus opaque */
            backdrop-filter: blur: center; gap: 10px; font-family: var(--font-family-titles); text-shadow: (10px) saturate(160%);
            border-bottom: 1px solid rgba(var(--0 0 8px rgba(var(--electric-cyan-rgb), 0.7); }
        electric-blue-rgb), 0.4);
            box-shadow: 0 3px 2header h1 i { color: var(--electric-cyan); animation: subtlePulse 3s infinite ease-in-out;0px rgba(var(--electric-blue-rgb), 0.15);
            position: sticky; }
        nav ul { list-style: none; display: flex; gap: 15px; flex top:0; z-index: 1000;
        }
        body.workout-active header { transform-wrap: wrap; justify-content: center; align-items: baseline; }
        nav button, nav a.: translateY(-100%); opacity: 0; visibility: hidden; transition: transform 0.4snav-link { background: none; border: none; color: var(--secondary-text-color); font-size ease-in-out, opacity 0.4s ease-in-out, visibility 0s linear : 0.9em; font-weight: 500; padding: 8px 120.4s; }
        .header-content { display: flex; justify-content: space-betweenpx; cursor: pointer; text-decoration: none; transition: all var(--transition-speed) ease; position: relative;; align-items: center; max-width: 1100px; margin: 0 auto; border-radius: var(--border-radius-sm); border: 1px solid transparent; display: inline- padding: 0 25px; flex-wrap: wrap; gap: 15px 20flex; align-items: center; gap: 6px; }
        nav button:hover, nav a.px; }
        header h1 {
            font-size: 1.7em; /* Un peu plus grand */
            color: var(--primary-text-color); margin: 0; font-weight: 700;nav-link:hover { color: var(--primary-text-color); background-color: rgba(var(--electric-blue-rgb), 0.1); border-color: rgba(var(--electric-blue-rgb), 0.
            display: flex; align-items: center; gap: 10px; font-family: var4); text-shadow: 0 0 5px rgba(var(--electric-blue-rgb), 0.(--font-family-titles);
            text-shadow: 0 0 10px rgba(var(--electric-cyan-rgb), 0.8), 0 0 20px rgba(var(--electric-5); }
        nav button.active { color: var(--electric-cyan); font-weight: 600; background-color: rgba(var(--electric-cyan-rgb), 0.15); border-color:cyan-rgb), 0.4);
            letter-spacing: 0.05em;
        }
         var(--electric-cyan); box-shadow: 0 0 10px rgba(var(--electric-header h1 i { color: var(--electric-cyan); animation: subtlePulse 2.5s infinite easecyan-rgb), 0.3); }
        #nav-history.active { border-color: var-in-out; font-size: 1.1em; }
        nav ul { list-style:(--neon-pink); background-color: rgba(var(--neon-pink-rgb),0.15); none; display: flex; gap: 12px; /* Un peu moins d'espace */ flex-wrap: wrap color: var(--neon-pink); }
        #nav-progress.active { border-color: var(--; justify-content: center; align-items: baseline; }
        nav button, nav a.nav-link {neon-green); background-color: rgba(var(--neon-green-rgb),0.15); color: var(--
            background: none; border: none; color: var(--secondary-text-color-dark); /* Texteneon-green); }
        nav button:disabled { color: rgba(156, 163, 175, 0.4); cursor: not-allowed; background-color: transparent !important; border- un peu plus clair */
            font-size: 0.9em; font-weight: 500color: transparent !important; opacity: 0.6; pointer-events: none; }
        nav a.nav; padding: 8px 15px; /* Plus de padding */
            cursor: pointer; text-decoration-link.disabled-link-look { color: rgba(156, 163, 175,: none;
            transition: all var(--transition-speed) ease;
            position: relative;
             0.4); cursor: not-allowed; opacity: 0.6; pointer-events: none;border-radius: var(--border-radius-md); /* Plus arrondi */
            border: 1px solid transparent;
            display: inline-flex; align-items: center; gap: 6px;
            letter background-color: transparent !important; border-color: transparent !important; text-shadow: none !important; }
        #nav-history i, #nav-progress i, nav a.nav-link i { margin--spacing: 0.03em;
        }
        nav button:hover, nav a.nav-link:right: 5px; }
        .header-actions { display: flex; gap: 10px; align-hover {
            color: var(--electric-cyan);
            background-color: rgba(var(--electric-blue-rgb), 0.15);
            border-color: rgba(var(--electric-blue-items: center; flex-wrap: wrap; }
        #drive-status-text, #signin-buttonrgb), 0.5);
            text-shadow: 0 0 8px rgba(var(--electric-cyan { background-color: transparent; border: 1px solid var(--border-color-dark); color: var(--secondary-text-color-dark); padding: 5px 12px; border-radius: var(--border-rgb), 0.6);
            transform: translateY(-1px);
        }
        nav button.-radius-md); font-size: 0.9em; font-weight: 500; cursor:active, nav a.nav-link.active-imitation { /* `active-imitation` pour les liens pointer; transition: all var(--transition-speed) ease; display: inline-flex; align-items: center externes si besoin de les styler comme actifs */
            color: var(--electric-cyan); font-weight:; gap: 5px; }
        #signin-button:disabled { opacity: 0.5; cursor: not-allowed; border-color: var(--border-color-dark) !important; color: var(--secondary 600;
            background-color: rgba(var(--electric-cyan-rgb), 0.2);
            border-color: var(--electric-cyan);
            box-shadow: 0 0-text-color-dark) !important; background-color: transparent !important; box-shadow: none !important; text-shadow: none !important; pointer-events: auto; }
        #drive-status-text:hover 12px rgba(var(--electric-cyan-rgb), 0.4);
        }
        nav a., #signin-button:not(:disabled):hover { border-color: var(--electric-blue); color: var(--electricnav-link.disabled-link-look {
            color: rgba(156, 163,-blue); background-color: rgba(var(--electric-blue-rgb), 0.1); }
 175, 0.5) !important;
            background-color: transparent !important;
        #drive-status-text { border-color: var(--neon-green); color: var(--neon-            border-color: transparent !important;
            cursor: not-allowed !important;
            text-shadowgreen); cursor: default; }
        #signin-button { border-color: var(--neon-green); color: var: none !important;
            opacity: 0.6 !important;
        }
        #nav-(--neon-green); }
        #drive-status { display: inline-flex; align-items: center; gaphistory.active { border-color: var(--neon-pink); background-color: rgba(var(--neon-pink-: 10px; margin-left: 10px; padding: 0; background: none; border:rgb),0.15); color: var(--neon-pink); }
        #nav-progress.active { none; font-size: 1em; color: inherit; }
        #settings-icon { color: var(--secondary border-color: var(--neon-green); background-color: rgba(var(--neon-green-rgb),-text-color-dark); font-size: 1.3em; cursor: pointer; transition: color0.15); color: var(--neon-green); }

        nav button:disabled { color: rgba var(--transition-speed) ease, transform var(--transition-speed) ease; padding: 5px; }
        (156, 163, 175, 0.4); cursor: not-#settings-icon:hover { color: var(--electric-cyan); transform: rotate(60deg) scaleallowed; background-color: transparent !important; border-color: transparent !important; opacity: 0.6(1.1); }
        body.logged-out #signin-button { display: inline-flex; } body.; pointer-events: none; }
        #nav-history i, #nav-progress i, nav a.nav-link i { margin-right: 5px; }

        .header-actions { display: flex; gaplogged-out #drive-status { display: none; }
        body.logged-in #signin-button { display: 10px; align-items: center; flex-wrap: wrap; }
        #drive-status-text: none; } body.logged-in #drive-status { display: inline-flex; }
        main { flex-grow: 1; display: flex; flex-direction: column; align-items: center; padding-top: , #signin-button { background-color: transparent; border: 1px solid var(--border-color-dark); color40px; position: relative; }
        body.workout-active main { padding-top: 2: var(--secondary-text-color-dark); padding: 6px 14px; border-radius: var(--0px; }
        .app-section { background-color: rgba(var(--secondary-bg-colorborder-radius-md); font-size: 0.9em; font-weight: 500-dark-rgb), 0.6); backdrop-filter: blur(10px) saturate(130; cursor: pointer; transition: all var(--transition-speed) ease; display: inline-flex; align-%); padding: 25px; border: 1px solid rgba(var(--electric-blue-rgb),items: center; gap: 5px; }
        #signin-button:disabled { opacity: 0 0.2); width: 100%; margin-bottom: 40px; transition: opacity var.5; cursor: not-allowed; border-color: var(--border-color-dark) !important; color: var(--secondary-text-color-dark) !important; background-color: transparent !important; box-shadow(--section-transition-speed) ease-in-out, transform 0.3s ease-in-out, visibility: none !important; text-shadow: none !important; pointer-events: auto; }
        #drive 0s linear var(--section-transition-speed); max-height: 5000px; opacity:-status-text:hover, #signin-button:not(:disabled):hover { border-color: var(--electric-blue 1; visibility: visible; overflow: hidden; border-radius: var(--border-radius-lg); box); color: var(--electric-blue); background-color: rgba(var(--electric-blue-rgb), 0.-shadow: 0 5px 25px rgba(var(--bg-color-dark-rgb), 0.1); }
        #drive-status-text { border-color: var(--neon-green); color: var(--5), inset 0 0 15px rgba(var(--electric-blue-rgb), 0.1); }neon-green); cursor: default; }
        #signin-button { border-color: var(--neon-
        .workout-section { max-width: 650px; text-align: center; }green); color: var(--neon-green); }
        #drive-status { display: inline-flex; align-items
        .history-section, .progress-section { max-width: 900px; text-align: left: center; gap: 10px; margin-left: 10px; padding: 0; background: none; }
        .section-hidden { opacity: 0; max-height: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important; margin-bottom: 0 !; border: none; font-size: 1em; color: inherit; }
        #settings-icon { colorimportant; border-width: 0 !important; visibility: hidden; transform: translateY(20px) scale(0: var(--secondary-text-color-dark); font-size: 1.4em; /* Plus grand */ cursor:.98); transition: opacity var(--section-transition-speed) ease-in-out, visibility 0 pointer; transition: color var(--transition-speed) ease, transform var(--transition-speed) ease; padding: 5s linear var(--section-transition-speed), max-height 0s linear var(--section-transition-speedpx; }
        #settings-icon:hover { color: var(--electric-cyan); transform: rotate(), padding var(--section-transition-speed) ease-out, margin var(--section-transition-speed) ease-out90deg) scale(1.15); }
        body.logged-out #signin-button { display, border-width var(--section-transition-speed) ease-out, transform 0.3s ease-: inline-flex; } body.logged-out #drive-status { display: none; }
        bodyin-out; }
        .timer-and-image-wrapper { display: flex; flex-direction:.logged-in #signin-button { display: none; } body.logged-in #drive-status { display: column; align-items: center; gap: 20px; margin-bottom: 25px; inline-flex; }

        main { flex-grow: 1; display: flex; flex-direction: }
        .exercise-image-area { width: 100%; max-width: 260px; column; align-items: center; padding-top: 40px; position: relative; }
        body margin: 0 auto; padding: 8px; background-color: rgba(var(--secondary-bg-color-.workout-active main { padding-top: 20px; }
        .app-section {
dark-rgb), 0.4); border: 1px solid rgba(var(--electric-cyan-rgb), 0            background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.75.3); border-radius: var(--border-radius-md); display: none; justify-content: center); /* Plus dense */
            backdrop-filter: blur(12px) saturate(140%);
            ; align-items: center; box-shadow: 0 4px 12px rgba(var(--padding: 30px; /* Plus de padding interne */
            border: 1px solid rgba(varbg-color-dark-rgb), 0.4), inset 0 0 8px rgba(var(--electric-blue-rgb), 0.25);
            width: 100%; margin-(--electric-cyan-rgb),0.2); z-index: 5; transition: opacity 0.4s ease-in-out, transform 0.3s ease-in-out; opacity: 0bottom: 40px;
            transition: opacity var(--section-transition-speed) ease-in-out; transform: scale(0.95) translateY(10px); }
        .exercise-image-, transform 0.3s ease-in-out, visibility 0s linear var(--section-transition-speed);
area.visible { display: flex; opacity: 1; transform: scale(1) translateY(0); }
                    max-height: 5000px; opacity: 1; visibility: visible; overflow: hidden;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 8px 3#exercise-image-display { display: block; max-width: 100%; max-height: 200px; object-fit: contain; border-radius: var(--border-radius-sm); filter0px rgba(var(--bg-color-dark-rgb), 0.6), inset 0 0: brightness(0.8) contrast(1.1); }
        .timer-display { position: relative 20px rgba(var(--electric-blue-rgb), 0.15);
        }
        ; display: flex; justify-content: center; align-items: center; width: 280px; height.workout-section { max-width: 650px; text-align: center; }
        : 230px; margin: 0 auto; cursor: pointer; user-select: none; -webkit.history-section, .progress-section { max-width: 900px; text-align:-tap-highlight-color: transparent; }
        .reactor { position: relative; width: 18 left; }
        .section-hidden { opacity: 0; max-height: 0 !important;0px; height: 180px; display: flex; align-items: center; justify-content padding-top: 0 !important; padding-bottom: 0 !important; margin-bottom: 0: center; border-radius: 50%; overflow: hidden; z-index: 10; background !important; border-width: 0 !important; visibility: hidden; transform: translateY(20px)-color: transparent; }
        .reactor::before { content: ''; position: absolute; top: 0 scale(0.98); transition: opacity var(--section-transition-speed) ease-in-out, visibility; left: 0; right: 0; bottom: 0; background-color: rgba(var(-- 0s linear var(--section-transition-speed), max-height 0s linear var(--section-transitionbg-color-dark-rgb), 0.3); z-index: 1; border-radius: 5-speed), padding var(--section-transition-speed) ease-out, margin var(--section-transition-speed0%; }
        #time-left { animation: textGlowPulse 2s infinite ease-in-out; }) ease-out, border-width var(--section-transition-speed) ease-out, transform 0.
        .triangle { z-index: 5; position: absolute; top: 66%; left:3s ease-in-out; }

        .timer-and-image-wrapper { display: flex; 50%; transform: translate(-50%, -50%); width: 155px; aspect flex-direction: column; align-items: center; gap: 15px; margin-bottom: -ratio: 1; background-color: var(--electric-cyan); -webkit-clip-path: polygon20px; }
        .exercise-image-area {
            width: 100%; max(50% 88%, 0 0, 100% 0); clip-path: polygon(50% 88%, 0 0, 100% 0); transition-width: 250px; margin: 0 auto; padding: 8px;
            background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.4);
            border:: transform 0.5s ease-out; }
        .triangle::after { content: ''; display: block 1px solid rgba(var(--electric-cyan-rgb), 0.3);
            border-radius; position: absolute; top: 45%; left: 50%; z-index: 6; width:: var(--border-radius-md);
            display: none; justify-content: center; align-items 120px; height: 120px; transform: translate(-50%, -50%); background-: center;
            box-shadow: 0 4px 12px rgba(var(--bg-color: var(--bg-color); -webkit-clip-path: polygon(50% 90%, color-dark-rgb), 0.4), inset 0 0 8px rgba(var(--electric-cyan0 0, 100% 0); clip-path: polygon(50% 90%, 0 0, 100% 0); }
        .circle-1 { z--rgb),0.2);
            z-index: 5;
            transition: opacity 0.4s ease-in-out, transform 0.3s ease-in-out;
            opacity:index: 2; position: absolute; width: 100%; height: 100%; border-radius: 50%; background: linear-gradient(rgba(var(--electric-cyan-rgb),  0; transform: scale(0.95) translateY(10px);
        }
        .exercise-image-area.visible { display: flex; opacity: 1; transform: scale(1) translateY(0);0.8), rgba(var(--electric-blue-rgb), 0.8)); animation: rotate-right 2s }
        #exercise-image-display { display: block; max-width: 100%; max-height: linear infinite; }
        .circle-1::before { content: ''; position: absolute; z-index: 200px; object-fit: contain; border-radius: var(--border-radius-sm); filter: brightness 1; inset: 10px; border-radius: 50%; background-color: var(--bg-color(0.8) contrast(1.1) saturate(1.2); }

        .timer-display { position); }
        .circle-1 span { position: absolute; width: 100%; height: 100%; border-radius: 50%; background: linear-gradient(rgba(var(--electric-cyan-rgb: relative; display: flex; justify-content: center; align-items: center; width: 28), 0.8), rgba(var(--electric-blue-rgb), 0.8)); top: 0;0px; height: 230px; margin: 0 auto; cursor: pointer; user-select: left: 0; }
        .circle-1 span:nth-child(1) { filter: blur none; -webkit-tap-highlight-color: transparent; }
        .reactor { position: relative; width(15px); } .circle-1 span:nth-child(2) { filter: blur(1: 180px; height: 180px; display: flex; align-items: center5px); } .circle-1 span:nth-child(3) { filter: blur(15px; justify-content: center; border-radius: 50%; overflow: hidden; z-index: ); } .circle-1 span:nth-child(4) { filter: blur(75px); }10; background-color: transparent; }
        .reactor::before { content: ''; position: absolute; top:
        .circle-2 { z-index: 4; position: absolute; top: 30px 0; left: 0; right: 0; bottom: 0; background-color: rgba(; left: 30px; width: calc(100% - 60px); height:var(--bg-color-dark-rgb), 0.3); z-index: 1; border- calc(100% - 60px); border-radius: 50%; border: 1radius: 50%; }
        #time-left { animation: textGlowPulse 2s infinite ease-in0px solid var(--electric-cyan); box-shadow: 0 0 30px 30px rgba-out; }
        .triangle { z-index: 5; position: absolute; top: 66%;(var(--electric-cyan-rgb), 0.2); animation: rotate-left 4s linear infinite; }
 left: 50%; transform: translate(-50%, -50%); width: 155px; aspect        .circle-2 span { position: absolute; top: 50%; left: 50%; transform: translate(--ratio: 1; background-color: var(--electric-cyan); -webkit-clip-path: polygon(50%, -50%); width: calc(100% + 20px); height: 1050% 88%, 0 0, 100% 0); clip-path: polygon(50% 88%, 0 0, 100% 0); transition:px; background-color: var(--bg-color); }
        .circle-2 span:nth-child transform 0.5s ease-out; }
        .triangle::after { content: ''; display: block(1) { transform: translate(-50%, -50%) rotate(90deg); } .circle-2 span; position: absolute; top: 45%; left: 50%; z-index: 6; width::nth-child(2) { transform: translate(-50%, -50%) rotate(45deg); } .circle-2 span:nth-child(3) { transform: translate(-50%, -5 120px; height: 120px; transform: translate(-50%, -50%); background-0%) rotate(-45deg); } .circle-2 span:nth-child(4) { transform:color: var(--bg-color); -webkit-clip-path: polygon(50% 90%,  translate(-50%, -50%) rotate(30deg); } .circle-2 span:nth-child(5) { transform: translate(-50%, -50%) rotate(-30deg); } .0 0, 100% 0); clip-path: polygon(50% 90%, 0 0, 100% 0); }
        .circle-1 { z-index: circle-2 span:nth-child(6) { transform: translate(-50%, -50%) rotate2; position: absolute; width: 100%; height: 100%; border-radius:(0deg); } .circle-2 span:nth-child(7) { transform: translate(-50 50%; background: linear-gradient(rgba(var(--electric-cyan-rgb), 0.8%, -50%) rotate(55deg); height: 5px; } .circle-2 span:), rgba(var(--electric-blue-rgb), 0.8)); animation: rotate-right 2snth-child(8) { transform: translate(-50%, -50%) rotate(125deg linear infinite; }
        .circle-1::before { content: ''; position: absolute; z-index:); height: 5px; }
        .circle-3 { z-index: 7; position: 1; inset: 10px; border-radius: 50%; background-color: var(--bg-color absolute; top: 50%; left: 50%; transform: translate(-50%, -50); }
        .circle-1 span { position: absolute; width: 100%; height: 100%); border-radius: 50%; box-shadow: 0 0 10px 10px rgba%; border-radius: 50%; background: linear-gradient(rgba(var(--electric-cyan-rgb(var(--electric-cyan-rgb), 0.2); }
        .circle-3::after {), 0.8), rgba(var(--electric-blue-rgb), 0.8)); top:  content: ''; display: block; width: 115px; height: 115px; border0; left: 0; }
        .circle-1 span:nth-child(1) { filter-radius: 50%; border: 3px dotted rgba(var(--electric-cyan-rgb), : blur(15px); } .circle-1 span:nth-child(2) { filter: blur0.8); animation: rotate-right 10s linear infinite; }
        .circle-4 { z-(15px); } .circle-1 span:nth-child(3) { filter: blur(1index: 8; position: absolute; top: 50%; left: 50%; transform: translate5px); } .circle-1 span:nth-child(4) { filter: blur(75px(-50%, -50%); width: 100px; height: 100px;); }
        .circle-2 { z-index: 4; position: absolute; top: 30px border-radius: 50%; box-shadow: 0 0 10px 10px rgba(var(--electric-cyan-rgb), 0.1); animation: rotate-left-right 2; left: 30px; width: calc(100% - 60px); height:0s infinite ease-in; }
        .circle-4 span { position: absolute; top: 5 calc(100% - 60px); border-radius: 50%; border: 10%; left: 50%; transform: translate(-50%, -50%); width: 100px solid var(--electric-cyan); box-shadow: 0 0 30px 30px rgba0%; height: 100%; border-radius: 50%; border: 3px solid;(var(--electric-cyan-rgb), 0.2); animation: rotate-left 4s linear infinite; }
        .circle-2 span { position: absolute; top: 50%; left: 50%; border-color: var(--electric-cyan) transparent transparent; }
        .circle-4 span:nth-child(1) { transform: translate(-50%, -50%) rotate(45deg); } .circle-4 transform: translate(-50%, -50%); width: calc(100% + 20px); height span:nth-child(2) { transform: translate(-50%, -50%) rotate(-75: 10px; background-color: var(--bg-color); }
        .circle-2 spandeg); } .circle-4 span:nth-child(3) { transform: translate(-50%, -:nth-child(1) { transform: translate(-50%, -50%) rotate(90deg); } .50%) rotate(165deg); }
        .circle-5 { z-index: 9circle-2 span:nth-child(2) { transform: translate(-50%, -50%) rotate; position: absolute; top: 50%; left: 50%; transform: translate(-50%,(45deg); } .circle-2 span:nth-child(3) { transform: translate(-50%, -50%) rotate(-45deg); } .circle-2 span:nth-child(4 -50%); width: 64px; height: 64px; border-radius: 50%; animation: rotate-left-right 10s infinite ease-in; background-color: rgba(var) { transform: translate(-50%, -50%) rotate(30deg); } .circle-2 span:nth-child(5) { transform: translate(-50%, -50%) rotate(-30(--electric-cyan-rgb), 0.2); box-shadow: 0 0 20pxdeg); } .circle-2 span:nth-child(6) { transform: translate(-50%, - 20px rgba(var(--electric-cyan-rgb), 0.2); transition: background-color 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease50%) rotate(0deg); } .circle-2 span:nth-child(7) { transform:; }
        .circle-5 span { position: absolute; inset: 0; z-index:  translate(-50%, -50%) rotate(55deg); height: 5px; } .circle-2 span10; width: 54px; height: 54px; border-radius: 50:nth-child(8) { transform: translate(-50%, -50%) rotate(125%; border: 5px solid; border-color: var(--electric-cyan) transparent transparent; margin: auto; }deg); height: 5px; }
        .circle-3 { z-index: 7; position:
        .circle-5 span:nth-child(1) { transform: rotate(0deg); } . absolute; top: 50%; left: 50%; transform: translate(-50%, -50circle-5 span:nth-child(2) { transform: rotate(120deg); } .circle%); border-radius: 50%; box-shadow: 0 0 10px 10px rgba-5 span:nth-child(3) { transform: rotate(240deg); }
        .(var(--electric-cyan-rgb), 0.2); }
        .circle-3::after { content: '';circle-6 { z-index: 11; position: absolute; top: 50%; left: display: block; width: 115px; height: 115px; border-radius: 50%; transform: translate(-50%, -50%); }
        .circle-6::after 50%; border: 3px dotted rgba(var(--electric-cyan-rgb), 0.8 { content: ''; display: block; width: 40px; height: 40px; border-radius:); animation: rotate-right 10s linear infinite; }
        .circle-4 { z-index: 8 50%; border: 3px dashed var(--electric-cyan); animation: rotate-left 5s; position: absolute; top: 50%; left: 50%; transform: translate(-50%, infinite ease-in; }
        .circle-7 { z-index: 12; position: absolute -50%); width: 100px; height: 100px; border-radius:; top: 50%; left: 50%; transform: translate(-50%, -50%); 50%; box-shadow: 0 0 10px 10px rgba(var(--electric-cyan }
        .circle-7::after { content: ''; display: block; width: 27px;-rgb), 0.1); animation: rotate-left-right 20s infinite ease-in; }
         height: 27px; border-radius: 50%; background-color: var(--electric-cyan.circle-4 span { position: absolute; top: 50%; left: 50%; transform: translate(-); animation: rotate-left 5s infinite ease-in; box-shadow: 0 0 5px 550%, -50%); width: 100%; height: 100%; border-radiuspx rgba(var(--electric-cyan-rgb), 0.2); transition: box-shadow 0.: 50%; border: 3px solid; border-color: var(--electric-cyan) transparent transparent3s ease, transform 0.3s ease; }
        .circle-8 { z-index:; }
        .circle-4 span:nth-child(1) { transform: translate(-50%, 13; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 15px; height: 15px; border-radius -50%) rotate(45deg); } .circle-4 span:nth-child(2) { transform: translate: 50%; animation: rotate-left-right 5s infinite ease-in; }
        .(-50%, -50%) rotate(-75deg); } .circle-4 span:nth-childcircle-8 span { position: absolute; inset: 0; z-index: 14; width:(3) { transform: translate(-50%, -50%) rotate(165deg); }
        .circle-5 { z-index: 9; position: absolute; top: 50%; left 13px; height: 13px; border-radius: 50%; border: 1: 50%; transform: translate(-50%, -50%); width: 64px; height: 64px; border-radius: 50%; animation: rotate-left-right 10s infinite easepx solid; border-color: var(--bg-color) transparent transparent; margin: auto; }
        .circle-8 span:nth-child(1) { transform: rotate(120deg); } .circle-8 span-in; background-color: rgba(var(--electric-cyan-rgb), 0.2); box-shadow: :nth-child(2) { transform: rotate(240deg); }
        @keyframes pulsePausedGlow {0 0 20px 20px rgba(var(--electric-cyan-rgb), 0. 0%, 100% { box-shadow: 0 0 5px 5px rgba2); transition: background-color 0.3s ease, box-shadow 0.3s ease, opacity(var(--paused-color-rgb), 0.2); transform: scale(1); } 50% { 0.3s ease; }
        .circle-5 span { position: absolute; inset: 0 box-shadow: 0 0 10px 10px rgba(var(--paused-color-rgb), ; z-index: 10; width: 54px; height: 54px; border-radius0.4); transform: scale(1.1); } }
        @keyframes pulsePausedRing { 0: 50%; border: 5px solid; border-color: var(--electric-cyan) transparent transparent%, 100% { box-shadow: 0 0 20px 20px rgba(var(--paused-color-rgb), 0.2); opacity: 1; } 50% { box-; margin: auto; }
        .circle-5 span:nth-child(1) { transform: rotateshadow: 0 0 25px 25px rgba(var(--paused-color-rgb),(0deg); } .circle-5 span:nth-child(2) { transform: rotate(120deg); 0.3); opacity: 0.8; } }
        .state-paused .circle-7 } .circle-5 span:nth-child(3) { transform: rotate(240deg); }
        .circle-6 { z-index: 11; position: absolute; top: 50::after { animation: pulsePausedGlow 1.5s infinite ease-in-out; }
        .state-%; left: 50%; transform: translate(-50%, -50%); }
        .circle-paused .circle-5 { animation: pulsePausedRing 1.5s infinite ease-in-out; background6::after { content: ''; display: block; width: 40px; height: 40px; border--color: rgba(var(--paused-color-rgb), 0.3); }
        @keyframes rotateradius: 50%; border: 3px dashed var(--electric-cyan); animation: rotate-left 5Slow { from { transform: translate(-50%, -50%) rotate(0deg); } to { transforms infinite ease-in; }
        .circle-7 { z-index: 12; position:: translate(-50%, -50%) rotate(360deg); } }
        @keyframes spin absolute; top: 50%; left: 50%; transform: translate(-50%, -50Once { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        .state-%); }
        .circle-7::after { content: ''; display: block; width: 27px; height: 27px; border-radius: 50%; background-color: var(--electric-preparing .triangle { animation: rotateSlow 5s linear infinite; }
        .triangle.spin-transition { animation: spinOnce 0.6s ease-out forwards; }
        #time-left { position: absolutecyan); animation: rotate-left 5s infinite ease-in; box-shadow: 0 0 ; top: 50%; left: 50%; transform: translate(-50%, -50%);5px 5px rgba(var(--electric-cyan-rgb), 0.2); transition: box-shadow 0 z-index: 20; font-family: var(--font-family-timer); font-size: 3..3s ease, transform 0.3s ease; }
        .circle-8 { z-index:6em; font-weight: 700; color: var(--current-timer-color); transition: color 13; position: absolute; top: 50%; left: 50%; transform: translate(- var(--transition-speed) ease, text-shadow var(--transition-speed) ease, font-size 050%, -50%); width: 15px; height: 15px; border-radius: 50%; animation: rotate-left-right 5s infinite ease-in; }
        ..2s ease; pointer-events: none; white-space: nowrap; }
        #timer-state { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); z-index:circle-8 span { position: absolute; inset: 0; z-index: 14; width: 20; font-size: 0.85em; font-family: var(--font-family 13px; height: 13px; border-radius: 50%; border: 1px solid; border-color: var(--bg-color) transparent transparent; margin: auto; }
        .circle-8-main); letter-spacing: 0.1em; font-weight: 500; text-transform: uppercase span:nth-child(1) { transform: rotate(120deg); } .circle-8 span; opacity: 0; transition: opacity 0.3s ease, color var(--transition-speed) ease, text-shadow var(--transition-speed) ease, font-size 0.2s ease, bottom 0.:nth-child(2) { transform: rotate(240deg); }
        @keyframes pulsePausedGlow {2s ease; color: var(--current-timer-color); pointer-events: none; white-space: 0%, 100% { box-shadow: 0 0 5px 5px rgba nowrap; }
        #timer-state.visible { opacity: 0.9; }
        #timer-state.(var(--paused-color-rgb), 0.2); transform: scale(1); } 50% {preparing { animation: countdown-pulse 1s infinite; font-size: 1em; }
        # box-shadow: 0 0 10px 10px rgba(var(--paused-color-rgb), 0.4); transform: scale(1.1); } }
        @keyframes pulsePausedRing { 0timer-state.finished-state { font-size: 0.95em; bottom: 18px; color: var(--finished-color-val); text-shadow: 0 0 8px var%, 100% { box-shadow: 0 0 20px 20px rgba(--finished-color-val); }
        .state-exercise #time-left { font-size: (var(--paused-color-rgb), 0.2); opacity: 1; } 50% { box-4em; letter-spacing: 0.05em; }
        .workout-info { margin-shadow: 0 0 25px 25px rgba(var(--paused-color-rgb),bottom: 20px; min-height: auto; position: relative; text-align: center; display 0.3); opacity: 0.8; } }
        .state-paused .circle-7: flex; flex-direction: column; align-items: center; gap: 8px; }
        #current-::after { animation: pulsePausedGlow 1.5s infinite ease-in-out; }
        exercise-name-display { display: block; font-size: 1.3em; font-weight: 60.state-paused .circle-5 { animation: pulsePausedRing 1.5s infinite ease-in-out0; color: var(--primary-text-color); margin-bottom: 8px; padding: 0; background-color: rgba(var(--paused-color-rgb), 0.3); }
        @keyframes rotateSlow { from { transform: translate(-50%, -50%) rotate(0deg); } to 10px; line-height: 1.3; }
        body.state-exercise #current-exercise { transform: translate(-50%, -50%) rotate(360deg); } }
        @-name-display { color: var(--color-exercise); animation: textGlowPulse 2s infinite easekeyframes spinOnce { from { transform: translate(-50%, -50%) rotate(0deg); } to-in-out; }
        body.state-break #current-exercise-name-display { color: { transform: translate(-50%, -50%) rotate(360deg); } }
        . var(--color-break); animation: textGlowPulse 2.5s infinite ease-in-out;state-preparing .triangle { animation: rotateSlow 5s linear infinite; }
        .triangle.spin-transition { }
        #current-exercise-container { display: flex; flex-direction: column; align-items: center; gap animation: spinOnce 0.6s ease-out forwards; }
        #time-left { position:: 6px; font-size: 0.95em; color: var(--secondary-text-color); absolute; top: 50%; left: 50%; transform: translate(-50%, -50 min-height: auto; width: 100%; }
        .workout-prompt { display: inline-flex%); z-index: 20; font-family: var(--font-family-timer); font-size; align-items: center; gap: 10px; border: 1px dashed rgba(var(--electric: 3.6em; font-weight: 700; color: var(--current-timer--blue-rgb), 0.4); padding: 10px 20px; border-radiuscolor); transition: color var(--transition-speed) ease, text-shadow var(--transition-speed) ease, font: var(--border-radius-md); color: var(--secondary-text-color-dark); font-size: -size 0.2s ease; pointer-events: none; white-space: nowrap; }
        #timer1em; margin-top: 0; cursor: default; background-color: rgba(var(--secondary--state { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%);bg-color-dark-rgb), 0.3); }
        .workout-prompt i { color: z-index: 20; font-size: 0.85em; font-family: var var(--electric-blue); }
        #current-exercise-container .exercise-details, #current-exercise(--font-family-main); letter-spacing: 0.1em; font-weight: 50-container .break-info { display: flex; flex-direction: column; flex-wrap: nowrap; justify-content0; text-transform: uppercase; opacity: 0; transition: opacity 0.3s ease, color var: center; align-items: center; gap: 6px; background-color: rgba(var(--secondary(--transition-speed) ease, text-shadow var(--transition-speed) ease, font-size 0.-bg-color-dark-rgb), 0.5); padding: 8px 12px;2s ease, bottom 0.2s ease; color: var(--current-timer-color); pointer- border-radius: var(--border-radius-sm); border: 1px solid rgba(var(--electric-blueevents: none; white-space: nowrap; }
        #timer-state.visible { opacity: 0.9;-rgb), 0.3); width: fit-content; max-width: 95%; font-size:  }
        #timer-state.preparing { animation: countdown-pulse 1s infinite; font-size:0.9em;}
        #current-exercise-container .exercise-details span, #current-exercise-container .break 1em; }
        #timer-state.finished-state { font-size: 0.9-info span { display: flex; align-items: center; gap: 5px; font-weight:5em; bottom: 18px; color: var(--finished-color-val); text-shadow: 400; }
        #current-exercise-container .exercise-details span i { color: var 0 0 8px var(--finished-color-val); }
        .state-exercise #time-left { font-size: 4em; letter-spacing: 0.05em; }


(--color-exercise); } #current-exercise-container .break-info i { color: var(--color-break); }
        .sets-info-text, .details-text { font-size: 0.        .workout-info { margin-bottom: 20px; min-height: auto; position: relative; text-align: center; display: flex; flex-direction: column; align-items: center; gap85em; opacity: 0.8; text-align: center; width: 100%; letter-: 8px; }
        #current-exercise-name-display { display: block; font-size: spacing: 0.03em;}
        .sets-info-text i { color: var(--electric-cyan1.3em; font-weight: 600; color: var(--primary-text-color); margin-bottom); } .details-text i { color: var(--neon-yellow); } /* Garder neon-yellow car: 8px; padding: 0 10px; line-height: 1.3; letter electric-yellow non défini */
        .controls { display: flex; justify-content: center; gap: -spacing: 0.03em; }
        body.state-exercise #current-exercise-name-display {8px; margin-top: 20px; flex-wrap: wrap; }
        .controls button color: var(--color-exercise); animation: textGlowPulse 2s infinite ease-in-out; }
 { background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.4); border        body.state-break #current-exercise-name-display { color: var(--color-break); animation: 1px solid var(--border-color); color: var(--secondary-text-color); padding: : textGlowPulse 2.5s infinite ease-in-out; }

        #current-exercise-container { display: flex; flex-direction: column; align-items: center; gap: 6px; font8px 14px; border-radius: var(--border-radius-md); font-size: 0.9em; font-weight: 500; cursor: pointer; transition: all var(--transition-size: 0.95em; color: var(--secondary-text-color); min-height:-speed) ease; display: inline-flex; align-items: center; justify-content: center; gap auto; width: 100%; }
        .workout-prompt { display: inline-flex; align-items: 6px; min-width: 100px; box-shadow: 0 2px: center; gap: 10px; border: 1px dashed rgba(var(--electric-blue-rgb),  5px rgba(var(--bg-color-dark-rgb),0.3); }
        .controls button:disabled { opacity: 0.5; cursor: not-allowed; background-color: rgba(var0.4); padding: 10px 20px; border-radius: var(--border-radius-md); color: var(--secondary-text-color-dark); font-size: 1em; margin(--secondary-bg-color-dark-rgb), 0.2); border-color: var(--border--top: 0; cursor: default; background-color: rgba(var(--secondary-bg-color-color-dark); color: var(--secondary-text-color-dark); box-shadow: none !important; transform: none !important; text-shadow: none !important; pointer-events: auto; }
        .controls button:dark-rgb), 0.3); }
        .workout-prompt i { color: var(--electric-blue); }not(:disabled):hover { border-color: var(--electric-blue); color: var(--electric-blue); background
        #current-exercise-container .exercise-details, #current-exercise-container .break-info { display: flex; flex-direction: column; flex-wrap: nowrap; justify-content: center; align-items: center-color: rgba(var(--electric-blue-rgb), 0.15); box-shadow: ; gap: 6px; background-color: rgba(var(--secondary-bg-color-dark-rgb0 0 10px rgba(var(--electric-blue-rgb), 0.3), inset 0 0), 0.5); padding: 8px 12px; border-radius: var(--border- 5px rgba(var(--electric-blue-rgb),0.1); transform: translateY(-1px);radius-sm); border: 1px solid rgba(var(--accent-border-color-rgb), 0.5); }
        .controls button i { font-size: 1em; margin-right: 4px; opacity: 0.8; transition: opacity var(--transition-speed) ease; }
        .controls button:not(: width: fit-content; max-width: 95%; font-size: 0.9em;}disabled):hover i { opacity: 1; }
        #start-pause-btn:not(:disabled) {
        #current-exercise-container .exercise-details span, #current-exercise-container .break-info span { display: flex; align-items: center; gap: 5px; font-weight: 400 animation: electricBorder 3s infinite linear; border-color: var(--electric-cyan);}
        #start-pause-; }
        #current-exercise-container .exercise-details span i { color: var(--color-exercisebtn:not(:disabled):hover { animation-play-state: paused; }
        .progress-tracker { font); } #current-exercise-container .break-info i { color: var(--color-break); }
-size: 0.85em; color: var(--secondary-text-color-dark); margin-top:         .sets-info-text, .details-text { font-size: 0.85em;15px; opacity: 0.7; font-weight: 500; display: flex; opacity: 0.8; text-align: center; width: 100%; letter-spacing: 0 flex-wrap: wrap; align-items: center; justify-content: center; gap: 8px .03em;}
        .sets-info-text i { color: var(--electric-cyan); } .15px; min-height: 1.2em; }
        #drive-connection-status-details-text i { color: var(--neon-yellow); }

        .controls { display: flex; justify-content: center; gap: 8px; margin-top: 20px; flex-wrap:main { display: inline-flex; align-items: center; gap: 6px; color: var(--neon-green); font-weight: 500; transition: color 0.3s ease; }
 wrap; }
        .controls button {
            background: linear-gradient(145deg, rgba(var(--secondary-bg-color-dark-rgb),0.5), rgba(var(--bg-color-dark        #drive-connection-status-main i.fa-google-drive { display: inline-block; font-size: 1.1em; }
        #drive-connection-status-main.error { color-rgb),0.5));
            border: 1px solid var(--border-color);
            color: var: var(--neon-red); }
        #drive-connection-status-main.loading { color: var(--secondary-text-color); padding: 9px 16px; /* Léger ajustement padding */
            border(--neon-yellow); }
        #progress-text-area { font-weight: 500;-radius: var(--border-radius-md); font-size: 0.9em; font-weight:  letter-spacing: 0.05em; }
        .rep-adjustment-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);500;
            cursor: pointer; transition: all var(--transition-speed) ease;
            display: inline z-index: 100; background-color: rgba(var(--bg-color-dark-rgb-flex; align-items: center; justify-content: center; gap: 6px; min-width), 0.9); padding: 20px; border-radius: var(--border-radius-md); border:: 100px;
            box-shadow: 0 3px 8px rgba(var(--bg-color-dark-rgb),0.4), inset 0 1px 1px rgba(var 1px solid var(--border-color); box-shadow: 0 10px 25px rgba((--electric-blue-rgb),0.1);
            letter-spacing: 0.03em;
        0,0,0,0.3); display: none; flex-direction: column; align-items:}
        .controls button:disabled { opacity: 0.5; cursor: not-allowed; background: center; gap: 15px; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); width: 280px; }
        .rep-adjustment-overlay.visible { rgba(var(--secondary-bg-color-dark-rgb), 0.2) !important; border-color: var display: flex; animation: fadeInScale 0.3s ease-out forwards; }
        @keyframes fadeIn(--border-color-dark) !important; color: var(--secondary-text-color-dark) !importantScale { from { opacity: 0; transform: translate(-50%, -50%) scale(0.; box-shadow: none !important; transform: none !important; text-shadow: none !important; pointer9); } to { opacity: 1; transform: translate(-50%, -50%) scale(1-events: auto; }
        .controls button:not(:disabled):hover {
            border-color: var(--electric-blue); color: var(--electric-blue);
            background: linear-gradient(145deg); } }
        .rep-adjustment-overlay .title { font-size: 1.1em; font-weight: 700; color: var(--primary-text-color); text-align: center; margin-, rgba(var(--electric-blue-rgb),0.15), rgba(var(--secondary-bg-colorbottom: 5px;}
        .rep-adjustment-controls { display: flex; align-items: center-dark-rgb),0.3));
            box-shadow: 0 0 12px rgba; gap: 15px; }
        .rep-adjustment-btn { width: 45px(var(--electric-blue-rgb), 0.4), inset 0 0 6px rgba(var; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4em; font-weight: 7(--electric-blue-rgb),0.2);
            transform: translateY(-2px) scale(1.00; background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.02);
        }
        .controls button:not(:disabled):active { transform: translateY(0px9); border: 1px solid var(--border-color); color: var(--primary-text-color); cursor) scale(0.98); box-shadow: 0 1px 3px rgba(var(--: pointer; transition: all var(--transition-speed) ease; }
        .rep-adjustment-btn.bg-color-dark-rgb),0.5); }
        .controls button i { font-size: minus { border-color: var(--neon-red); color: var(--neon-red); } .rep-adjustment-btn1em; margin-right: 4px; opacity: 0.8; transition: opacity var(--transition-speed.minus:hover { background-color: rgba(var(--neon-red-rgb), 0.15) ease; }
        .controls button:not(:disabled):hover i { opacity: 1; }
        #start); box-shadow: 0 0 12px rgba(var(--neon-red-rgb), 0.-pause-btn:not(:disabled) { animation: electricBorder 2.5s infinite linear; border-color: var5); }
        .rep-adjustment-btn.plus { border-color: var(--neon-green);(--electric-cyan);}
        #start-pause-btn:not(:disabled):hover { animation-play-state color: var(--neon-green); } .rep-adjustment-btn.plus:hover { background-color:: paused; }

        .progress-tracker { font-size: 0.85em; color: var(--secondary rgba(var(--neon-green-rgb), 0.15); box-shadow: 0 0-text-color-dark); margin-top: 15px; opacity: 0.7; font 12px rgba(var(--neon-green-rgb), 0.5); }
        .rep-weight: 500; display: flex; flex-wrap: wrap; align-items: center;-adjustment-btn:active { transform: scale(0.95); }
        .current-reps justify-content: center; gap: 8px 15px; min-height: 1.2 { font-size: 2.2em; font-weight: 900; color: var(--em; }
        #drive-connection-status-main { display: inline-flex; align-items: center; gapprimary-text-color); font-variant-numeric: tabular-nums; min-width: 60px: 6px; color: var(--neon-green); font-weight: 500; transition: color ; text-align: center; }
        .rep-adjustment-next-exercise { font-size: 0.3s ease; }
        #drive-connection-status-main i.fa-google-drive0.95em; color: var(--color-exercise); font-weight: 500; text-align: { display: inline-block; font-size: 1.1em; }
        #drive-connection center; margin-top: 5px; }
        .history-section h2, .progress-section h2 { color: var(--primary-text-color); margin-bottom: 25px; text-align:-status-main.error { color: var(--neon-red); }
        #drive-connection-status- center; font-family: var(--font-family-titles); text-shadow: 0 0 6px rgba(main.loading { color: var(--neon-yellow); }
        #progress-text-area { font-weight: 500; letter-spacing: 0.05em; }
        .rep-adjustment-var(--electric-cyan-rgb), 0.6);}
        .chart-container, .stats-display,overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, .history-list, .progress-filters select, .exercise-chart-container { border-color: var(--border-color -50%); z-index: 100; background-color: rgba(var(--bg-color-dark); background-color: transparent; }
        .history-filters button.active, .progress-filters button-dark-rgb), 0.9); padding: 20px; border-radius: var(--border.active { border-color: var(--electric-cyan); color: var(--electric-cyan); background-color-radius-md); border: 1px solid var(--border-color); box-shadow: 0 1: rgba(var(--electric-cyan-rgb), 0.1); box-shadow: 0 00px 25px rgba(0,0,0,0.3); display: none; flex- 8px rgba(var(--electric-cyan-rgb),0.4); text-shadow: 0 direction: column; align-items: center; gap: 15px; backdrop-filter: blur(5px);0 5px var(--electric-cyan); }
        .stats-display .motivational-message { background: linear-gradient(90deg, var(--neon-green), var(--electric-cyan)); -webkit-background -webkit-backdrop-filter: blur(5px); width: 280px; }
        .rep-adjustment-overlay.visible { display: flex; animation: fadeInScale 0.3s ease-out-clip: text; background-clip: text; -webkit-text-fill-color: transparent; color: forwards; }
        @keyframes fadeInScale { from { opacity: 0; transform: translate(-50%, transparent; font-weight: 500; }
        .history-list li:nth-child(even) { -50%) scale(0.9); } to { opacity: 1; transform: translate(-50 background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.2); }%, -50%) scale(1); } }
        .rep-adjustment-overlay .title { font- .history-list li:hover { background-color: rgba(var(--electric-cyan-rgb), 0size: 1.1em; font-weight: 700; color: var(--primary-text-color); text-align: center; margin-bottom: 5px;}
        .rep-adjustment-.05); }
        .history-item-type { color: var(--neon-pink); background-color: rgba(var(--neon-pink-rgb), 0.1); } .history-item-reps { color: var(--neon-purple); } .history-item-duration { color: var(--electric-controls { display: flex; align-items: center; gap: 15px; }
        .rep-adjustment-btn { width: 45px; height: 45px; border-radius: 50%;blue); }
        .progress-filters select:hover { border-color: var(--electric-cyan); } display: flex; align-items: center; justify-content: center; font-size: 1.4 .progress-filters select:focus { border-color: var(--electric-cyan); box-shadow: 0 0 em; font-weight: 700; background-color: rgba(var(--secondary-bg-color0 2px rgba(var(--electric-cyan-rgb), 0.3); }
        .history-controls,-dark-rgb), 0.9); border: 1px solid var(--border-color); color: var(--primary .progress-controls { padding-bottom: 20px; margin-bottom: 25px; border-text-color); cursor: pointer; transition: all var(--transition-speed) ease; }
        .rep--bottom: 1px solid var(--border-color-dark); display: flex; justify-content: spaceadjustment-btn.minus { border-color: var(--neon-red); color: var(--neon-red); } .rep-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .-adjustment-btn.minus:hover { background-color: rgba(var(--neon-red-rgb), history-filters, .progress-filters { display: flex; gap: 10px; flex-wrap: wrap;0.15); box-shadow: var(--glow-red); }
        .rep-adjustment-btn }
        .history-actions { display: flex; gap: 15px; align-items: center.plus { border-color: var(--neon-green); color: var(--neon-green); } .rep-adjustment-; color: var(--secondary-text-color-dark); } #history-drive-status { font-size: 0.8em; padding: 3px 6px; background-color: rgba(var(--secondary-btn.plus:hover { background-color: rgba(var(--neon-green-rgb), 0.1bg-color-dark-rgb), 0.5); border-radius: var(--border-radius-sm5); box-shadow: var(--glow-green); }
        .rep-adjustment-btn:active { transform: scale(0.95); }
        .current-reps { font-size: 2.2em); border: 1px solid var(--border-color-dark); transition: color 0.3s ease, border; font-weight: 900; color: var(--primary-text-color); font-variant--color 0.3s ease; } #history-drive-status.syncing { color: var(--neonnumeric: tabular-nums; min-width: 60px; text-align: center; }
        -yellow); border-color: var(--neon-yellow); } #history-drive-status.error { color.rep-adjustment-next-exercise { font-size: 0.95em; color: var(--: var(--neon-red); border-color: var(--neon-red); } #history-drive-statuscolor-exercise); font-weight: 500; text-align: center; margin-top: 5px;.success { color: var(--neon-green); border-color: var(--neon-green); }
         }
        .history-section h2, .progress-section h2 { color: var(--primary-text-color.chart-placeholder { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--secondary-text-color-dark); font-style:); margin-bottom: 25px; text-align: center; font-family: var(--font-family-titles); text-shadow: 0 0 6px rgba(var(--electric-cyan-rgb), 0. italic; text-align: center; padding: 0 10px; transition: opacity 0.3s ease6);}
        .chart-container, .stats-display, .history-list, .progress-filters select, .; } #history-chart-canvas, #exercise-progress-chart { display: block; width: 100% !important; height: 100% !important; transition: opacity 0.3s easeexercise-chart-container { border-color: var(--border-color-dark); background-color: transparent; }
        ; }
        .stats-display h3, .exercise-progress-container h3 { color: var(--.history-filters button.active, .progress-filters button.active { border-color: var(--electric-cyan); color: var(--electric-cyan); background-color: rgba(var(--electric-cyan-rgb),primary-text-color); font-size: 1.15em; margin-bottom: 15 0.1); box-shadow: 0 0 8px rgba(var(--electric-cyan-px; }
        .stats-display .content-wrapper p { margin-bottom: 8px; display: flex; align-items: center; gap: 8px;} .stats-display .content-wrapper prgb),0.4); text-shadow: 0 0 5px var(--electric-cyan); }
        . i { width: 16px; text-align: center; color: var(--electric-cyan); opacity: 0stats-display .motivational-message { background: linear-gradient(90deg, var(--neon-green), var.8;} .stats-display .content-wrapper p strong { color: var(--primary-text-color);(--electric-cyan)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill font-weight: 500; }
        .progress-filters .filter-group { display: flex-color: transparent; color: transparent; font-weight: 500; }
        .history-list li:nth-child(even) { background-color: rgba(var(--secondary-bg-color-dark-; flex-direction: column; gap: 8px; min-width: 180px; } .progress-filters .filter-group label { font-size: 0.85em; color: var(--secondaryrgb), 0.2); } .history-list li:hover { background-color: rgba(var(---text-color-dark); margin-bottom: -2px; }
        .progress-filters select {electric-cyan-rgb), 0.05); }
        .history-item-type { color: background-color: var(--input-bg); border: 1px solid var(--border-color-dark); color var(--neon-pink); background-color: rgba(var(--neon-pink-rgb), 0.1); } .: var(--primary-text-color-dark); border-radius: var(--border-radius-sm); paddinghistory-item-reps { color: var(--neon-purple); } .history-item-duration { color: 6px 10px; font-size: 0.9em; cursor: pointer; transition: var(--electric-blue); }
        .progress-filters select:hover { border-color: var(--electric-cyan); } .progress-filters select:focus { border-color: var(--electric-cyan); box: all var(--transition-speed) ease; max-width: 100%; appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www-shadow: 0 0 0 2px rgba(var(--electric-cyan-rgb), 0.3); }
        .history-controls, .progress-controls { padding-bottom: 20px.w3.org/2000/svg' viewBox='0 0 16 16; margin-bottom: 25px; border-bottom: 1px solid var(--border-color-' fill='%23A0AEC0'%3E%3Cpath fill-rule='evenodd'dark); display: flex; justify-content: space-between; align-items: center; flex-wrap: d='M4.22 6.22a.75.75 0 01 wrap; gap: 15px; }
        .history-filters, .progress-filters { display:1.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3. flex; gap: 10px; flex-wrap: wrap; }
        .history-actions { display25 3.25a.75.75 0 01-1.06: flex; gap: 15px; align-items: center; color: var(--secondary-text-color-dark); } #history-drive-status { font-size: 0.8em; padding: 0L4.22 7.28a.75.75 0 010-1 3px 6px; background-color: rgba(var(--secondary-bg-color-dark-rgb.06z' clip-rule='evenodd'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 8px center; background-size: 1), 0.5); border-radius: var(--border-radius-sm); border: 1px solid var(--border6px 16px; padding-right: 30px; }
        .progress-filters option-color-dark); transition: color 0.3s ease, border-color 0.3s ease { background-color: var(--secondary-bg-color); color: var(--primary-text-color); }; } #history-drive-status.syncing { color: var(--neon-yellow); border-color: var .filter-group:has(#metric-select) { display: none; }
        .history-list {(--neon-yellow); } #history-drive-status.error { color: var(--neon-red); border list-style: none; border: 1px solid var(--border-color-dark); border-radius: var(--border-color: var(--neon-red); } #history-drive-status.success { color: var(--neon-green); border-color: var(--neon-green); }
        .chart-placeholder { position: absolute-radius-md); background-color: transparent; box-shadow: none; max-height: 40; top: 50%; left: 50%; transform: translate(-50%, -50%);0px; overflow-y: auto; transition: border-color var(--transition-speed) ease; }
 color: var(--secondary-text-color-dark); font-style: italic; text-align: center;        .history-list li { display: grid; grid-template-columns: auto 1fr auto auto; align padding: 0 10px; transition: opacity 0.3s ease; } #history-chart--items: center; padding: 12px 15px; border-bottom: 1px solid var(--canvas, #exercise-progress-chart { display: block; width: 100% !important; height: border-color-dark); transition: background-color 0.2s ease, border-color var(--transition-speed100% !important; transition: opacity 0.3s ease; }
        .stats-display h3,) ease; gap: 10px 15px; }
        .history-list li:last .exercise-progress-container h3 { color: var(--primary-text-color); font-size: 1.-child { border-bottom: none; }
        .history-list li:nth-child(even)15em; margin-bottom: 15px; }
        .stats-display .content-wrapper { background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.2); p { margin-bottom: 8px; display: flex; align-items: center; gap: 8 }
        .history-list li:hover { background-color: rgba(var(--electric-cyan-rgbpx;} .stats-display .content-wrapper p i { width: 16px; text-align: center;), 0.05); }
        .history-item-date { color: var(--primary-text-color); font-size: 0.9em; grid-column: 1 / 2; }
         color: var(--electric-cyan); opacity: 0.8;} .stats-display .content-wrapper p strong { color: var(--primary-text-color); font-weight: 500; }
        .progress-.history-item-date small { color: var(--secondary-text-color); font-size: 0filters .filter-group { display: flex; flex-direction: column; gap: 8px; min-width.9em;}
        .history-item-type { color: var(--neon-pink); background-color: rgba(var(--neon-pink-rgb), 0.1); border-radius: var(--border-radius-: 180px; } .progress-filters .filter-group label { font-size: 0.8sm); padding: 3px 8px; font-size: 0.85em; font-5em; color: var(--secondary-text-color-dark); margin-bottom: -2px; }weight: 500; text-align: center; grid-column: 2 / 3; justify-self
        .progress-filters select { background-color: var(--input-bg); border: 1px solid var(--border-color-dark); color: var(--primary-text-color-dark); border-radius: var(--border-radius: start; }
        .history-item-reps { color: var(--neon-purple); font-weight: 500; font-size: 0.9em; grid-column: 3 / 4; justify-self-sm); padding: 6px 10px; font-size: 0.9em; cursor: end; }
        .history-item-reps i { margin-right: 4px; }: pointer; transition: all var(--transition-speed) ease; max-width: 100%; appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns
        .history-item-duration { color: var(--electric-blue); font-weight: 500; font-variant-numeric: tabular-nums; grid-column: 4 / 5; justify-self: end; }='http://www.w3.org/2000/svg' viewBox='0 0 1
        .history-list .no-history { grid-column: 1 / -1; color: var6 16' fill='%23A0AEC0'%3E%3Cpath fill-rule(--secondary-text-color); text-align: center; padding: 30px 15px;='evenodd' d='M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72 font-style: italic; border: none; background: none !important; }
        .post-workout-summary { position: fixed; inset: 0; background-color: rgba(var(--bg-color-dark-rgb),a.75.75 0 111.06 1.06l-3 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 0px); z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px; opacity: 0; visibility: hidden; pointer-events:10-1.06z' clip-rule='evenodd'/%3E%3C/svg none; transition: opacity 0.3s ease, visibility 0s linear 0.3s; }%3E"); background-repeat: no-repeat; background-position: right 8px center; background-size: 16px 16px; padding-right: 30px; }
        .
        .post-workout-summary.visible { opacity: 1; visibility: visible; pointer-events:progress-filters option { background-color: var(--secondary-bg-color); color: var(--primary-text auto; transition: opacity 0.3s ease, visibility 0s linear 0s; }
        .post-workout-summary-content { background-color: var(--secondary-bg-color); border: -color); } .filter-group:has(#metric-select) { display: none; }
        .history-1px solid var(--border-color); border-radius: var(--border-radius-lg); box-shadowlist { list-style: none; border: 1px solid var(--border-color-dark); border-radius: var(--border-radius-md); background-color: transparent; box-shadow: none; max-: 0 10px 30px rgba(0,0,0,0.4), height: 400px; overflow-y: auto; transition: border-color var(--transition-speed0 0 20px rgba(var(--electric-cyan-rgb), 0.1); width: 100%; max-width: 550px; max-height: 90vh; display: flex) ease; }
        .history-list li { display: grid; grid-template-columns: auto 1; flex-direction: column; overflow: hidden; transform: scale(0.95); transition: transform 0.3fr auto auto; align-items: center; padding: 12px 15px; border-bottom: 1s cubic-bezier(0.175, 0.885, 0.32,px solid var(--border-color-dark); transition: background-color 0.2s ease, border-color var 1.275), background-color var(--transition-speed) ease, border-color var(--transition(--transition-speed) ease; gap: 10px 15px; }
        .history--speed) ease; }
        .post-workout-summary.visible .post-workout-summary-contentlist li:last-child { border-bottom: none; }
        .history-list li:nth-child(even) { background-color: rgba(var(--secondary-bg-color-dark-rgb),  { transform: scale(1); }
        .post-workout-summary h2 { color: var(--electric-cyan); font-size: 1.5em; font-weight: 700; padding:0.2); }
        .history-list li:hover { background-color: rgba(var(--electric 20px 25px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; text-align: center; background-color: rgba(var(--bg-color--cyan-rgb), 0.05); }
        .history-item-date { color: var(--primary-text-color); font-size: 0.9em; grid-column: 1 / 2dark-rgb), 0.2); transition: color var(--transition-speed) ease, border-color var; }
        .history-item-date small { color: var(--secondary-text-color); font-size: 0.9em;}
        .history-item-type { color: var(--neon-pink(--transition-speed) ease, background-color var(--transition-speed) ease; text-shadow: 0 0 5px var(--electric-cyan); }
        .summary-items-list { list-style: none;); background-color: rgba(var(--neon-pink-rgb), 0.1); border-radius: var(--border-radius-sm); padding: 3px 8px; font-size: 0.85 padding: 15px 25px; overflow-y: auto; flex-grow: 1;em; font-weight: 500; text-align: center; grid-column: 2 / 3 background: var(--bg-color); border-bottom: 1px solid var(--border-color); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }
        .summary; justify-self: start; }
        .history-item-reps { color: var(--neon-purple); font-item { display: grid; grid-template-columns: 1fr auto; gap: 10px 1-weight: 500; font-size: 0.9em; grid-column: 3 / 45px; align-items: center; padding: 12px 0; border-bottom: 1px; justify-self: end; }
        .history-item-reps i { margin-right:  solid var(--border-color); } .summary-item:last-child { border-bottom: none; }4px; }
        .history-item-duration { color: var(--electric-blue); font-weight: 
        .summary-item .exercise-name { color: var(--primary-text-color); font-weight500; font-variant-numeric: tabular-nums; grid-column: 4 / 5; justify-self: end; }
        .history-list .no-history { grid-column: 1 / -1: 500; font-size: 1em; text-align: left; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } .summary-item .exercise-name i { color: var(--; color: var(--secondary-text-color); text-align: center; padding: 30px color-exercise); margin-right: 8px; opacity: 0.9; } .summary-item .15px; font-style: italic; border: none; background: none !important; }
        .post-workoutexercise-name small { font-size: 0.8em; color: var(--secondary-text-color-summary { position: fixed; inset: 0; background-color: rgba(var(--bg-color-dark-rgb), 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter); margin-left: 8px; display: block; }
        .summary-item .input-container { display:: blur(8px); z-index: 2000; display: flex; align-items: flex; align-items: center; gap: 8px; justify-self: end; } .summary-item label { center; justify-content: center; padding: 20px; opacity: 0; visibility: hidden; position: absolute; width: 1px; height: 1px; padding: 0; margin: - pointer-events: none; transition: opacity 0.3s ease, visibility 0s linear 0.1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        .summary-item input[type="number"] { background-color:3s; }
        .post-workout-summary.visible { opacity: 1; visibility: visible; pointer-events: auto; transition: opacity 0.3s ease, visibility 0s linear 0s var(--input-bg); border: 1px solid var(--border-color); color: var(--primary-text-color; }
        .post-workout-summary-content { background-color: var(--secondary-bg-color); border-radius: var(--border-radius-sm); padding: 6px 10px; font); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); box-size: 0.95em; width: 70px; text-align: center; transition-shadow: 0 10px 30px rgba(0,0,0,0.4: border-color var(--transition-speed) ease, background-color var(--transition-speed) ease, box), 0 0 20px rgba(var(--electric-cyan-rgb), 0.1);-shadow var(--transition-speed) ease, color var(--transition-speed) ease; -moz-appearance: width: 100%; max-width: 550px; max-height: 90vh textfield; }
        .summary-item input[type="number"]::-webkit-outer-spin-button; display: flex; flex-direction: column; overflow: hidden; transform: scale(0.95);, .summary-item input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .summary-item input:focus { border-color: var transition: transform 0.3s cubic-bezier(0.175, 0.885, 0(--electric-cyan); background-color: var(--secondary-bg-color); outline: none; box-shadow: .32, 1.275), background-color var(--transition-speed) ease, border-0 0 0 3px rgba(var(--electric-cyan-rgb), 0.3); }color var(--transition-speed) ease; }
        .post-workout-summary.visible .post-workout-summary-content { transform: scale(1); }
        .post-workout-summary h2 { color
        .summary-controls { padding: 20px 25px; display: flex; justify-content: center: var(--electric-cyan); font-size: 1.5em; font-weight: 70; gap: 15px; flex-shrink: 0; flex-wrap: wrap; border-top0; padding: 20px 25px; border-bottom: 1px solid var(--border: 1px solid var(--border-color); background-color: rgba(var(--bg-color-dark-rgb), 0.2); transition: border-color var(--transition-speed) ease, background-color-color); flex-shrink: 0; text-align: center; background-color: rgba(var(--bg-color-dark-rgb), 0.2); transition: color var(--transition-speed) ease, var(--transition-speed) ease; }
        .summary-controls button { border: none; color: #fff; min-width: 160px; padding: 10px 22px; border-radius: var(-- border-color var(--transition-speed) ease, background-color var(--transition-speed) ease; text-shadow: 0 0 5px var(--electric-cyan); }
        .summary-items-list { list-border-radius-md); font-size: 1em; font-weight: 500; cursor: pointer;style: none; padding: 15px 25px; overflow-y: auto; flex-grow transition: all var(--transition-speed) ease; display: inline-flex; align-items: center; justify: 1; background: var(--bg-color); border-bottom: 1px solid var(--border-color-content: center; gap: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); text-transform: uppercase; letter-spacing: 0.); transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }05em; }
        .summary-controls button:disabled { opacity: 0.6; cursor:
        .summary-item { display: grid; grid-template-columns: 1fr auto; gap: 1 not-allowed; box-shadow: none; background-color: var(--secondary-text-color) !important0px 15px; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-color); } .summary-item:last-child { border-bottom; filter: grayscale(50%); }
        #finish-summary-btn { background-color: var(--neon-green); --button-finish-glow: 0 0 12px rgba(var(--neon: none; }
        .summary-item .exercise-name { color: var(--primary-text-color-green-rgb), 0.5); }
        #finish-summary-btn:not(:disabled):); font-weight: 500; font-size: 1em; text-align: left; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } .summary-item .exercise-name i {hover { filter: brightness(1.15); box-shadow: 0 4px 10px rgba(0,0,0,0.3), 0 0 10px var(--button-finish-glow); transform: translateY(-1px); text-shadow: 0 0 5px rgba( color: var(--color-exercise); margin-right: 8px; opacity: 0.9; } .summary-item .exercise-name small { font-size: 0.8em; color: var(--secondary255,255,255,0.5); }
        #finish-summary--text-color); margin-left: 8px; display: block; }
        .summary-item .input-btn:not(:disabled):active { filter: brightness(0.95); transform: translateY(0); boxcontainer { display: flex; align-items: center; gap: 8px; justify-self: end; } .summary-shadow: 0 1px 3px rgba(0,0,0,0.2); }

        .message-area { position: fixed; bottom: 25px; left: 50%;-item label { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0,  transform: translateX(-50%); background-color: rgba(var(--secondary-bg-color-dark-rgb0); white-space: nowrap; border: 0; }
        .summary-item input[type="number"] {), 0.9); color: var(--primary-text-color); border: 1px solid var(--border- background-color: var(--input-bg); border: 1px solid var(--border-color); color: var(--primarycolor); padding: 12px 25px; border-radius: var(--border-radius-md-text-color); border-radius: var(--border-radius-sm); padding: 6px 1); z-index: 3000; opacity: 0; transition: all 0.5s ease; pointer-events: none; font-size: 0.95em; box-shadow: 0 40px; font-size: 0.95em; width: 70px; text-align: centerpx 15px rgba(0,0,0,0.3), 0 0 10; transition: border-color var(--transition-speed) ease, background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, color var(--transition-speed) ease; -moz-appearance:px rgba(var(--electric-cyan-rgb), 0.1); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); max-width: 90%; text-align textfield; }
        .summary-item input[type="number"]::-webkit-outer-spin-button: center; }
        .message-area.visible { opacity: 1; transform: translate(-50, .summary-item input[type="number"]::-webkit-inner-spin-button { -webkit-appearance%, 0); bottom: 40px; pointer-events: auto; }
        .message-area: none; margin: 0; }
        .summary-item input:focus { border-color: var.error-message { background-color: rgba(var(--neon-red-rgb), 0.8);(--electric-cyan); background-color: var(--secondary-bg-color); outline: none; box-shadow: 0 0 0 3px rgba(var(--electric-cyan-rgb), 0.3); } color: #fff; border-color: var(--neon-red); text-shadow: 0 0 5px rgba(0,0,0,0.5); box-shadow: 0 4px 1
        .summary-controls { padding: 20px 25px; display: flex; justify-content: center5px rgba(0,0,0,0.3), 0 0 10px rgba(var(--neon; gap: 15px; flex-shrink: 0; flex-wrap: wrap; border-top-red-rgb), 0.5); }
        footer { padding: 25px; text-: 1px solid var(--border-color); background-color: rgba(var(--bg-color-darkalign: center; font-size: 0.9em; color: var(--secondary-text-color);-rgb), 0.2); transition: border-color var(--transition-speed) ease, background-color var(--transition-speed) ease; }
        .summary-controls button { border: none; color: #fff; border-top: 1px solid rgba(var(--electric-blue-rgb), 0.2); margin-top: 50px; background-color: rgba(var(--bg-color-dark-rgb), min-width: 160px; padding: 10px 22px; border-radius 0.7); backdrop-filter: blur(3px); }
        footer p { margin-bottom:: var(--border-radius-md); font-size: 1em; font-weight: 50 8px; } footer a { color: var(--electric-cyan); text-decoration: none; transition:0; cursor: pointer; transition: all var(--transition-speed) ease; display: inline-flex; align color var(--transition-speed) ease, text-shadow var(--transition-speed) ease; } footer a:-items: center; justify-content: center; gap: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); text-transform: uppercase; letter-spacinghover { color: var(--primary-text-color); text-decoration: underline; text-shadow: 0 0 8px var(--electric-cyan); }
        footer .fab.fa-google-drive { color: var: 0.05em; }
        .summary-controls button:disabled { opacity: 0.(--neon-green); } footer .fab.fa-github { color: var(--neon-purple); }

6; cursor: not-allowed; box-shadow: none; background-color: var(--secondary-text-        @media (min-width: 769px) {
            .timer-and-image-color) !important; filter: grayscale(50%); }
        #finish-summary-btn { background-wrapper { flex-direction: row; justify-content: center; align-items: center; gap: 3color: var(--neon-green); --button-finish-glow: var(--glow-green); }
        #0px; }
            .exercise-image-area { max-width: 220px; marginfinish-summary-btn:not(:disabled):hover { filter: brightness(1.15); box-shadow: 0; }
            #exercise-image-display { max-height: 180px;: 0 4px 10px rgba(0,0,0,0.3), 0 0  }
            .timer-display { margin: 0; width: 300px; height: 10px var(--button-finish-glow); transform: translateY(-1px); text-shadow: 0 0 240px;}
            .reactor { width: 190px; height: 1905px rgba(255,255,255,0.5); }
        #finish-summary-btn:not(:disabled):active { filter: brightness(0.95); transform: translateYpx; }
            #current-exercise-name-display { font-size: 1.5em; }
            #current-exercise-container .exercise-details, #current-exercise-container .break-info { font(0); box-shadow: 0 1px 3px rgba(0,0,0,0-size: 1em; }
        }
        @media (max-width: 768.2); }

        .message-area { position: fixed; bottom: 25px; left:px) {
             .timer-display { width: 260px; height: 210 50%; transform: translateX(-50%); background-color: rgba(var(--secondary-bg-colorpx; }
             .reactor { width: 170px; height: 170px;-dark-rgb), 0.9); color: var(--primary-text-color); border: 1px solid }
             #time-left { font-size: 3.0em; }
             .controls button var(--border-color); padding: 12px 25px; border-radius: var(--border { font-size: 0.85em; padding: 8px 10px; min--radius-md); z-index: 3000; opacity: 0; transition: all width: 90px; }
             header h1 { font-size: 1.3em; } nav0.5s ease; pointer-events: none; font-size: 0.95em; box-shadow: ul { gap: 12px; }
             nav button, nav a.nav-link { font-size: 0 4px 15px rgba(0,0,0,0.3), 0  0.85em; padding: 6px 10px;}
             .exercise-image-area0 10px rgba(var(--electric-cyan-rgb), 0.1); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); max-width: 90 { max-width: 200px; margin-bottom: 15px; }
             #%; text-align: center; }
        .message-area.visible { opacity: 1; transform:exercise-image-display { max-height: 160px; }
             #current-exercise- translate(-50%, 0); bottom: 40px; pointer-events: auto; }
        container .sets-info-text, #current-exercise-container .details-text { display: none; }.message-area.error-message { background-color: rgba(var(--neon-red-rgb), 
        }
        @media (max-width: 480px) {
             .timer-0.8); color: #fff; border-color: var(--neon-red); text-shadow: 0 0and-image-wrapper { gap: 10px; margin-bottom:15px; }
             .timer 5px rgba(0,0,0,0.5); box-shadow: 0 4px-display { width: 220px; height: 180px; }
             .reactor 15px rgba(0,0,0,0.3), 0 0 10px { width: 140px; height: 140px; }
             #time-left var(--glow-red); }
        footer { padding: 25px; text-align: center; { font-size: 2.5em; }
             #current-exercise-name-display { font-size: font-size: 0.9em; color: var(--secondary-text-color); border-top:  1.1em; }
             #current-exercise-container .exercise-details { font-size: 0.85em; padding: 6px 10px; }
             .controls button {1px solid rgba(var(--electric-blue-rgb), 0.2); margin-top: 50px; flex-basis: calc(50% - 6px); padding: 8px; font-size: background-color: rgba(var(--bg-color-dark-rgb), 0.7); backdrop-filter 0.8em; min-width: 80px;}
             .header-content { justify-content: center: blur(3px); }
        footer p { margin-bottom: 8px; } footer a { color: var(--electric-cyan); text-decoration: none; transition: color var(--transition-speed) ease; text-align: center; } nav ul { justify-content: center; } .header-actions { justify-content, text-shadow var(--transition-speed) ease; } footer a:hover { color: var(--primary-text: center; width: 100%; margin-top: 10px; }
             .exercise-color); text-decoration: underline; text-shadow: 0 0 8px var(--electric-cyan);-image-area { max-width: 160px; } #exercise-image-display { max }
        footer .fab.fa-google-drive { color: var(--neon-green); } footer .fab.fa-height: 120px; }
        }
    </style>
</head>
<body class="logged-out dark-theme state-idle">

<header>
    <div class="header-github { color: var(--neon-purple); }


        @media (min-width: 76-content">
        <h1><i class="fas fa-bolt"></i> ArmorWorkout</h1>
        <nav>9px) { /* Écrans plus larges */
            .timer-and-image-wrapper { flex-direction: row; justify-content: center; align-items: center; gap: 30px; }
            
            <ul>
                <li><button id="nav-push" data-workout="Push" disabled>Push</button></li>
                <li><button id="nav-pull" data-workout="Pull" disabled>Pull</.exercise-image-area { max-width: 220px; margin: 0; }
            #button></li>
                <li><button id="nav-legs" data-workout="Legs" disabled>Legs</button></li>
                <li><button id="nav-history"><i class="fas fa-history">exercise-image-display { max-height: 180px; }
            .timer-display { margin: 0; width: 300px; height: 240px;}
            .reactor {</i> Historique</button></li>
                <li><button id="nav-progress" disabled><i class="fas width: 190px; height: 190px; }
            #current-exercise- fa-chart-line"></i> Progression</button></li>
                <li><a href="https://ironworkout.name-display { font-size: 1.5em; }
            #current-exercise-container .exercise-detailsgithub.io/armorworkout/prog" target="_blank" class="nav-link"><i class="fas fa, #current-exercise-container .break-info { font-size: 1em; }
        }-tasks"></i> Prog V1</a></li>
                <li><a href="https://ironworkout.github.io/armorworkout/muscle-evolution.html" target="_blank" class="nav-link"><i class="fas

        @media (max-width: 768px) { /* Tablettes et mobiles larges */
             . fa-chart-pie"></i> Évolution</a></li>
            </ul>
        </nav>
        <div classtimer-and-image-wrapper { gap: 15px; }
             .timer-display { width="header-actions">
            <div id="drive-status" style="display: none;">
                <: 260px; height: 210px; }
             .reactor { width: 170span id="drive-status-text">Connecté</span>
                <i id="settings-icon" class="fas fa-cog"></i>
             </div>
             <button id="signin-button" disabled><i class="fab fa-px; height: 170px; }
             #time-left { font-size: 3.0em; }
             .triangle { width: 125px; } .triangle::after { width: 95px; height: 95px; }
             .circle-2 { border-width: google"></i> Connecter Drive</button>
        </div>
    </div>
</header>

<div class="container">7px; box-shadow: 0 0 20px 20px rgba(var(--electric
    <main>
        <div class="workout-section app-section" id="workout-section">-cyan-rgb), 0.2); }
             .circle-3::after { width: 9
            <div class="timer-and-image-wrapper">
                <div id="exercise-image-container" class="exercise-image-area">
                    <img id="exercise-image-display" src="" alt0px; height: 90px; }
             .circle-5 { width: 50px; height: 50px; } .circle-5 span { width: 40px; height:="">
                </div>
                <div class="timer-display" id="timer-display-clickable" aria-label=" 40px; }
             .controls button { font-size: 0.85em; paddingAffichage du timer Arc Reactor">
                    <div class="reactor">
                        <div class="triangle"></div>: 8px 10px; min-width: 90px; }
             header h1
                        <div class="circle-1"><span></span><span></span><span></span><span></span></div>
                        <div class="circle- { font-size: 1.4em; } nav ul { gap: 10px; }
             2"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>
                        <div class="circle-3"></div>
                        <div class="circle-4"><span></span><span></span><span></span></div>
                        <divnav button, nav a.nav-link { font-size: 0.8em; padding: 6px 8 class="circle-5"><span></span><span></span><span></span></div>
                        <div class="circle-6"></div>px;}
             .history-list li { font-size: 0.9em; grid-template-columns:
                        <div class="circle-7"></div>
                        <div class="circle-8"><span></span><span> auto 1fr auto; gap: 5px 10px; } .history-item-reps</span><span></span></div>
                        <div id="time-left" aria-live="polite">00: { grid-column: 3 / 4; justify-self: start; } .history-item-duration00</div>
                        <div id="timer-state" aria-live="polite">Prêt</div>
 { grid-column: 1 / -1; grid-row: 2 / 3; justify-self: end                    </div>
                    <div class="rep-adjustment-overlay" id="rep-adjustment-overlay">
                        <div; } .summary-item { grid-template-columns: 1fr auto; }
             .exercise-image-area class="title">Ajuster Répétitions</div>
                        <div class="rep-adjustment-next- { max-width: 200px; margin-bottom: 15px; } #exercise-exercise" id="rep-adjustment-exercise-name">Exercice</div>
                        <div class="rep-adjustmentimage-display { max-height: 160px; }
             #current-exercise-container .-controls">
                            <button class="rep-adjustment-btn minus" id="rep-adjust-minus"sets-info-text, #current-exercise-container .details-text { display: none; }
         aria-label="Diminuer répétitions">-</button>
                            <span class="current-reps"}
        @media (max-width: 480px) { /* Petits Mobiles */
              id="current-reps-display" aria-live="polite">12</span>
                            <button class.timer-and-image-wrapper { gap: 10px; margin-bottom:10px;}="rep-adjustment-btn plus" id="rep-adjust-plus" aria-label="Augmenter répét
             .timer-display { width: 220px; height: 180px; marginitions">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="workout-info" id="workout-info">
                <div id="current-exercise-name-display">ArmorWorkout-bottom:0; }
             .reactor { width: 140px; height: 140px; }
             #time-left { font-size: 2.5em; }
             .triangle {</div>
                <div id="current-exercise-container" aria-live="polite">
                    <div class="workout-prompt">
                        <i class="fas fa-hand-pointer"></i>
                        <span>Sé width: 100px; } .triangle::after { width: 75px; height: lectionnez un entraînement.</span>
                    </div>
                </div>
            </div>
            <div class="controls">75px; }
             .circle-1::before { inset: 6px; }
             .circle-
                 <button id="prev-btn" disabled><i class="fas fa-backward-step"></i> Précédent2 { top: 20px; left: 20px; width: calc(100% - 4</button>
                <button id="start-pause-btn" disabled><i class="fas fa-play0px); height: calc(100% - 40px); border-width: 5px; }
             .circle-3::after { width: 70px; height: 70px"></i> Démarrer</button>
                <button id="skip-btn" disabled><i class="fas fa-forward-step"></i> Suivant</button>
                <button id="finish-btn" disabled><; }
             .circle-5 { width: 40px; height: 40px; } .circle-5 span { width: 32px; height: 32px; border-width:i class="fas fa-flag-checkered"></i> Finir</button>
                <button id="reset 4px; }
             .circle-7::after { width: 18px; height: -btn" disabled><i class="fas fa-redo"></i> Reset</button>
            </div>
            <18px; }
             #current-exercise-name-display { font-size: 1.1div class="progress-tracker" id="progress-tracker">
                 <span id="progress-text-area">Sélectionnez un entraînement</span>
                <span id="drive-connection-status-main" style="em; margin-bottom: 5px;}
             #current-exercise-container .exercise-details { font-size:display: none;">
                    <i class="fab fa-google-drive"></i>
                    <span id="drive-connection 0.85em; padding: 6px 10px; }
             .controls { margin-text">Connecté</span>
                </span>
            </div>
        </div>

        <div class="history-section app-section section-hidden" id="history-section">
             <h2><i class="fas fa-history-top: 15px; gap: 6px;}
             .controls button { flex-basis: calc(50% - 5px); padding: 7px; font-size: 0.75em; min"></i> Historique & Statistiques</h2>
             <div class="history-controls"> <div class="history--width: 75px;}
             .header-content { flex-direction: column; gap: filters" role="group" aria-label="Filtres période historique"> <button data-period="week" class="active"><i class="fas fa-calendar-week"></i> Semaine</button> <button data-10px; }
             nav ul { gap: 8px; } nav button, nav a.nav-link { font-size: 0.75em; padding: 5px 7px; }
             .exercise-period="month"><i class="fas fa-calendar-alt"></i> Mois</button> <button data-periodimage-area { max-width: 160px; margin-bottom: 10px; padding="year"><i class="fas fa-calendar-check"></i> Année</button> <button data-period="all"><i class="fas fa-infinity"></i> Tout</button> </div> <div class="history-actions" style="display: none;"> <span id="history-drive-status">Synchro Drive</span> </div> </div>
: 6px; } #exercise-image-display { max-height: 120px; }
             #workout-info { margin-bottom: 15px;}
             .progress-tracker { margin-top:             <div class="chart-container"> <canvas id="history-chart-canvas" role="img" aria-label="Graphique de la durée d'entraînement"></canvas> <p id="history-chart-placeholder" 10px; font-size: 0.8em; }
        }
    </style> class="chart-placeholder" style="display: none;"></p> </div>
             <div class="stats
</head>
<body class="logged-out dark-theme state-idle">

<header>
-display" id="stats-display"> <h3>Statistiques</h3> <div class="content-wrapper" aria-    <div class="header-content">
        <h1><i class="fas fa-bolt"></i> ArmorWorkout</h1>
        <nav>
            <ul>
                <li><button id="nav-push" data-workout="live="polite"> <p>Connectez-vous pour voir les statistiques.</p> </div> <p classPush" disabled>Push</button></li>
                <li><button id="nav-pull" data-workout="="motivational-message"></p> </div>
             <ul class="history-list" id="history-Pull" disabled>Pull</button></li>
                <li><button id="nav-legs" data-workout="list"> <li class="no-history">Connectez-vous pour voir l'historique.</li> </ul>
        </div>Legs" disabled>Legs</button></li>
                <li><button id="nav-history"><i class

        <div class="progress-section app-section section-hidden" id="progress-section">
             <h2><i="fas fa-history"></i> Historique</button></li>
                <li><button id="nav-progress" class="fas fa-chart-line"></i> Analyse de Progression</h2>
             <div class="progress-controls"> disabled><i class="fas fa-chart-line"></i> Progression</button></li>
                <li><a href="https <div class="progress-filters"> <div class="filter-group"> <label for="exercise-select">Exercice</label> <select id="exercise-select" aria-label="Sélectionner un exercice"> <://ironworkout.github.io/armorworkout/prog" target="_blank" class="nav-link"><i class="fas fa-tasks"></i> Prog V1</a></li>
                <li><a href="https://ironworkoutoption value="all">Tous les exercices (Total Reps)</option> </select> </div> <div class="filter-group.github.io/armorworkout/muscle-evolution.html" target="_blank" class="nav-link"><" style="display:none;"> <label for="metric-select">Métrique</label> <select id="i class="fas fa-chart-pie"></i> Évolution</a></li>
            </ul>
        </nav>
metric-select" aria-label="Sélectionner une métrique"> <option value="reps">Rép        <div class="header-actions">
            <div id="drive-status" style="display: noneétitions</option> </select> </div> <div class="filter-group"> <label for="period-select;">
                <span id="drive-status-text">Connecté</span>
                {/* L'icône des">Période</label> <select id="period-select" aria-label="Sélectionner une période"> <option value="3months">3 derniers mois</option> <option value="6months">6 derniers mois</option> settings pourrait être réintroduite plus tard si besoin */}
             </div>
             <button id="signin-button" disabled <option value="all">Tout l'historique</option> </select> </div> </div> </div>
             <div class><i class="fab fa-google"></i> Connecter Drive</button>
             <i id="settings-="exercise-progress-container"> <h3>Progression (Répétitions)</h3> <div class="exercise-icon" class="fas fa-cog" title="Paramètres (à venir)"></i>
        </div>
    </div>
</chart-container"> <canvas id="exercise-progress-chart" role="img" aria-label="Graphique de progression desheader>

<div class="container">
    <main>
        <div class="workout-section app répétitions"></canvas> <p id="exercise-progress-placeholder" class="chart-placeholder">Sélectionnez un exercice-section" id="workout-section">
            <div class="timer-and-image-wrapper">
                <div id="exercise-image-container" class="exercise-image-area">
                    <img id.</p> </div> </div>
        </div>
    </main>
</div>

<footer>
    <p>© 20="exercise-image-display" src="" alt="">
                </div>
                <div class="timer-display" id="timer24 ArmorWorkout. Sauvegarde sur <i class="fab fa-google-drive" aria-hidden="true"></i> Google Drive.</p>
    <p><a href="https://github.com/ironworkout/armorworkout"-display-clickable" aria-label="Affichage du timer Arc Reactor">
                    <div class="reactor">
                        <div class="triangle"></div>
                        <div class="circle-1"><span></span><span></span><span></span> target="_blank" rel="noopener noreferrer"><i class="fab fa-github" aria-hidden="true"></i> Voir<span></span></div>
                        <div class="circle-2"><span></span><span></span><span></span><span></span><span></span><span></span><span></span> sur GitHub</a></p>
</footer>

<div id="message-area" class="message-area" role="status"<span></span></div>
                        <div class="circle-3"></div>
                        <div class="circle-4"> aria-live="polite"></div>

<div id="post-workout-summary" class="post-workout-summary"<span></span><span></span><span></span></div>
                        <div class="circle-5"><span></span><span></span><span></span></div>
                        < role="dialog" aria-modal="true" aria-labelledby="summary-title">
    <div class="div class="circle-6"></div>
                        <div class="circle-7"></div>
                        <div classpost-workout-summary-content"> <h2 id="summary-title">Résumé & Objectifs</h2> <ul id="summary="circle-8"><span></span><span></span><span></span></div>
                        <div id="time-left" aria--items-list" class="summary-items-list"></ul> <div class="summary-controls"> <button id="finish-summary-btn"><i class="fas fa-check"></i> Fin & Sauvegarder</live="polite">00:00</div>
                        <div id="timer-state" aria-live="polite">Prêt</div>
                    </div>
                    <div class="rep-adjustment-overlay" id="rep-adjustmentbutton> </div> </div>
</div>

<script async defer src="https://accounts.google.com/gsi-overlay">
                        <div class="title">Ajuster Répétitions</div>
                        <div class/client"></script>

<script>
    // --- CONFIGURATION & CONSTANTES ---
    const GOOGLE="rep-adjustment-next-exercise" id="rep-adjustment-exercise-name">Exercice</div>
                        <_CLIENT_ID = "731283926358-viam3ulpgdiv class="rep-adjustment-controls">
                            <button class="rep-adjustment-btn minus" id="na14flfdeb9m92l8s620hoi.apps.googleusercontent.comrep-adjust-minus" aria-label="Diminuer répétitions">-</button>
                            <span class";
    const GOOGLE_DRIVE_SCOPES = 'https://www.googleapis.com/auth/="current-reps" id="current-reps-display" aria-live="polite">12drive.file';
    const HISTORY_FILENAME = "armorworkout_history.json";
    const PROGRAM_</span>
                            <button class="rep-adjustment-btn plus" id="rep-adjust-plus" aria-FILENAMES = { Push: "armorworkout_push_program_v4.json", Pull: "armorlabel="Augmenter répétitions">+</button>
                        </div>
                    </div>
                </div>
            </div>

            workout_pull_program_v5_2.json", Legs: "armorworkout_legs_program_v<div class="workout-info" id="workout-info">
                <div id="current-exercise-1_7.json" };
    const PROGRAM_TYPES = ['Push', 'Pull', 'Legs'];name-display">ArmorWorkout</div>
                <div id="current-exercise-container" aria-live="pol
    const PREPARE_DURATION = 3;
    const IN_PROGRESS_KEY = 'armorWorkoutite">
                    <div class="workout-prompt">
                        <i class="fas fa-hand-pointerStateInProgress';
    const GIS_CHECK_INTERVAL = 100;
    const GIS_MAX_"></i>
                        <span>Sélectionnez un entraînement.</span>
                    </div>
                </div>
            </div>
            <div classRETRIES = 50;

    const defaultWorkouts = { /* ... Contenu des programmes JSON (identique à="controls">
                 <button id="prev-btn" disabled><i class="fas fa-backward-step"></i> la version précédente) ... */
      Push: {
        "routine_name": "PUSH V4 - Hypertrophie Élite (Format App)",
        "description": "Séance PUSH optimisée pour hypertroph Précédent</button>
                <button id="start-pause-btn" disabled><i class="ie avec matériel limité. Focus pecs, épaules, triceps.",
        "workout_data": [
          { "typefas fa-play"></i> Démarrer</button>
                <button id="skip-btn" disabled><": "exercise", "name": "Dumbbell Floor Flyes (Pré-Épuisement Superset 1i class="fas fa-forward-step"></i> Suivant</button>
                <button id="finish-btn" disabled><i class="fas fa-flag-checkered"></i> Finir</button>
                </2)", "sets_info": "Partie 1/2 du Superset - Total 3 Supersetsbutton id="reset-btn" disabled><i class="fas fa-redo"></i> Reset</button>
            ", "reps": 15, "weight": 10, "weight_unit": "kg (</div>
            <div class="progress-tracker" id="progress-tracker">
                 <span id="progress2x5kg)", "details": "Écarté au sol avec haltères 5kg. Focus contraction et-text-area">Sélectionnez un entraînement</span>
                <span id="drive-connection-status-main" contrôle.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": style="display: none;">
                    <i class="fab fa-google-drive"></i>
                    <span 15, "reps_target_max": 20, "progression_note": "Quand id="drive-connection-text">Connecté</span>
                </span>
            </div>
        </div>

        <div 20 reps (RIR 0-1) faciles, focus sur tempo excentrique plus lent (3 class="history-section app-section section-hidden" id="history-section">
             <h2><i class-4s) ou pause en étirement (1s)." },
          { "type": "break", "="fas fa-history"></i> Historique & Statistiques</h2>
             <div class="history-controls"> <div class="history-filters" role="group" aria-label="Filtres période historique"> <button dataduration": 15, "name": "Transition Superset (15s)" },
          { "type": "exercise", "name": "Pompes avec Pieds Surélevés (Pré-Épuisement Superset 2/2)", "sets_info": "Partie 2/2 du Superset - Total 3-period="week" class="active"><i class="fas fa-calendar-week"></i> Semaine</button Supersets", "reps_text": "AMRAP", "weight": 0, "weight_unit":> <button data-period="month"><i class="fas fa-calendar-alt"></i> Mois</button> <button data-period="year"><i class="fas fa-calendar-check"></i> Année</button> "Poids de corps", "details": "Option: + Élastique(s) sur le dos. Pieds surélevés pour cibler haut des pecs.", "equipment": "Poids de corps, Option: Élastiques 15 <button data-period="all"><i class="fas fa-infinity"></i> Tout</button> </div> <div class="history-actions" style="display: none;"> <span id="history-drive-status">Synkg/25kg", "reps_start_text": "AMRAP", "reps_target_max_text": "AMRAP", "progression_note": "Aller à l'échec technique.chro Drive</span> </div> </div>
             <div class="chart-container"> <canvas id="history-chart-canvas" role="img" aria-label="Graphique de la durée d'entraînement"></canvas> <p Quand les reps augmentent significativamente, ajouter élastique 15kg, puis 25kg, ou surélever plus id="history-chart-placeholder" class="chart-placeholder" style="display: none;"></p>  les pieds." },
          { "type": "break", "duration": 90, "name": "</div>
             <div class="stats-display" id="stats-display"> <h3>Statistiques</h3> <div class="contentRepos après Superset" },
          { "type": "exercise", "name": "Dumbbell Floor Fly-wrapper" aria-live="polite"> <p>Connectez-vous pour voir les statistiques.</p>es (Pré-Épuisement Superset 1/2) - Série 2", "sets_info": </div> <p class="motivational-message"></p> </div>
             <ul class="history-list" id=" "Partie 1/2 du Superset - Total 3 Supersets", "reps": 15, "weight": 10, "weight_unit": "kg (2x5kg)", "details":history-list"> <li class="no-history">Connectez-vous pour voir l'historique.</li> </ul>
        </div>

        <div class="progress-section app-section section-hidden" id="progress "Écarté au sol avec haltères 5kg.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 15, "reps_target_max": -section">
             <h2><i class="fas fa-chart-line"></i> Analyse de Progression</h2>
             20, "progression_note": "Vise la même difficulté/reps que la 1ère série du superset<div class="progress-controls"> <div class="progress-filters"> <div class="filter-group"> <label for="exercise-select">Exercice</label> <select id="exercise-select" aria-label." },
          { "type": "break", "duration": 15, "name": "Transition Superset (15s)" },
          { "type": "exercise", "name": "Pompes avec Pied="Sélectionner un exercice"> <option value="all">Tous les exercices (Total Reps)</option> </select> s Surélevés (Pré-Épuisement Superset 2/2) - Série 2", "sets_info</div> <div class="filter-group" style="display:none;"> <label for="metric-select">Métrique</label> <select id="metric-select" aria-label="Sélectionner une métrique"> <": "Partie 2/2 du Superset - Total 3 Supersets", "reps_text":option value="reps">Répétitions</option> </select> </div> <div class="filter-group "AMRAP", "weight": 0, "weight_unit": "Poids de corps", "details": "Option: + Élastique(s) sur le dos.", "equipment": "Poids de corps, Option: Élast"> <label for="period-select">Période</label> <select id="period-select" aria-label="Sélectionner une période"> <option value="3months">3 derniers mois</option> <optioniques 15kg/25kg", "reps_start_text": "AMRAP", "re value="6months">6 derniers mois</option> <option value="all">Tout l'historique</option> </select>ps_target_max_text": "AMRAP", "progression_note": "Vise la même intens </div> </div> </div>
             <div class="exercise-progress-container"> <h3>Progression (Répétitionsité que la 1ère série du superset." },
          { "type": "break", "duration":)</h3> <div class="exercise-chart-container"> <canvas id="exercise-progress-chart" role="img" aria 90, "name": "Repos après Superset" },
          { "type": "exercise", "-label="Graphique de progression des répétitions"></canvas> <p id="exercise-progress-placeholder" classname": "Dumbbell Floor Flyes (Pré-Épuisement Superset 1/2) - Série 3", "sets_info": "Partie 1/2 du Superset - Total 3 Supersets", "reps":="chart-placeholder">Sélectionnez un exercice.</p> </div> </div>
        </div>
    </main>
 15, "weight": 10, "weight_unit": "kg (2x5kg)",</div>

<footer>
    <p>© 2024 ArmorWorkout. Sauvegarde sur <i class="fab fa-google-drive" aria-hidden="true"></i> Google Drive.</p>
    <p><a href=" "details": "Écarté au sol avec haltères 5kg.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 15, "reps_target_https://github.com/ironworkout/armorworkout" target="_blank" rel="noopener noreferrer"><i class="max": 20, "progression_note": "Donne tout sur cette dernière série du superset !" },
fab fa-github" aria-hidden="true"></i> Voir sur GitHub</a></p>
</footer>

<div id="message-area" class="message-area" role="status" aria-live="polite"></div>          { "type": "break", "duration": 15, "name": "Transition Superset (15s)" },
          { "type": "exercise", "name": "Pompes avec Pieds Surélev

<div id="post-workout-summary" class="post-workout-summary" role="dialog" aria-modal="és (Pré-Épuisement Superset 2/2) - Série 3", "sets_info": "Parttrue" aria-labelledby="summary-title">
    <div class="post-workout-summary-content">ie 2/2 du Superset - Total 3 Supersets", "reps_text": "AMRAP", <h2 id="summary-title">Résumé & Objectifs</h2> <ul id="summary-items-list" class="summary "weight": 0, "weight_unit": "Poids de corps", "details": "Option: +-items-list"></ul> <div class="summary-controls"> <button id="finish-summary-btn">< Élastique(s) sur le dos.", "equipment": "Poids de corps, Option: Élastiques 15i class="fas fa-check"></i> Fin & Sauvegarder</button> </div> </div>
</div>

<script async defer src="https://accounts.google.com/gsi/client"></script>

<scriptkg/25kg", "reps_start_text": "AMRAP", "reps_target_max_text": "AMRAP", "progression_note": "Donne tout sur cette dernière série du superset !" },>
    // --- CONFIGURATION & CONSTANTES ---
    const GOOGLE_CLIENT_ID = "7312
          { "type": "break", "duration": 90, "name": "Repos après Superset83926358-viam3ulpgna14flfdeb9m92" },
          { "type": "exercise_myo_reps", "name": "Floor Press (l8s620hoi.apps.googleusercontent.com";
    const GOOGLE_DRIVE_Combo Haltères + Élastique) - MYO-REPS", "sets_info": "1 Série dSCOPES = 'https://www.googleapis.com/auth/drive.file';
    const HISTORY_FILENAME'Activation + 3-4 Mini-Séries", "activation_reps_start": 10, = "armorworkout_history.json";
    const PROGRAM_FILENAMES = { Push: "armorworkout_push_program_v4.json", Pull: "armorworkout_pull_program_v5_2 "activation_reps_target_max": 15, "mini_sets_count": "3-.json", Legs: "armorworkout_legs_program_v1_7.json" };
    const4", "mini_reps_start": 3, "mini_reps_target_max":  PROGRAM_TYPES = ['Push', 'Pull', 'Legs'];
    const PREPARE_DURATION = 5, "weight_details": "2x5kg Haltères + Élastique(s) 15kg/23;
    const IN_PROGRESS_KEY = 'armorWorkoutStateInProgress';
    const GIS_CHECK_INTERVAL = 100;
    const GIS_MAX_RETRIES = 50;

    const5kg/combinés", "details": "Combo: Haltères tenus avec élastique(s) passé(s) dans le dos.", "equipment": "Haltères 5kg, Élastiques 15kg/25kg, Tapis de sol", "progression_note": "Activ: Quand 15 reps (R defaultWorkouts = { /* ... Contenu JSON des programmes (identique à la version V3.7) ... */
      Push: {
        "routine_name": "PUSH V4 - Hypertrophie Élite (FormatIR 1), augmenter résistance élastique. Mini-Séries: Viser 4 mini-séries ou plus de App)",
        "description": "Séance PUSH optimisée pour hypertrophie avec matériel limité. Focus pe reps dans les mini-séries.", "rest_between_mini_sets": 15, "rest_after_exercisecs, épaules, triceps.",
        "workout_data": [
          { "type": "exercise",": 90, "reps_text": "MYO", "weight_text":"Combo" },
           "name": "Dumbbell Floor Flyes (Pré-Épuisement Superset 1/2)", "{ "type": "break", "duration": 90, "name": "Repos après Myo-Rsets_info": "Partie 1/2 du Superset - Total 3 Supersets", "repseps" },
          { "type": "exercise", "name": "Pike Push-ups", "re": 15, "weight": 10, "weight_unit": "kg (2x5kgps": 6, "weight": 0, "weight_unit": "Poids de corps", "details)", "details": "Écarté au sol avec haltères 5kg. Focus contraction et contrôle.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 15,": "Pompes piquées, focus épaules.", "equipment": "Poids de corps, Tapis de sol", "reps_start": 6, "reps_target_max": 12, "progression_note": "reps_target_max": 20, "progression_note": "Quand 20 reps (RIR 0-1) faciles, focus sur tempo excentrique plus lent (3-4s) "Quand 12 reps (RIR 1-2) maîtrisées, surélever les pieds progressivement." },
          { "type": "break", "duration": 75, "name": "Repos" ou pause en étirement (1s)." },
          { "type": "break", "duration": 1 },
          { "type": "exercise", "name": "Pike Push-ups - Série 2",5, "name": "Transition Superset (15s)" },
          { "type": "exercise", "name": "Pompes avec Pieds Surélevés (Pré-Épuisement Superset 2/2 "reps": 6, "weight": 0, "weight_unit": "Poids de corps", "details": "Pompes piquées.", "equipment": "Poids de corps, Tapis de sol", ")", "sets_info": "Partie 2/2 du Superset - Total 3 Supersets", "reps_start": 6, "reps_target_max": 12, "progression_reps_text": "AMRAP", "weight": 0, "weight_unit": "Poids de corps", "note": "Vise la même difficulté." },
          { "type": "break", "duration": 7details": "Option: + Élastique(s) sur le dos. Pieds surélevés pour cibler5, "name": "Repos" },
          { "type": "exercise", "name": "Pike haut des pecs.", "equipment": "Poids de corps, Option: Élastiques 15kg/ Push-ups - Série 3", "reps": 6, "weight": 0, "weight_25kg", "reps_start_text": "AMRAP", "reps_target_max_unit": "Poids de corps", "details": "Pompes piquées.", "equipment": "Poids detext": "AMRAP", "progression_note": "Aller à l'échec technique. Quand les reps augment corps, Tapis de sol", "reps_start": 6, "reps_target_max": 1ent significativamente, ajouter élastique 15kg, puis 25kg, ou surélever plus les pieds."2, "progression_note": "Dernière série, donne tout !" },
          { "type": " },
          { "type": "break", "duration": 90, "name": "Repos après Superset" },
          { "type": "exercise", "name": "Dumbbell Floor Flyes (Prébreak", "duration": 75, "name": "Repos" },
          { "type": "exercise", "name": "Élévations Latérales avec Haltères", "reps": 15, "weight-Épuisement Superset 1/2) - Série 2", "sets_info": "Partie": 10, "weight_unit": "kg (2x5kg)", "details": "Focus brûlure et 1/2 du Superset - Total 3 Supersets", "reps": 15, "weight": 10, "weight_unit": "kg (2x5kg)", "details": "Écart contrôle strict.", "equipment": "Haltères 5kg", "reps_start": 15, "reps_target_max": 30, "progression_note": "Quand 25 repsé au sol avec haltères 5kg.", "equipment": "Haltères 5kg, Tapis de (RIR 0-1) faciles, ralentir l'excentrique (3-4s), ajouter pause en haut sol", "reps_start": 15, "reps_target_max": 20, (1-2s), ou viser 30 reps." },
          { "type": "break", "duration":  "progression_note": "Vise la même difficulté/reps que la 1ère série du superset60, "name": "Repos" },
          { "type": "exercise", "name": "É." },
          { "type": "break", "duration": 15, "name": "Transition Suplévations Latérales avec Haltères - Série 2", "reps": 15, "weight": erset (15s)" },
          { "type": "exercise", "name": "Pompes avec Pied10, "weight_unit": "kg (2x5kg)", "details": "Contrôle stricts Surélevés (Pré-Épuisement Superset 2/2) - Série 2", "sets_info": "Partie 2/2 du Superset - Total 3 Supersets", "reps_text":.", "equipment": "Haltères 5kg", "reps_start": 15, "re "AMRAP", "weight": 0, "weight_unit": "Poids de corps", "details":ps_target_max": 30, "progression_note": "Maintiens la qualité." }, "Option: + Élastique(s) sur le dos.", "equipment": "Poids de corps, Option: É
          { "type": "break", "duration": 60, "name": "Repos" },
lastiques 15kg/25kg", "reps_start_text": "AMRAP", "          { "type": "exercise", "name": "Élévations Latérales avec Haltères - Série 3", "reps": 15, "weight": 10, "weight_unit": "reps_target_max_text": "AMRAP", "progression_note": "Vise la mêmekg (2x5kg)", "details": "Contrôle strict.", "equipment": "Haltères  intensité que la 1ère série du superset." },
          { "type": "break", "duration": 5kg", "reps_start": 15, "reps_target_max": 3090, "name": "Repos après Superset" },
          { "type": "exercise", "name, "progression_note": "Vise la brûlure." },
          { "type": "break": "Dumbbell Floor Flyes (Pré-Épuisement Superset 1/2) - Série 3", "sets_info": "Partie 1/2 du Superset - Total 3 Supersets", "reps", "duration": 60, "name": "Repos" },
          { "type": "exercise",": 15, "weight": 10, "weight_unit": "kg (2x5kg "name": "Élévations Latérales avec Haltères (Optionnel 4ème série)", "re)", "details": "Écarté au sol avec haltères 5kg.", "equipment": "Haltèresps": 15, "weight": 10, "weight_unit": "kg (2x5 5kg, Tapis de sol", "reps_start": 15, "reps_targetkg)", "details": "Si énergie, pour plus de volume.", "equipment": "Haltères 5kg", "reps_start": 15, "reps_target_max": 30, "_max": 20, "progression_note": "Donne tout sur cette dernière série du superset !" },
          { "type": "break", "duration": 15, "name": "Transition Superset (progression_note": "Dernière série, proche de l'échec." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type":15s)" },
          { "type": "exercise", "name": "Pompes avec Pieds Surélevés "exercise", "name": "Band Pushdowns", "reps": 12, "weight_text": "Élastique 15kg", "details": "Ancrage porte haut. Focus triceps.", " (Pré-Épuisement Superset 2/2) - Série 3", "sets_info": "Partie 2/2 du Superset - Total 3 Supersets", "reps_text": "AMRAP", "weightequipment": "Élastique 15kg, Accroche porte, Poignées", "reps_start": 12, "reps_target_max": 20, "progression_note": "": 0, "weight_unit": "Poids de corps", "details": "Option: + ÉlastQuand 20 reps (RIR 0-1) avec 15kg, passer au 25ique(s) sur le dos.", "equipment": "Poids de corps, Option: Élastiques 1kg (recommencer vers 10-12 reps). Puis combiner 15+25kg. Option Drop5kg/25kg", "reps_start_text": "AMRAP", "reps_target Set." },
          { "type": "break", "duration": 60, "name": "Repos" },
_max_text": "AMRAP", "progression_note": "Donne tout sur cette dernière série du          { "type": "exercise", "name": "Band Pushdowns - Série 2", "reps": superset !" },
          { "type": "break", "duration": 90, "name": "Repos après Superset" },
          { "type": "exercise_myo_reps", "name": 12, "weight_text": "Élastique 15kg", "details": "Garde la tension.", "Floor Press (Combo Haltères + Élastique) - MYO-REPS", "sets_info": "equipment": "Élastique 15kg, Accroche porte, Poignées", "reps_ "1 Série d'Activation + 3-4 Mini-Séries", "activation_reps_start": 10, "activation_reps_target_max": 15, "mini_sets_countstart": 12, "reps_target_max": 20, "progression_note": "Même résistance." },
          { "type": "break", "duration": 60, "name": "3-4", "mini_reps_start": 3, "mini_reps_target": "Repos" },
          { "type": "exercise", "name": "Band Pushdowns - Série 3", "reps": 12, "weight_text": "Élastique 15kg",_max": 5, "weight_details": "2x5kg Haltères + Élastique(s) 15kg/25kg/combinés", "details": "Combo: Haltères tenus avec élastique(s) "details": "Contraction maximale.", "equipment": "Élastique 15kg, Accroche porte passé(s) dans le dos.", "equipment": "Haltères 5kg, Élastiques 1, Poignées", "reps_start": 12, "reps_target_max": 25kg/25kg, Tapis de sol", "progression_note": "Activ: Quand 10, "progression_note": "Finis fort !" }
        ]
      },
      Pull:5 reps (RIR 1), augmenter résistance élastique. Mini-Séries: Viser 4 mini-s {
        "routine_name": "PULL V5.2 - Hypertrophie Élite (Formatéries ou plus de reps dans les mini-séries.", "rest_between_mini_sets": 15, " App)",
        "description": "Séance PULL optimisée. Priorité largeur dos, biceps intenses.",rest_after_exercise": 90, "reps_text": "MYO", "weight_text
        "workout_data": [
          { "type": "exercise", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique Lente)", "reps": 10, "weight":"Combo" },
          { "type": "break", "duration": 90, "name": "Repos après Myo-Reps" },
          { "type": "exercise", "name": "Pike Push-_text": "Élastique 15kg", "details": "Ancrage porte haut. Pause Iso 2-3s en contraction + Excentrique 3-4s sur chaque rep.", "equipment": "ups", "reps": 6, "weight": 0, "weight_unit": "Poids de corps", "details": "Pompes piquées, focus épaules.", "equipment": "Poids de corps, Tapis de solÉlastique 15kg, Accroche porte, Poignées, Tapis de sol", "reps_", "reps_start": 6, "reps_target_max": 12, "progstart": 10, "reps_target_max": 15, "progression_note":ression_note": "Quand 12 reps (RIR 1-2) maîtrisées, surélever les "Quand 15 reps (RIR 1-2) avec 15kg, passer au 25kg pieds progressivement." },
          { "type": "break", "duration": 75, "name": "Repos" (vers 8-10 reps). Puis 15+25kg." },
          { "type": "break", "duration": 75, "name": "Repos" },
          { "type": "exercise },
          { "type": "exercise", "name": "Pike Push-ups - Série 2", "reps": 6, "weight": 0, "weight_unit": "Poids de corps",", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique Lente) - Série "details": "Pompes piquées.", "equipment": "Poids de corps, Tapis de sol", " 2", "reps": 10, "weight_text": "Élastique 15kgreps_start": 6, "reps_target_max": 12, "progression_", "details": "Maintiens la technique.", "equipment": "Élastique 15kg, Accnote": "Vise la même difficulté." },
          { "type": "break", "duration": 7roche porte, Poignées, Tapis de sol", "reps_start": 10, "re5, "name": "Repos" },
          { "type": "exercise", "name": "Pikeps_target_max": 15, "progression_note": "Même résistance." },
           Push-ups - Série 3", "reps": 6, "weight": 0, "weight_{ "type": "break", "duration": 75, "name": "Repos" },
          {unit": "Poids de corps", "details": "Pompes piquées.", "equipment": "Poids de "type": "exercise", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique L corps, Tapis de sol", "reps_start": 6, "reps_target_max": 12, "progression_note": "Dernière série, donne tout !" },
          { "type": "ente) - Série 3", "reps": 10, "weight_text": "Élastique 15kg", "details": "Focus contraction.", "equipment": "Élastique 15kg, Accrobreak", "duration": 75, "name": "Repos" },
          { "type": "exerciseche porte, Poignées, Tapis de sol", "reps_start": 10, "reps", "name": "Élévations Latérales avec Haltères", "reps": 15, "weight_target_max": 15, "progression_note": "Squeeze !" },
          { "": 10, "weight_unit": "kg (2x5kg)", "details": "Focus brûlure ettype": "break", "duration": 75, "name": "Repos" },
          { "type contrôle strict.", "equipment": "Haltères 5kg", "reps_start": 15,": "exercise", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique "reps_target_max": 30, "progression_note": "Quand 25 reps Lente) - Série 4", "reps": 10, "weight_text": "Élastique 1 (RIR 0-1) faciles, ralentir l'excentrique (3-4s), ajouter pause en haut5kg", "details": "Dernière série, qualité maximale.", "equipment": "Élastique 15kg, Accroche porte, Poignées, Tapis de sol", "reps_start": 1 (1-2s), ou viser 30 reps." },
          { "type": "break", "duration": 0, "reps_target_max": 15, "progression_note": "Finis en60, "name": "Repos" },
          { "type": "exercise", "name": "Élévations Latérales avec Haltères - Série 2", "reps": 15, "weight beauté." },
          { "type": "break", "duration": 75, "name": "Repos" },
          { "type": "exercise_myo_reps_unilateral", "name": "": 10, "weight_unit": "kg (2x5kg)", "details": "Contrôle strict.",Band Bent-Over Row Unilatéral - MYO-REPS", "sets_info": "1 Série d "equipment": "Haltères 5kg", "reps_start": 15, "reps'Activation + 3-4 Mini-Séries (par côté)", "activation_reps_start": _target_max": 30, "progression_note": "Maintiens la qualité." },
          { "10, "activation_reps_target_max": 15, "mini_sets_count": "3-type": "break", "duration": 60, "name": "Repos" },
          { "type4", "mini_reps_start": 3, "mini_reps_target_max": ": "exercise", "name": "Élévations Latérales avec Haltères - Série 3", "reps":5, "reps_unit": "par côté", "weight_text": "Élastique 15 15, "weight": 10, "weight_unit": "kg (2x5kg)",kg", "details": "Focus épaisseur du dos, un bras à la fois.", "equipment": "Élastique "details": "Contrôle strict.", "equipment": "Haltères 5kg", "reps_ 15kg, Poignées", "progression_note": "Activ: Quand 15 reps (RIR start": 15, "reps_target_max": 30, "progression_note":1) avec 15kg, passer 25kg. Puis 15+25kg. Mini-S "Vise la brûlure." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type": "exercise", "name": "Élévéries: Viser 4 mini-séries ou plus de reps.", "rest_between_mini_sets": 15ations Latérales avec Haltères (Optionnel 4ème série)", "reps": 15, ", "rest_after_exercise": 75, "reps_text": "MYO Uni", "weight_weight": 10, "weight_unit": "kg (2x5kg)", "details": "Sitext":"Élastique 15kg" },
          { "type": "break", "duration":  énergie, pour plus de volume.", "equipment": "Haltères 5kg", "reps_start":75, "name": "Repos après Myo-Reps" },
          { "type": "exercise", " 15, "reps_target_max": 30, "progression_note": "Dname": "Band Face Pull", "reps": 15, "weight_text": "Élastiqueernière série, proche de l'échec." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type": "exercise", "name": " 15kg", "details": "Ancrage hauteur visage. Focus arrière d'épaules.", "equipment": "Élastique 15kg, Accroche porte, Poignées", "reps_startBand Pushdowns", "reps": 12, "weight_text": "Élastique 15": 15, "reps_target_max": 25, "progression_note": "kg", "details": "Ancrage porte haut. Focus triceps.", "equipment": "Élastique Quand 25 reps (RIR 1-2) avec 15kg, tester 25kg15kg, Accroche porte, Poignées", "reps_start": 12, "re (vers 12-15 reps). Qualité." },
          { "type": "break", "ps_target_max": 20, "progression_note": "Quand 20 reps (Rduration": 60, "name": "Repos" },
          { "type": "exercise", "nameIR 0-1) avec 15kg, passer au 25kg (recommencer vers 10-12 reps). Puis combiner 15+25kg. Option Drop Set." },
          { "": "Band Face Pull - Série 2", "reps": 15, "weight_text": "Élastique 15kg", "details": "Contrôle le mouvement.", "equipment": "Élastique 1type": "break", "duration": 60, "name": "Repos" },
          { "type5kg, Accroche porte, Poignées", "reps_start": 15, "reps": "exercise", "name": "Band Pushdowns - Série 2", "reps": 12,_target_max": 25, "progression_note": "Maintiens la forme." },
           "weight_text": "Élastique 15kg", "details": "Garde la tension.", "equipment": "{ "type": "break", "duration": 60, "name": "Repos" },
          {Élastique 15kg, Accroche porte, Poignées", "reps_start": 1 "type": "exercise", "name": "Band Face Pull - Série 3", "reps": 15, "2, "reps_target_max": 20, "progression_note": "Même résistanceweight_text": "Élastique 15kg", "details": "Sensation dans l'arrière d." },
          { "type": "break", "duration": 60, "name": "Repos"'épaule.", "equipment": "Élastique 15kg, Accroche porte, Poignées", },
          { "type": "exercise", "name": "Band Pushdowns - Série 3", "re "reps_start": 15, "reps_target_max": 25, "progps": 12, "weight_text": "Élastique 15kg", "details": "ression_note": "Focus contraction." },
          { "type": "break", "duration": 60Contraction maximale.", "equipment": "Élastique 15kg, Accroche porte, Poignées",, "name": "Repos" },
          { "type": "exercise", "name": "Band Face Pull "reps_start": 12, "reps_target_max": 20, "prog - Série 4", "reps": 15, "weight_text": "Élastique 1ression_note": "Finis fort !" }
        ]
      },
      Pull: {
        "5kg", "details": "Dernière série, application maximale.", "equipment": "Élastique 1routine_name": "PULL V5.2 - Hypertrophie Élite (Format App)",
        5kg, Accroche porte, Poignées", "reps_start": 15, "reps"description": "Séance PULL optimisée. Priorité largeur dos, biceps intenses.",
        "workout_target_max": 25, "progression_note": "Proche de l'échec."_data": [
          { "type": "exercise", "name": "Band Kneeling Lat Pulldown (Avec },
          { "type": "break", "duration": 60, "name": "Repos" }, Pauses Iso & Excentrique Lente)", "reps": 10, "weight_text": "
          { "type": "exercise_myo_reps_unilateral_in_superset", "Élastique 15kg", "details": "Ancrage porte haut. Pause Iso 2-3name": "Curls Marteau avec Haltères (Myo-Reps - Superset Mécanique 1/2)", "sets_info": "Partie 1/2 du Superset - Total 3 Supersets. 1s en contraction + Excentrique 3-4s sur chaque rep.", "equipment": "Élastique 1 Série d'Activation + 2-3 Mini-Séries (par bras)", "activation_reps_start": 15kg, Accroche porte, Poignées, Tapis de sol", "reps_start": 10, "reps_target_max": 15, "progression_note": "Quand 10, "activation_reps_target_max": 15, "mini_sets_count": "5 reps (RIR 1-2) avec 15kg, passer au 25kg (vers2-3", "mini_reps_start": 3, "mini_reps_target_max 8-10 reps). Puis 15+25kg." },
          { "type": "": 5, "reps_unit": "par bras", "weight": 5, "weight_unitbreak", "duration": 75, "name": "Repos" },
          { "type": "exercise": "kg (par haltère)", "details": "Focus brachial et brachio-radial.", "equipment": "Halt", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique Lente) - Sérieères 5kg", "progression_note": "Activ: Augmenter reps. Mini-Séries: Augmenter 2", "reps": 10, "weight_text": "Élastique 15kg reps/nb de mini-séries.", "rest_between_mini_sets": 10, "reps_text", "details": "Maintiens la technique.", "equipment": "Élastique 15kg, Acc": "MYO Uni", "weight_text":"5kg" },
          { "type": "break",roche porte, Poignées, Tapis de sol", "reps_start": 10, "reps_target_max": 15, "progression_note": "Même résistance." },
           "duration": 15, "name": "Transition Superset Biceps (15s)" },
          { "type": "break", "duration": 75, "name": "Repos" },
          {{ "type": "exercise_unilateral_in_superset", "name": "Concentration Curl avec UN "type": "exercise", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique L Haltère (Superset Mécanique 2/2)", "sets_info": "Partie 2/2 du Supente) - Série 3", "reps": 10, "weight_text": "Élastique 1erset - Total 3 Supersets", "reps_text": "AMRAP", "reps_unit": "par bras", "weight": 5, "weight_unit": "kg", "details": "Focus pic du biceps.",5kg", "details": "Focus contraction.", "equipment": "Élastique 15kg, Accro "equipment": "Haltère 5kg, Tapis de sol", "progression_note": "Cherche porte, Poignées, Tapis de sol", "reps_start": 10, "reps_target_max": 15, "progression_note": "Squeeze !" },
          { "cher à augmenter le nombre de reps propres." },
          { "type": "break", "duration": 75, "name": "Repos après Superset Biceps" },
          { "type": "exercise_myo_retype": "break", "duration": 75, "name": "Repos" },
          { "typeps_unilateral_in_superset", "name": "Curls Marteau avec Haltères (Myo": "exercise", "name": "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique-Reps - Superset Mécanique 1/2) - Série 2", "sets_info": Lente) - Série 4", "reps": 10, "weight_text": "Élastique 15kg", "details": "Dernière série, qualité maximale.", "equipment": "Élastique 1 "Partie 1/2 du Superset. 1 Act. + 2-3 Mini (par bras)", "activation5kg, Accroche porte, Poignées, Tapis de sol", "reps_start": 1_reps_start": 10, "mini_reps_start": 3, "reps_unit":0, "reps_target_max": 15, "progression_note": "Finis en "par bras", "weight": 5, "weight_unit": "kg", "details": "Maint beauté." },
          { "type": "break", "duration": 75, "name": "Reposiens l'effort.", "equipment": "Haltères 5kg", "progression_note": "Vise la" },
          { "type": "exercise_myo_reps_unilateral", "name": " même intensité.", "rest_between_mini_sets": 10, "reps_text": "Band Bent-Over Row Unilatéral - MYO-REPS", "sets_info": "1 Série dMYO Uni", "weight_text":"5kg" },
          { "type": "break", "duration": 15, "name": "Transition Superset Biceps (15s)" },
          { "'Activation + 3-4 Mini-Séries (par côté)", "activation_reps_start": 10, "activation_reps_target_max": 15, "mini_sets_count": "3-type": "exercise_unilateral_in_superset", "name": "Concentration Curl avec UN Haltère (Sup4", "mini_reps_start": 3, "mini_reps_target_max": erset Mécanique 2/2) - Série 2", "sets_info": "Partie 25, "reps_unit": "par côté", "weight_text": "Élastique 15/2 du Superset.", "reps_text": "AMRAP", "reps_unit": "par bras", "weight": 5, "weight_unit": "kg", "details": "Continue de pousser.",kg", "details": "Focus épaisseur du dos, un bras à la fois.", "equipment": "Élast "equipment": "Haltère 5kg", "progression_note": "Augmente les reps si possible." },
ique 15kg, Poignées", "progression_note": "Activ: Quand 15 reps (RIR           { "type": "break", "duration": 75, "name": "Repos après Superset B1) avec 15kg, passer 25kg. Puis 15+25kg. Mini-Sériesiceps" },
          { "type": "exercise_myo_reps_unilateral_in_sup: Viser 4 mini-séries ou plus de reps.", "rest_between_mini_sets": 15,erset", "name": "Curls Marteau avec Haltères (Myo-Reps - Superset Mécanique 1 "rest_after_exercise": 75, "reps_text": "MYO Uni", "weight_text":"Élastique 15kg" },
          { "type": "break", "duration":/2) - Série 3", "sets_info": "Partie 1/2 du Superset. 75, "name": "Repos après Myo-Reps" },
          { "type": "exercise", " 1 Act. + 2-3 Mini (par bras)", "activation_reps_start": 10, "mini_reps_start": 3, "reps_unit": "par bras", "weight": name": "Band Face Pull", "reps": 15, "weight_text": "Élastique5, "weight_unit": "kg", "details": "Dernier superset, à fond !", "equipment": 15kg", "details": "Ancrage hauteur visage. Focus arrière d'épaules.", "equipment": "Élastique 15kg, Accroche porte, Poignées", "reps_start "Haltères 5kg", "progression_note": "Donne tout !", "rest_between_mini_sets": 15, "reps_target_max": 25, "progression_note": "": 10, "reps_text": "MYO Uni", "weight_text":"5kg" },
          { "type": "break", "duration": 15, "name": "Transition SupersetQuand 25 reps (RIR 1-2) avec 15kg, tester 25kg Biceps (15s)" },
          { "type": "exercise_unilateral_in_superset (vers 12-15 reps). Qualité." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type": "exercise", "name": "", "name": "Concentration Curl avec UN Haltère (Superset Mécanique 2/2) - SérieBand Face Pull - Série 2", "reps": 15, "weight_text": "Élast 3", "sets_info": "Partie 2/2 du Superset.", "reps_textique 15kg", "details": "Contrôle le mouvement.", "equipment": "Élastique 15kg": "AMRAP", "reps_unit": "par bras", "weight": 5, "weight_unit": "kg", "details": "Échec musculaire !", "equipment": "Haltère 5kg", "progression, Accroche porte, Poignées", "reps_start": 15, "reps_target_max": 25, "progression_note": "Maintiens la forme." },
          {_note": "Vide le chargeur !" },
          { "type": "break", "duration": 7 "type": "break", "duration": 60, "name": "Repos" },
          { "5, "name": "Repos après Superset Biceps" },
          { "type": "exercise", "type": "exercise", "name": "Band Face Pull - Série 3", "reps": 15name": "Band Scapular Retractions (Optionnel)", "reps": 15, "weight_, "weight_text": "Élastique 15kg", "details": "Sensation dans l'text": "Élastique 15kg", "details": "Focus contraction omoplates.", "equipment": "Élastique 15kg", "reps_start": 15, "reps_targetarrière d'épaule.", "equipment": "Élastique 15kg, Accroche porte, Poignées", "reps_start": 15, "reps_target_max": 25,_max": 20, "progression_note": "Qualité du mouvement." },
          { "type": " "progression_note": "Focus contraction." },
          { "type": "break", "duration": break", "duration": 45, "name": "Repos" },
          { "type": "exercise60, "name": "Repos" },
          { "type": "exercise", "name": "Band", "name": "Band Scapular Retractions (Optionnel) - Série 2", "reps": Face Pull - Série 4", "reps": 15, "weight_text": "Élastique 15, "weight_text": "Élastique 15kg", "details": "Contrôle.", " 15kg", "details": "Dernière série, application maximale.", "equipment": "Élastique 15equipment": "Élastique 15kg", "reps_start": 15, "reps_target_max": 20, "progression_note": "Maintiens." },
          {kg, Accroche porte, Poignées", "reps_start": 15, "reps_ "type": "break", "duration": 45, "name": "Repos (Fin si 2 sériestarget_max": 25, "progression_note": "Proche de l'échec." },
          {)" },
          { "type": "exercise", "name": "Band Scapular Retractions (Optionnel "type": "break", "duration": 60, "name": "Repos" },
          { ") - Série 3", "reps": 15, "weight_text": "Élastique type": "exercise_myo_reps_unilateral_in_superset", "name": "Curls Marteau avec Haltères (Myo-Reps - Superset Mécanique 1/2)", "15kg", "details": "Si 3ème série.", "equipment": "Élastique 15kg", "reps_start": 15, "reps_target_max": 20, "progsets_info": "Partie 1/2 du Superset - Total 3 Supersets. 1 Série d'Activationression_note": "Finisher." }
        ]
      },
      Legs: {
        " + 2-3 Mini-Séries (par bras)", "activation_reps_start": 10, "activation_reps_target_max": 15, "mini_sets_count": "2-3",routine_name": "LEGS & ABDOS V1.7 - Hypertrophie Élite (Format App)",
        "description": "Séance Jambes & Abdos. Priorité Abdos puis Quadriceps.",
        " "mini_reps_start": 3, "mini_reps_target_max": 5,workout_data": [
          { "type": "exercise", "name": "Front Squat Combo (Avec "reps_unit": "par bras", "weight": 5, "weight_unit": "kg ( Pause en Bas 2-3s)", "reps": 10, "weight_text": "Épar haltère)", "details": "Focus brachial et brachio-radial.", "equipment": "Haltères lastique 15+25kg + 1 haltère 5kg", "details": "Pause en position5kg", "progression_note": "Activ: Augmenter reps. Mini-Séries: Augmenter reps/ basse. Focus quads et fessiers.", "equipment": "Élastique 15kg/25nb de mini-séries.", "rest_between_mini_sets": 10, "reps_kg, Haltère 5kg, Tapis de sol", "reps_start": 10, "reps_target_max": 15, "progression_note": "Quand 15 reps (text": "MYO Uni", "weight_text":"5kg" },
          { "type": "break", "duration": 15, "name": "Transition Superset Biceps (15s)" },
          { "type": "exercise_unilateral_in_superset", "name": "Concentration Curl avecRIR 1-2) faciles, rendre la pause plus difficile (plus bas/longue) ou augmenter tension élastique." },
          { "type": "break", "duration": 105, "name": UN Haltère (Superset Mécanique 2/2)", "sets_info": "Partie 2 "Repos (90-120s)" },
          { "type": "exercise", "name":/2 du Superset - Total 3 Supersets", "reps_text": "AMRAP", "re "Front Squat Combo (Avec Pause en Bas 2-3s) - Série 2", "repsps_unit": "par bras", "weight": 5, "weight_unit": "kg", "details": 10, "weight_text": "Élastique 15+25kg + 1": "Focus pic du biceps.", "equipment": "Haltère 5kg, Tapis de sol", "progression_ haltère 5kg", "details": "Maintiens la forme.", "equipment": "Élastique 15kgnote": "Chercher à augmenter le nombre de reps propres." },
          { "type": "break", "duration": 75, "name": "Repos après Superset Biceps" },
          { "type":/25kg, Haltère 5kg, Tapis de sol", "reps_start": 10, "reps_target_max": 15, "progression_note": "Qualité." "exercise_myo_reps_unilateral_in_superset", "name": "Curls Marteau avec Haltères (Myo-Reps - Superset Mécanique 1/2) - Série 2", " },
          { "type": "break", "duration": 105, "name": "Repos (90-120s)" },
          { "type": "exercise", "name": "Front Squsets_info": "Partie 1/2 du Superset. 1 Act. + 2-3 Mini (par bras)", "activation_reps_start": 10, "mini_reps_start": 3at Combo (Avec Pause en Bas 2-3s) - Série 3", "reps": 1, "reps_unit": "par bras", "weight": 5, "weight_unit": "kg", "details0, "weight_text": "Élastique 15+25kg + 1 haltère 5kg", "details": "Pousse fort.", "equipment": "Élastique 15kg/25kg,": "Maintiens l'effort.", "equipment": "Haltères 5kg", "progression_note": Haltère 5kg, Tapis de sol", "reps_start": 10, "reps "Vise la même intensité.", "rest_between_mini_sets": 10, "reps_target_max": 15, "progression_note": "Intensité." },
          { "type": "break", "duration": 105, "name": "Repos (90-1_text": "MYO Uni", "weight_text":"5kg" },
          { "type": "break", "duration": 15, "name": "Transition Superset Biceps (15s)" },20s)" },
          { "type": "exercise", "name": "Front Squat Combo (Avec
          { "type": "exercise_unilateral_in_superset", "name": "Concentration Curl Pause en Bas 2-3s) - Série 4", "reps": 10, "weight_text": "Élastique 15+25kg + 1 haltère 5kg", "details": " avec UN Haltère (Superset Mécanique 2/2) - Série 2", "sets_info": "Partie 2/2 du Superset.", "reps_text": "AMRAP", "reps_unit":Dernière série jambes lourdes !", "equipment": "Élastique 15kg/25kg, "par bras", "weight": 5, "weight_unit": "kg", "details": "Continue de pousser.", " Haltère 5kg, Tapis de sol", "reps_start": 10, "reps_target_equipment": "Haltère 5kg", "progression_note": "Augmente les reps si possible."max": 15, "progression_note": "Finis solide." },
          { "type": },
          { "type": "break", "duration": 75, "name": "Repos après Sup "break", "duration": 105, "name": "Repos (90-120serset Biceps" },
          { "type": "exercise_myo_reps_unilateral_in_superset)" },
          { "type": "exercise", "name": "Fentes Arrières Alternées (Avec Haltères et Excentrique Lente 3-4s)", "reps": 8, "reps_unit": "", "name": "Curls Marteau avec Haltères (Myo-Reps - Superset Mécanique 1par jambe", "weight": 10, "weight_unit": "kg (2x5kg)",/2) - Série 3", "sets_info": "Partie 1/2 du Superset. 1 Act. + 2-3 Mini (par bras)", "activation_reps_start": 1 "details": "Descente contrôlée. Focus quads et fessiers.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 8, "reps_target_max": 0, "mini_reps_start": 3, "reps_unit": "par bras", "weight": 12, "progression_note": "Quand 12 reps (RIR 1-2) faciles, ralent5, "weight_unit": "kg", "details": "Dernier superset, à fond !", "equipment": "Haltères 5kg", "progression_note": "Donne tout !", "rest_between_mini_setsir excentrique (4-5s) ou envisager ajout élastique 15kg." },
          { "type": "break", "duration": 90, "name": "Repos" },
          { "type":": 10, "reps_text": "MYO Uni", "weight_text":"5kg" "exercise", "name": "Fentes Arrières Alternées (Avec Haltères et Excentrique Lente  },
          { "type": "break", "duration": 15, "name": "Transition Superset Biceps (15s)" },
          { "type": "exercise_unilateral_in_superset3-4s) - Série 2", "reps": 8, "reps_unit": "", "name": "Concentration Curl avec UN Haltère (Superset Mécanique 2/2) - Sériepar jambe", "weight": 10, "weight_unit": "kg (2x5kg)", "details": "Stabilité et contrôle.", "equipment": "Haltères 5kg, Tapis de sol 3", "sets_info": "Partie 2/2 du Superset.", "reps_text", "reps_start": 8, "reps_target_max": 12, "prog": "AMRAP", "reps_unit": "par bras", "weight": 5, "weight_unit": "ression_note": "Maintiens la technique." },
          { "type": "break", "duration":kg", "details": "Échec musculaire !", "equipment": "Haltère 5kg", "progression_ 90, "name": "Repos" },
          { "type": "exercise", "name": "note": "Vide le chargeur !" },
          { "type": "break", "duration": 75,Fentes Arrières Alternées (Avec Haltères et Excentrique Lente 3-4s) - Série 3 "name": "Repos après Superset Biceps" },
          { "type": "exercise", "name":", "reps": 8, "reps_unit": "par jambe", "weight": 10, " "Band Scapular Retractions (Optionnel)", "reps": 15, "weight_text":weight_unit": "kg (2x5kg)", "details": "Dernière série, focus sur chaque jambe "Élastique 15kg", "details": "Focus contraction omoplates.", "equipment": "Élastique 15kg", "reps_start": 15, "reps_target_max.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 8, "reps_target_max": 12, "progression_note": "Bonne ex": 20, "progression_note": "Qualité du mouvement." },
          { "type":centrique !" },
          { "type": "break", "duration": 90, "name": " "break", "duration": 45, "name": "Repos" },
          { "type": "exercise", "name": "Band Scapular Retractions (Optionnel) - Série 2", "repsRepos" },
          { "type": "exercise", "name": "Reverse Nordic Curls (Focus Négative LENTE)", "reps_text": "5 Négatives", "details": "Si reps complètes, contrôler remontée.": 15, "weight_text": "Élastique 15kg", "details": "Contrôle.", "equipment": "Élastique 15kg", "reps_start": 15 Sinon, focus négative lente.", "equipment": "Support pieds/chevilles (si besoin), Tapis de sol", ", "reps_target_max": 20, "progression_note": "Maintiens."reps_start_text": "5 Nég.", "reps_target_max_text": "8 },
          { "type": "break", "duration": 45, "name": "Repos (Fin si 2 séries)" },
          { "type": "exercise", "name": "Band Scapular Ret Nég. / 8-10 reps complètes", "progression_note": "Quand 8 négatives très contrôlées, augmenter temps négative ou initier remontée. Si reps complètes : viser 8-10 reps,ractions (Optionnel) - Série 3", "reps": 15, "weight_text": "Élastique 15kg", "details": "Si 3ème série.", "equipment": "Élast puis augmenter." },
          { "type": "break", "duration": 75, "name": "ique 15kg", "reps_start": 15, "reps_target_max":Repos" },
          { "type": "exercise", "name": "Reverse Nordic Curls (Focus Nég 20, "progression_note": "Finisher." }
        ]
      },
      Legative LENTE) - Série 2", "reps_text": "5 Négatives", "details": "Contrôle maximal de la descente.", "equipment": "Support pieds/chevilles, Tapis", "repss: {
        "routine_name": "LEGS & ABDOS V1.7 - Hypertrophie Élite (Format App)",
        "description": "Séance Jambes & Abdos. Priorité Abd_start_text": "5 Nég.", "reps_target_max_text": "8 Nég. / os puis Quadriceps.",
        "workout_data": [
          { "type": "exercise", "name": "Front8-10 reps complètes", "progression_note": "Qualité avant tout." },
          { Squat Combo (Avec Pause en Bas 2-3s)", "reps": 10, "weight "type": "break", "duration": 75, "name": "Repos (Fin si 2 séries_text": "Élastique 15+25kg + 1 haltère 5kg", ")" },
          { "type": "exercise", "name": "Reverse Nordic Curls (Focus Négativedetails": "Pause en position basse. Focus quads et fessiers.", "equipment": "Élastique  LENTE) - Série 3", "reps_text": "5 Négatives", "details": "Si 15kg/25kg, Haltère 5kg, Tapis de sol", "reps_start": 13ème série, maintiens l'intensité.", "equipment": "Support pieds/chevilles, Tapis",0, "reps_target_max": 15, "progression_note": "Quand 1 "reps_start_text": "5 Nég.", "reps_target_max_text": "8 Nég. / 8-10 reps complètes", "progression_note": "Dernière5 reps (RIR 1-2) faciles, rendre la pause plus difficile (plus bas/longue) ou augmenter chance pour les quads !" },
          { "type": "break", "duration": 75, " tension élastique." },
          { "type": "break", "duration": 105, "name": "Repos (90-120s)" },
          { "type": "exercise", "name": "name": "Repos" },
          { "type": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET)", "reps": 15, "weight_text": "ÉFront Squat Combo (Avec Pause en Bas 2-3s) - Série 2", "reps":lastique 15+25kg + 2x5kg haltères", "details": "2s montée,  10, "weight_text": "Élastique 15+25kg + 1 halt2s pause contraction, 3s descente, 1s pause étirement.", "equipment": "Élastique 1ère 5kg", "details": "Maintiens la forme.", "equipment": "Élastique 15kg/25kg, Haltères 5kg, Support", "reps_start": 155kg/25kg, Haltère 5kg, Tapis de sol", "reps_start":, "reps_target_max": 25, "progression_note": "Quand 25 10, "reps_target_max": 15, "progression_note": "Qualité." },
          { "type": "break", "duration": 105, "name": " reps (RIR 0-1) faciles, augmenter temps pauses ou ralentir mouvement." },
          { "Repos (90-120s)" },
          { "type": "exercise", "name": "type": "break", "duration": 60, "name": "Repos" },
          { "typeFront Squat Combo (Avec Pause en Bas 2-3s) - Série 3", "reps":": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET) - Série 2", "reps": 15, "weight_text": "Élastique 15+25kg 10, "weight_text": "Élastique 15+25kg + 1 haltère 5kg", "details": "Pousse fort.", "equipment": "Élastique 15kg + 2x5kg haltères", "details": "Amplitude complète.", "equipment": "Élastique /25kg, Haltère 5kg, Tapis de sol", "reps_start": 115kg/25kg, Haltères 5kg, Support", "reps_start": 10, "reps_target_max": 15, "progression_note": "Intensité." },
          { "type": "break", "duration": 105, "name": "Repos5, "reps_target_max": 25, "progression_note": "Squeeze en haut, étire en bas." },
          { "type": "break", "duration": 60, "name": (90-120s)" },
          { "type": "exercise", "name": "Front "Repos" },
          { "type": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET) - Série 3", "reps": 15, "weight_text Squat Combo (Avec Pause en Bas 2-3s) - Série 4", "reps": 10, "weight_text": "Élastique 15+25kg + 1 haltère 5": "Élastique 15+25kg + 2x5kg haltères", "details":kg", "details": "Dernière série jambes lourdes !", "equipment": "Élastique 15kg/ "Dernière série mollets, brûlure !", "equipment": "Élastique 15kg/25kg, Haltère 5kg, Tapis de sol", "reps_start": 1025kg, Haltères 5kg, Support", "reps_start": 15, "reps_target_max": 25, "progression_note": "Va chercher l'échec.", "reps_target_max": 15, "progression_note": "Finis solide." },
          { "type": "break", "duration": 105, "name": "Repos ( },
          { "type": "break", "duration": 60, "name": "Repos avant Abd90-120s)" },
          { "type": "exercise", "name": "Fentesos" },
          { "type": "exercise", "name": "Crunch sur Swiss Ball avec Élastique 1 Arrières Alternées (Avec Haltères et Excentrique Lente 3-4s)", "reps": 5kg", "reps": 12, "weight_text": "Élastique 15kg8, "reps_unit": "par jambe", "weight": 10, "weight_unit", "details": "Ancré bas, tiré vers poitrine/visage. Focus haut/milieu ab": "kg (2x5kg)", "details": "Descente contrôlée. Focus quads et fessdos.", "equipment": "Swiss Ball, Élastique 15kg, Accroche porte (bas)", "reps_start": 12, "reps_target_max": 20, "progression_iers.", "equipment": "Haltères 5kg, Tapis de sol", "reps_start": 8, "reps_target_max": 12, "progression_note": "Quand note": "Quand 20 reps (RIR 0-1) faciles avec 15kg, augmenter12 reps (RIR 1-2) faciles, ralentir excentrique (4-5s) ou envis tension élastique ou passer au 25kg (vers 10-12 reps)." },
          {ager ajout élastique 15kg." },
          { "type": "break", "duration": 90, " "type": "break", "duration": 60, "name": "Repos" },
          { "name": "Repos" },
          { "type": "exercise", "name": "Fentes Arrières Alternées (Avec Haltères et Excentrique Lente 3-4s) - Série 2", "retype": "exercise", "name": "Crunch sur Swiss Ball avec Élastique 15kg - Série 2",ps": 8, "reps_unit": "par jambe", "weight": 10, " "reps": 12, "weight_text": "Élastique 15kg", "detailsweight_unit": "kg (2x5kg)", "details": "Stabilité et contrôle.", "equipment":": "Contraction maximale.", "equipment": "Swiss Ball, Élastique 15kg, Accroche porte", "Haltères 5kg, Tapis de sol", "reps_start": 8, "re "reps_start": 12, "reps_target_max": 20, "progps_target_max": 12, "progression_note": "Maintiens la technique." },ression_note": "Focus sur l'enroulement." },
          { "type": "break", "
          { "type": "break", "duration": 90, "name": "Repos" },
duration": 60, "name": "Repos" },
          { "type": "exercise", "name          { "type": "exercise", "name": "Fentes Arrières Alternées (Avec Haltères et Ex": "Crunch sur Swiss Ball avec Élastique 15kg - Série 3", "reps": 12, "weight_text": "Élastique 15kg", "details": "Dernière série, qualité.", "equipmentcentrique Lente 3-4s) - Série 3", "reps": 8, "reps": "Swiss Ball, Élastique 15kg, Accroche porte", "reps_start": 12_unit": "par jambe", "weight": 10, "weight_unit": "kg (2x5kg)", "details": "Dernière série, focus sur chaque jambe.", "equipment": "Haltères, "reps_target_max": 20, "progression_note": "Si 4ème 5kg, Tapis de sol", "reps_start": 8, "reps_target_ série : optionnelle pour plus de volume." },
          { "type": "break", "duration": 60, "name": "Repos (Fin si 3 séries)" },
          { "type": "exercise",max": 12, "progression_note": "Bonne excentrique !" },
          { " "name": "Reverse Crunches au Sol (Contrôle excentrique)", "reps": 1type": "break", "duration": 90, "name": "Repos" },
          { "type": "exercise", "name": "Reverse Nordic Curls (Focus Négative LENTE)", "reps_text":2, "details": "Focus bas des abdos. Contrôler la descente.", "equipment": "T "5 Négatives", "details": "Si reps complètes, contrôler remontée. Sinon, focus négative lenteapis de sol", "reps_start": 12, "reps_target_max": 20, "progression_note": "Quand 20 reps (RIR 0-1) genoux.", "equipment": "Support pieds/chevilles (si besoin), Tapis de sol", "reps_start_text": "5 Nég.", "reps_target_max_text": "8 Nég. / fléchis et bonne excentrique, progresser vers jambes plus tendues." },
          { "type": " 8-10 reps complètes", "progression_note": "Quand 8 négatives très contrôlées, augmenterbreak", "duration": 60, "name": "Repos" },
          { "type": "exercise", "name": "Reverse Crunches au Sol (Contrôle excentrique) - Série 2", temps négative ou initier remontée. Si reps complètes : viser 8-10 reps, puis augmenter." },
          { "type": "break", "duration": 75, "name": "Repos" },
 "reps": 12, "details": "Bascule bien le bassin.", "equipment": "Tapis de sol", "reps_start": 12, "reps_target_max": 2          { "type": "exercise", "name": "Reverse Nordic Curls (Focus Négative LENTE) - Série 0, "progression_note": "Excentrique lente." },
          { "type": "break",2", "reps_text": "5 Négatives", "details": "Contrôle maximal de la descente.", "duration": 60, "name": "Repos" },
          { "type": "exercise", " "equipment": "Support pieds/chevilles, Tapis", "reps_start_text": "5 Nég.", "reps_target_max_text": "8 Nég. / 8-10 repsname": "Reverse Crunches au Sol (Contrôle excentrique) - Série 3", "reps": 12, "details": "Dernière série, engage bien le bas.", "equipment": " complètes", "progression_note": "Qualité avant tout." },
          { "type": "break", "durationTapis de sol", "reps_start": 12, "reps_target_max": ": 75, "name": "Repos (Fin si 2 séries)" },
          { "type":20, "progression_note": "Qualité jusqu'au bout." },
          { "type": "break", "exercise", "name": "Reverse Nordic Curls (Focus Négative LENTE) - Série 3", "re "duration": 60, "name": "Repos" },
          { "type": "exercise", "ps_text": "5 Négatives", "details": "Si 3ème série, maintiens lname": "Planche sur Swiss Ball (Coudes sur le ballon)", "duration": 45, "unit'intensité.", "equipment": "Support pieds/chevilles, Tapis", "reps_start_text":": "secondes", "details": "Focus gainage profond, instabilité.", "equipment": "Swiss Ball, "5 Nég.", "reps_target_max_text": "8 Nég. / 8- Tapis de sol", "duration_start": 45, "duration_target_max": 75, "prog10 reps complètes", "progression_note": "Dernière chance pour les quads !" },
ression_note": "Quand 75s facile, ajouter des petits mouvements (cercles avec coudes) pour          { "type": "break", "duration": 75, "name": "Repos" },
           augmenter la difficulté." },
          { "type": "break", "duration": 60, "name":{ "type": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET "Repos" },
          { "type": "exercise", "name": "Planche sur Swiss Ball (C)", "reps": 15, "weight_text": "Élastique 15+25kg + 2x5kg haltères", "details": "2s montée, 2s pause contraction, 3soudes sur le ballon) - Série 2", "duration": 45, "unit": "secondes", "details": "Gaine fort !", "equipment": "Swiss Ball, Tapis de sol", "duration_start": 45, "duration_target_max": 75, "progression_note": "Ne descente, 1s pause étirement.", "equipment": "Élastique 15kg/25kg, Haltères 5kg, Support", "reps_start": 15, "reps_target_max": lâche rien." },
          { "type": "break", "duration": 60, "name": 25, "progression_note": "Quand 25 reps (RIR 0-1) "Repos (Fin si 2 séries)" },
          { "type": "exercise", "name": "Pl faciles, augmenter temps pauses ou ralentir mouvement." },
          { "type": "break", "duration": 6anche sur Swiss Ball (Coudes sur le ballon) - Série 3", "duration": 45, "unit": "secondes", "details": "Si 3ème série, tiens bon !", "equipment": "Swiss Ball,0, "name": "Repos" },
          { "type": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET) - Série 2", "reps": 15 Tapis de sol", "duration_start": 45, "duration_target_max": 75, "weight_text": "Élastique 15+25kg + 2x5kg haltères", ", "progression_note": "Dernier effort de gainage." }
        ]
      }
details": "Amplitude complète.", "equipment": "Élastique 15kg/25kg, Haltères    };

    const exerciseImageMapping = { /* ... Mapping identique ... */
        "Dumbbell Floor Flyes": 5kg, Support", "reps_start": 15, "reps_target_max": "https://ironworkout.github.io/armorworkout/superhero_dumbbell_floor_flyes.png 25, "progression_note": "Squeeze en haut, étire en bas." },
          {",
        "Pompes avec Pieds Surélevés": "https://ironworkout.github.io/armor "type": "break", "duration": 60, "name": "Repos" },
          { "workout/superhero_elevated_pushups_band.png",
        "Floor Press (Combo Haltères + Élastique) - MYO-REPS": "https://ironworkout.github.io/armorworkouttype": "exercise", "name": "Calf Raises (Sur marche/livre - TEMPO COMPLET) - Série 3", "reps": 15, "weight_text": "Élastique 15/superhero_floor_press_combo.png",
        "Pike Push-ups": "https://+25kg + 2x5kg haltères", "details": "Dernière série mollets, brûironworkout.github.io/armorworkout/superhero_pike_pushups.png",
        "Élure !", "equipment": "Élastique 15kg/25kg, Haltères 5kglévations Latérales avec Haltères": "https://ironworkout.github.io/armorworkout/superhero_lateral_raises.png",
        "Band Pushdowns": "https://ironworkout.github.io, Support", "reps_start": 15, "reps_target_max": 25/armorworkout/superhero_band_pushdowns.png",
        "Band Kneeling Lat Pulldown (Avec, "progression_note": "Va chercher l'échec." },
          { "type": "break", "duration": 60, "name": "Repos avant Abdos" },
          { "type": "exercise Pauses Iso & Excentrique Lente)": "https://ironworkout.github.io/armorworkout/", "name": "Crunch sur Swiss Ball avec Élastique 15kg", "reps": 12, "superhero_band_kneeling_lat_pulldown.png",
        "Band Bent-Over Row Unilatéral - MYO-REPS": "https://ironworkout.github.io/armorworkout/superhero_bandweight_text": "Élastique 15kg", "details": "Ancré bas, tiré_bent_over_row_unilateral.png",
        "Band Face Pull": "https://ironworkout vers poitrine/visage. Focus haut/milieu abdos.", "equipment": "Swiss Ball, Élastique 15.github.io/armorworkout/superhero_band_face_pull.png",
        "Curlskg, Accroche porte (bas)", "reps_start": 12, "reps_target_max": Marteau avec Haltères": "https://ironworkout.github.io/armorworkout/superhero_hammer_curls 20, "progression_note": "Quand 20 reps (RIR 0-1) faciles.png",
        "Concentration Curl avec UN Haltère": "https://ironworkout.github.io/armorworkout/ avec 15kg, augmenter tension élastique ou passer au 25kg (vers 10-12 repssuperhero_concentration_curl.png",
        "Band Scapular Retractions": "https://ironworkout)." },
          { "type": "break", "duration": 60, "name": "Repos".github.io/armorworkout/superhero_band_scapular_retractions.png",
         },
          { "type": "exercise", "name": "Crunch sur Swiss Ball avec Élastique 15kg -"Front Squat Combo (Avec Pause en Bas 2-3s)": "https://ironworkout.github.io/ Série 2", "reps": 12, "weight_text": "Élastique 15armorworkout/superhero_front_squat_combo.png",
        "Fentes Arrières Alternées (Avec Haltkg", "details": "Contraction maximale.", "equipment": "Swiss Ball, Élastique 15kg, Accroères et Excentrique Lente 3-4s)": "https://ironworkout.github.io/che porte", "reps_start": 12, "reps_target_max": 20armorworkout/superhero_rear_lunges_dumbbells.png",
        "Reverse Nordic Curls (, "progression_note": "Focus sur l'enroulement." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type": "exerciseFocus Négative LENTE)": "https://ironworkout.github.io/armorworkout/superhero_reverse_nordic_curls.png",
        "Calf Raises (Sur marche/livre - TEMPO COMPLET)":", "name": "Crunch sur Swiss Ball avec Élastique 15kg - Série 3", "reps": 12, "weight_text": "Élastique 15kg", "details": "Dernière série, "https://ironworkout.github.io/armorworkout/superhero_calf_raises_combo.png",
        "Crunch sur Swiss Ball avec Élastique 15kg": "https://ironworkout.github. qualité.", "equipment": "Swiss Ball, Élastique 15kg, Accroche porte", "reps_startio/armorworkout/superhero_swiss_ball_crunch_band.png",
        "Reverse Crun": 12, "reps_target_max": 20, "progression_note": "ches au Sol (Contrôle excentrique)": "https://ironworkout.github.io/armorworkout/superhero_reverse_crunches.png",
        "Planche sur Swiss Ball (CoudesSi 4ème série : optionnelle pour plus de volume." },
          { "type": "break", "duration": 60, "name": "Repos (Fin si 3 séries)" },
          { "type sur le ballon)": "https://ironworkout.github.io/armorworkout/superhero_swiss_ball": "exercise", "name": "Reverse Crunches au Sol (Contrôle excentrique)", "re_plank.png",
    };

    // --- Références DOM (exerciseImageContainer ajouté) ---
ps": 12, "details": "Focus bas des abdos. Contrôler la descente.", "    let timeDisplayDiv, timerStateDisplay, currentExerciseContainer, progressTracker, startPauseBtn, skipBtn,equipment": "Tapis de sol", "reps_start": 12, "reps_target_ finishBtn, resetBtn, navButtons = [], navHistoryBtn, navProgressBtn, signInButton, /* signOutButton, exportmax": 20, "progression_note": "Quand 20 reps (RIR 0-Button, */ driveStatusElement, postWorkoutSummary, summaryTitle, summaryItemsList, finishSummaryBtn, historyDrive1) genoux fléchis et bonne excentrique, progresser vers jambes plus tendues." },
          {Status, currentExerciseNameDisplay, driveConnectionStatusMain, driveConnectionText, timerDisplayElement, chartPlaceholder, progress "type": "break", "duration": 60, "name": "Repos" },
          { "TextArea, historyActionsContainer, exerciseSelect, metricSelect, periodSelect, exerciseChartPlaceholder, repAdjustmentOverlay, reptype": "exercise", "name": "Reverse Crunches au Sol (Contrôle excentrique) -AdjustMinusBtn, repAdjustPlusBtn, currentRepsDisplay, repAdjustmentExerciseName, historyChartCanvasEl, Série 2", "reps": 12, "details": "Bascule bien le bassin.", " exerciseProgressChartCanvasEl, prevBtn, settingsIcon, driveStatusTextElement, messageArea, workoutSection, historyequipment": "Tapis de sol", "reps_start": 12, "reps_target_Section, progressSection, statsDisplay, statsContentWrapper, historyFilterBtns, reactorElement, exerciseImageContainer, exercisemax": 20, "progression_note": "Excentrique lente." },
          { "type": "break", "duration": 60, "name": "Repos" },
          { "type":ImageDisplay;

    // --- Variables d'État ---
    let currentWorkoutType = null, currentWorkoutPlan "exercise", "name": "Reverse Crunches au Sol (Contrôle excentrique) - Série  = [], originalCompletedWorkoutPlan = [];
    let currentItemIndex = 0, timerInterval = null, prepare3", "reps": 12, "details": "Dernière série, engage bien le bas.", "equipment":CountdownInterval = null;
    let totalTime = 0, timeLeft = 0, prepareTimeLeft = 0;
    let isTimerRunning = false, isWorkoutActive = false, workoutFinished = false, wasFinished "Tapis de sol", "reps_start": 12, "reps_target_max": 20, "progression_note": "Qualité jusqu'au bout." },
          { "typeState = false;
    let currentState = 'idle'; let previousState = 'idle'; // previousState pour la logique": "break", "duration": 60, "name": "Repos" },
          { "type": d'image en pause
    let workoutStartTime = null, workoutHistory = [];
    let currentHistoryPeriod = 'week';
    let historyChartInstance = null, exercisePerfChartInstance = null;
    let googleAccessToken = "exercise", "name": "Planche sur Swiss Ball (Coudes sur le ballon)", "duration": 45 null, tokenClient = null;
    let historyFileId = null, programFileIds = { Push: null, "unit": "secondes", "details": "Focus gainage profond, instabilité.", "equipment": "Swiss, Pull: null, Legs: null };
    let programsLoaded = false, loadedWorkouts = {};
     Ball, Tapis de sol", "duration_start": 45, "duration_target_max": let isSavingDriveData = false;
    let currentTheme = 'dark', messageTimeoutId = null;
75, "progression_note": "Quand 75s facile, ajouter des petits mouvements (cercles    let audioContext = null;
    let nextExerciseIndexForAdjustment = -1, currentRepAdjustment =  avec coudes) pour augmenter la difficulté." },
          { "type": "break", "duration": 60, isRepAdjustmentVisible = false;
    let gisCheckRetries = 0;
    let halfwayTimeoutId = null;
    let soundLaser, sound5, sound4, sound3, sound2, sound0, "name": "Repos" },
          { "type": "exercise", "name": "Planche sur Swiss Ball (Coudes sur le ballon) - Série 2", "duration": 45, "unit":1, soundWindows, soundET;
    let triangleSpinTimeoutId = null;

    // --- Fonctions "secondes", "details": "Gaine fort !", "equipment": "Swiss Ball, Tapis de sol", Utilitaires ---
    function normalizeExerciseName(name) { /* ... (Identique) ... */
        if (!name "duration_start": 45, "duration_target_max": 75, "progression_) return "";
        let baseName = name;
        baseName = baseName.replace(/ - Série \d+/note": "Ne lâche rien." },
          { "type": "break", "duration": 60, "name": "Repos (Fin si 2 séries)" },
          { "type": "exercise", "i, '');
        baseName = baseName.replace(/\s*\(Pré-Épuisement Superset \name": "Planche sur Swiss Ball (Coudes sur le ballon) - Série 3", "duration": 45d\/\d\)/i, '');
        baseName = baseName.replace(/\s*\(Superset Mécanique \d\/\d\)/i, '');
        baseName = baseName.replace(/\s, "unit": "secondes", "details": "Si 3ème série, tiens bon !", "equipment": "*\(Optionnel \d+ème série\)/i, '');
        baseName = baseName.replace(/\Swiss Ball, Tapis de sol", "duration_start": 45, "duration_target_max":s*\(Optionnel\)/i, '');
        if (baseName.startsWith("Curls Marteau avec 75, "progression_note": "Dernier effort de gainage." }
        ]
 Haltères (Myo-Reps")) { return "Curls Marteau avec Haltères"; }
        return baseName.      }
    };

    const exerciseImageMapping = { /* ... Mapping identique ... */
        "Dumbtrim();
    }
    function triggerTriangleSpin() { /* ... (Identique) ... */ }
    bell Floor Flyes": "https://ironworkout.github.io/armorworkout/superhero_dumbbell_floorfunction initSounds() { /* ... (Identique) ... */ }
    function playSound(audioElement) {_flyes.png",
        "Pompes avec Pieds Surélevés": "https://ironworkout. /* ... (Identique) ... */ }
    function initAudioContext() { /* ... (Identique) ...github.io/armorworkout/superhero_elevated_pushups_band.png",
        "Floor */ }
    const playTransitionSound = () => playSound(soundLaser);
    const vibrate = (pattern = [1 Press (Combo Haltères + Élastique) - MYO-REPS": "https://ironworkout.github.io/00]) => { /* ... (Identique) ... */ };

    // --- Google Identity Services (GIS) &armorworkout/superhero_floor_press_combo.png",
        "Pike Push-ups": " Drive API ---
    async function gisInitInternal() { /* ... (Identique) ... */
        if (https://ironworkout.github.io/armorworkout/superhero_pike_pushups.png",
        typeof google !== 'undefined' && google.accounts && google.accounts.oauth2) {
            try {
"Élévations Latérales avec Haltères": "https://ironworkout.github.io/armorworkout/super                tokenClient = google.accounts.oauth2.initTokenClient({ client_id: GOOGLE_CLIENT_hero_lateral_raises.png",
        "Band Pushdowns": "https://ironworkout.github.ioID, scope: GOOGLE_DRIVE_SCOPES, callback: tokenCallback, error_callback: handleToken/armorworkout/superhero_band_pushdowns.png",
        "Band Kneeling Lat Pulldown (Avec Pauses Iso & Excentrique Lente)": "https://ironworkout.github.io/armorworkout/Error, });
                if (tokenClient) { tokenClient.requestAccessToken({ prompt: '' }); }
                 if (signInButton) signInButton.disabled = false;
            } catch (error) { console.error("superhero_band_kneeling_lat_pulldown.png",
        "Band Bent-Over RowErreur GIS initTokenClient:", error); showMessage("Erreur initialisation services Google.", 5000 Unilatéral - MYO-REPS": "https://ironworkout.github.io/armorworkout/superhero, true); updateAuthUI(false); if(signInButton) signInButton.disabled = true; }
        _band_bent_over_row_unilateral.png",
        "Band Face Pull": "https://ironworkout.github.io/armorworkout/superhero_band_face_pull.png",
        "} else { console.error("API Google (GIS) non chargée lors de gisInitInternal."); if(signInButton) signInButtonCurls Marteau avec Haltères": "https://ironworkout.github.io/armorworkout/superhero_.disabled = true; }
    }
    function checkAndInitGis() { /* ... (Identiquehammer_curls.png",
        "Concentration Curl avec UN Haltère": "https://ironworkout.github.io) ... */ }
    function handleTokenError(error) { /* ... (Identique) ... */
        console.error("Erreur Google Token:", error); let userMessage = `Erreur Authentification Google: ${error.type ||/armorworkout/superhero_concentration_curl.png",
        "Band Scapular Retractions": " error.error || 'Inconnue'}`; if (error.type === 'popup_closed_by_userhttps://ironworkout.github.io/armorworkout/superhero_band_scapular_retractions.' || error.error === 'popup_closed_by_user') { userMessage = "Fenêtre de connexionpng",
        "Front Squat Combo (Avec Pause en Bas 2-3s)": "https://ironworkout.github.io/armorworkout/superhero_front_squat_combo.png",
        "Fentes Google fermée."; } else if (error.type === 'popup_failed_to_open') { userMessage = "Impossible d'ouvrir la fenêtre de connexion. Vérifiez les bloqueurs de popups."; } else if (error.type Arrières Alternées (Avec Haltères et Excentrique Lente 3-4s)": "https://ironworkout === 'USER_CANCELLED' || error.error === 'access_denied') { userMessage = "Accès aux données Drive refusé par l'utilisateur."; } let statusText = 'Erreur Auth'; if (drive.github.io/armorworkout/superhero_rear_lunges_dumbbells.png",
        "Reverse Nordic Curls (Focus Négative LENTE)": "https://ironworkout.github.io/armorworkout/superStatusElement) { driveStatusElement.className = 'error'; driveStatusElement.style.display = 'inline-flex'; }hero_reverse_nordic_curls.png",
        "Calf Raises (Sur marche/livre showMessage(userMessage, 7000, true); if (driveStatusTextElement) driveStatusTextElement - TEMPO COMPLET)": "https://ironworkout.github.io/armorworkout/superhero_calf_.textContent = statusText; updateAuthUI(false);
    }
    async function tokenCallback(tokenResponse) { /*raises_combo.png",
        "Crunch sur Swiss Ball avec Élastique 15kg": "https://ironworkout ... (Légère modification pour le message d'erreur des programmes) ... */
        if (driveStatusElement.github.io/armorworkout/superhero_swiss_ball_crunch_band.png",
        "Reverse Crunches au Sol (Contrôle excentrique)": "https://ironworkout.github.io) driveStatusElement.className = '';
        if (tokenResponse.error) {
            if (tokenResponse.error/armorworkout/superhero_reverse_crunches.png",
        "Planche sur Swiss Ball ( !== "popup_failed_to_open" && tokenResponse.error !== "popup_closed_by_user") { handleTokenError(tokenResponse); }
            else { updateAuthUI(false); } return;
        }Coudes sur le ballon)": "https://ironworkout.github.io/armorworkout/superhero_
        if (tokenResponse && tokenResponse.access_token) {
            googleAccessToken = tokenResponse.accessswiss_ball_plank.png",
    };

    // Références DOM et Variables d'état (inch_token;
            showMessage("Connecté ! Chargement des données...", 2500);
            ifangées par rapport à V3.7, sauf suppression signOut/exportButton des références)
    let timeDisplayDiv, (driveStatusElement) { driveStatusElement.classList.add('loading'); driveStatusElement.style.display = timerStateDisplay, currentExerciseContainer, progressTracker, startPauseBtn, skipBtn, finishBtn, resetBtn, 'inline-flex';}
            if(driveStatusTextElement) driveStatusTextElement.textContent = 'Chargement... navButtons = [], navHistoryBtn, navProgressBtn, signInButton, /* signOutButton, exportButton, */ drive';
            let historyLoaded = false; let programsSuccess = false;
            try {
                await loadHistoryStatusElement, postWorkoutSummary, summaryTitle, summaryItemsList, finishSummaryBtn, historyDriveStatus, currentExerciseNameDisplay, driveConnectionStatusMain, driveConnectionText, timerDisplayElement, chartPlaceholder, progressTextArea, historyActionsFromDrive(); historyLoaded = true;
                programsSuccess = await loadProgramsFromDrive(); // programsLoaded est mis à jour à l'intérieur
                if (programsLoaded) { // Utiliser la variable globale mise à jour
                    Container, exerciseSelect, metricSelect, periodSelect, exerciseChartPlaceholder, repAdjustmentOverlay, repAdjustMinusBtn,showMessage("Données prêtes.", 3000);
                    if (driveStatusElement) { driveStatusElement. repAdjustPlusBtn, currentRepsDisplay, repAdjustmentExerciseName, historyChartCanvasEl, exerciseProgressChartCanvasEl,classList.remove('loading', 'error'); driveStatusElement.classList.add('success');}
                    if( prevBtn, settingsIcon, driveStatusTextElement, messageArea, workoutSection, historySection, progressSection, statsDisplay, statsdriveStatusTextElement) driveStatusTextElement.textContent = 'Connecté';
                } else {
                    //ContentWrapper, historyFilterBtns, reactorElement, exerciseImageContainer, exerciseImageDisplay;
    let currentWorkoutType Le message d'erreur spécifique est déjà géré dans loadProgramsFromDrive
                    if (driveStatusElement) { driveStatus = null, currentWorkoutPlan = [], originalCompletedWorkoutPlan = [];
    let currentItemIndex = 0, timerInterval = null, prepareCountdownInterval = null;
    let totalTime = 0, timeLeft = 0Element.classList.remove('loading'); driveStatusElement.classList.add('error'); }
                    if(driveStatusTextElement) driveStatusTextElement.textContent = 'Erreur Progs';
                }
            } catch, prepareTimeLeft = 0;
    let isTimerRunning = false, isWorkoutActive = false, workoutFinished = false, wasFinishedState = false;
    let currentState = 'idle'; let previousState = 'idle (error) {
                console.error("Erreur majeure chargement données Drive:", error);
                showMessage("Erreur';
    let workoutStartTime = null, workoutHistory = [];
    let currentHistoryPeriod = 'week';
 majeure lors du chargement depuis Drive.", 6000, true);
                if (driveStatusElement) { driveStatusElement.classList.remove('loading', 'success'); driveStatusElement.classList.add('error'); }
    let historyChartInstance = null, exercisePerfChartInstance = null;
    let googleAccessToken = null, tokenClient = null;
    let historyFileId = null, programFileIds = { Push: null, Pull:                if(driveStatusTextElement) driveStatusTextElement.textContent = 'Erreur Données'; programsLoaded = null, Legs: null };
    let programsLoaded = false, loadedWorkouts = {};
    let isSaving false;
            } finally {
                updateAuthUI(true); // Mettre à jour l'UI quelDriveData = false;
    let currentTheme = 'dark', messageTimeoutId = null;
    let audioContext = null;
    let nextExerciseIndexForAdjustment = -1, currentRepAdjustment = 0, is que soit le résultat du chargement
                if (programsLoaded) { populateExerciseSelect(); displayHistory(currentHistoryPeriodRepAdjustmentVisible = false;
    let gisCheckRetries = 0;
    let halfwayTimeoutId =); displayExerciseProgress(); loadInProgressState(); }
            }
        } else { handleTokenError({ error: "Réponse null;
    let soundLaser, sound5, sound4, sound3, sound2, sound1, sound de token invalide ou vide" }); }
    }
    function handleAuthClick() { /* ... (Identique) ...Windows, soundET;
    let triangleSpinTimeoutId = null;

    // Fonctions Utilitaires (normalize */ }

    function updateAuthUI(isLoggedIn) { /* ... (Mise à jour pour liens nav) ... */
        const body = document.body; body.classList.toggle('logged-in', isLoggedIn); body.classList.ExerciseName, triggerTriangleSpin, sons, vibrations - inchangées)
    function normalizeExerciseName(name)toggle('logged-out', !isLoggedIn);
        if (driveStatusElement) { driveStatusElement.style.display = isLoggedIn ? 'inline-flex' : 'none'; if (!isLoggedIn) driveStatusElement.className = ''; else { if (!driveStatusElement.classList.contains('loading') && !driveStatusElement.classList. { if (!name) return ""; let baseName = name; baseName = baseName.replace(/ - Série \d+/contains('error')) driveStatusElement.classList.add('success'); } }
        if (driveConnectionStatusMaini, ''); baseName = baseName.replace(/\s*\(Pré-Épuisement Superset \d\ && driveConnectionText) { driveConnectionStatusMain.style.display = isLoggedIn ? 'inline-flex' : 'none'; const/\d\)/i, ''); baseName = baseName.replace(/\s*\(Superset Mécanique \ dsClass = driveStatusElement?.className || ''; driveConnectionStatusMain.className = dsClass; if (isLoggedIn) { ifd\/\d\)/i, ''); baseName = baseName.replace(/\s*\(Optionnel \d+ème série\)/i, ''); baseName = baseName.replace(/\s*\(Optionnel\)/i, ''); if (baseName.startsWith("Curls Marteau avec Haltères (Myo-Reps")) { return (dsClass.includes('loading')) driveConnectionText.textContent = "Chargement..."; else if (dsClass.includes('error "Curls Marteau avec Haltères"; } return baseName.trim(); }
    function triggerTriangleSpin() { const triangle = document.querySelector('.reactor .triangle'); if (!triangle) return; if (triangleSpinTimeoutId')) driveConnectionText.textContent = `Erreur Drive`; else driveConnectionText.textContent = "Connecté"; } }
        if (historyDriveStatus && historyActionsContainer) { historyActionsContainer.style.display = isLoggedIn ? 'flex) { clearTimeout(triangleSpinTimeoutId); } triangle.classList.remove('spin-transition'); void triangle.offsetWidth;' : 'none'; if (isLoggedIn) { historyDriveStatus.className = ''; if (isSavingDriveData triangle.classList.add('spin-transition'); triangleSpinTimeoutId = setTimeout(() => { triangle.classList.remove('spin-) { historyDriveStatus.textContent = 'Synchro...'; historyDriveStatus.classList.add('syncing'); } elsetransition'); triangleSpinTimeoutId = null; }, 600); }
    function initSounds() { try if (driveStatusElement?.classList.contains('loading')) { historyDriveStatus.textContent = 'Chargement...'; { const basePath = "https://ironworkout.github.io/armorworkout/"; soundLaser = new Audio(basePath + 'laser.mp3'); sound5 = new Audio(basePath + '5.mp3'); sound historyDriveStatus.classList.add('syncing'); } else if (driveStatusElement?.classList.contains('error')) { history4 = new Audio(basePath + '4.mp3'); sound3 = new Audio(basePath + 'DriveStatus.textContent = 'Erreur Synchro'; historyDriveStatus.classList.add('error'); } else {3.mp3'); sound2 = new Audio(basePath + '2.mp3'); sound1 = new historyDriveStatus.textContent = 'Synchro OK'; historyDriveStatus.classList.add('success'); } } }
        if(signInButton) signInButton.disabled = isLoggedIn || !tokenClient;
        const isTimerActive Audio(basePath + '1.mp3'); soundWindows = new Audio(basePath + 'windows.mp3'); soundET = new Audio(basePath + 'e-t.mp3'); [soundLaser, sound = ['preparing', 'exercise', 'break', 'paused'].includes(currentState);
        navButtons.forEach(5, sound4, sound3, sound2, sound1, soundWindows, soundET].forEach(sound => { if (btn => { if(btn) btn.disabled = !(isLoggedIn && programsLoaded && !isTimerActive); });
        document.querySelectorAll('nav a.nav-link').forEach(link => {
            link.classList.togglesound) sound.preload = 'auto'; }); } catch (e) { showMessage("Erreur chargement sons.", 5000, true); } }
    function playSound(audioElement) { if (!audio('disabled-link-look', isTimerActive);
        });
        if(navHistoryBtn) navHistoryBtnElement || !audioContext || audioContext.state !== 'running') return; audioElement.currentTime = 0; audioElement.play()..disabled = isTimerActive;
        if(navProgressBtn) navProgressBtn.disabled = !isLoggedIncatch(e => {}); }
    function initAudioContext() { if (audioContext && audioContext.state === || isTimerActive; // Dépend aussi de isLoggedIn
        if (currentState === 'idle') { const canStartWorkout 'running') return; if (!audioContext) { try { window.AudioContext = window.AudioContext || window = isLoggedIn && programsLoaded && !!currentWorkoutType && currentWorkoutPlan && currentWorkoutPlan.length > 0; if(.webkitAudioContext; if (window.AudioContext) audioContext = new AudioContext(); else return; } catchstartPauseBtn) { startPauseBtn.disabled = !canStartWorkout; startPauseBtn.innerHTML = `<i (e) { return; } } if (audioContext.state === 'suspended') audioContext.resume().catch(e => class="fas fa-play"></i> Démarrer`; startPauseBtn.className = ''; } } else if (startPauseBtn {}); }
    const playTransitionSound = () => playSound(soundLaser);
    const vibrate = (pattern = [1) { startPauseBtn.disabled = ['preparing', 'finished'].includes(currentState); }
        if(prev00]) => { if ('vibrate' in navigator) try { navigator.vibrate(pattern); } catch (eBtn) prevBtn.disabled = !(isTimerActive && currentItemIndex > 0);
        if(finish) {} };

    // Google Identity Services & Drive API (gisInitInternal, checkAndInitGis, handleTokenBtn) finishBtn.disabled = !isTimerActive;
        if(resetBtn) resetBtn.disabled =Error, tokenCallback, handleAuthClick - inchangées)
    async function gisInitInternal() { if (typeof google !== !isTimerActive && !isLoggedIn;
        updateWorkoutInfo();
        displayHistory(currentHistoryPeriod);
    }
    async function findOrCreateFile(filename, defaultContent = "", mimeType = 'application/json 'undefined' && google.accounts && google.accounts.oauth2) { try { tokenClient = google.accounts') { /* ... (Identique) ... */ }
    async function readFileContent(fileId) { /* ....oauth2.initTokenClient({ client_id: GOOGLE_CLIENT_ID, scope: GOOGLE_ (Identique) ... */ }
    async function updateFileContent(fileId, content) { /* ... (DRIVE_SCOPES, callback: tokenCallback, error_callback: handleTokenError, }); if (tokenClientIdentique) ... */ }
    function formatTime(seconds) { /* ... (Identique) ... */ }
    function) { tokenClient.requestAccessToken({ prompt: '' }); } if (signInButton) signInButton.disabled = false; } updateTimerDisplay() { /* ... (Identique) ... */ }
    function updateTimerVisuals(state) catch (error) { console.error("Erreur GIS initTokenClient:", error); showMessage("Erreur initial { /* ... (Identique) ... */ }
    function updateWorkoutInfo() { /* ... (Logique d'imageisation services Google.", 5000, true); updateAuthUI(false); if(signInButton) signInButton.disabled = true; } } else { console.error("API Google (GIS) non chargée lors de gisInitInternal."); inchangée par rapport à V3.6) ... */
        if (!currentExerciseContainer || !currentExerciseNameDisplay || !progressTracker || !progressTextArea || !exerciseImageContainer || !exerciseImageDisplay) return;
        const if(signInButton) signInButton.disabled = true; } }
    function checkAndInitGis() { if (typeof google !== 'undefined' && google.accounts && google.accounts.oauth2 && typeof google.accounts.oauth item = currentWorkoutPlan[currentItemIndex];
        let infoHtml = ''; let exerciseName = ''; let progressText = ''; const2.initTokenClient === 'function') { gisInitInternal(); } else if (gisCheckRetries < GIS body = document.body;

        let showImage = false;
        let imageUrlForDisplay = '';

        _MAX_RETRIES) { gisCheckRetries++; setTimeout(checkAndInitGis, GIS_CHECK_INTERVAL);if (item && (item.type === 'exercise' || item.type?.startsWith('exercise_')) &&
            (currentState === 'exercise' || (currentState === 'paused' && previousState === 'exercise'))) {
             } else { console.error("Échec détection API Google après plusieurs tentatives."); showMessage("Erreur critique: API Google non disponible.", 10000, true); if(signInButton) signInButton.disabled = true; }const normalizedName = normalizeExerciseName(item.name);
            imageUrlForDisplay = exerciseImageMapping[normalizedName];
            if (imageUrlForDisplay) showImage = true;
        } else if (currentState === 'preparing }
    function handleTokenError(error) { console.error("Erreur Google Token:", error); let userMessage = `' && currentWorkoutPlan[0] &&
                   (currentWorkoutPlan[0].type === 'exercise' ||Erreur Authentification Google: ${error.type || error.error || 'Inconnue'}`; if (error currentWorkoutPlan[0].type?.startsWith('exercise_'))) {
            const normalizedName = normalizeExerciseName(.type === 'popup_closed_by_user' || error.error === 'popup_closed_by_currentWorkoutPlan[0].name);
            imageUrlForDisplay = exerciseImageMapping[normalizedName];
            ifuser') { userMessage = "Fenêtre de connexion Google fermée."; } else if (error.type === ' (imageUrlForDisplay) showImage = true;
        }

        if (showImage && imageUrlForDisplay)popup_failed_to_open') { userMessage = "Impossible d'ouvrir la fenêtre de connexion. Vérifiez les bloqueurs {
            exerciseImageDisplay.src = imageUrlForDisplay;
            exerciseImageDisplay.alt = item?.name de popups."; } else if (error.type === 'USER_CANCELLED' || error.error === ' || "Image de l'exercice";
            exerciseImageContainer.classList.add('visible');
        } elseaccess_denied') { userMessage = "Accès aux données Drive refusé par l'utilisateur."; } let {
            exerciseImageContainer.classList.remove('visible');
            setTimeout(() => {
                 if (!exercise statusText = 'Erreur Auth'; if (driveStatusElement) { driveStatusElement.className = 'error'; driveStatusElementImageContainer.classList.contains('visible')) {
                    exerciseImageDisplay.src = ''; exerciseImageDisplay.alt.style.display = 'inline-flex'; } showMessage(userMessage, 7000, true = '';
                 }
            }, 400);
        }

        switch (currentState) {
); if (driveStatusTextElement) driveStatusTextElement.textContent = statusText; updateAuthUI(false); }
                case 'idle':
                exerciseName = "ArmorWorkout";
                const loginMsg = `<div class="workout-async function tokenCallback(tokenResponse) {
        if (driveStatusElement) driveStatusElement.className = '';
prompt"><i class="fas fa-sign-in-alt"></i><span>Connectez-vous pour commencer.</span>        if (tokenResponse.error) {
            if (tokenResponse.error !== "popup_failed_to</div>`;
                const loadingMsg = `<div class="workout-prompt"><i class="fas fa-spinner fa_open" && tokenResponse.error !== "popup_closed_by_user") {
                 handleTokenError-spin"></i><span>Chargement des données...</span></div>`;
                const selectMsg = `<div class="workout-prompt"><i class="fas fa-hand-pointer"></i><span>Sélectionnez un entraînement.</span></div>(tokenResponse);
            } else {
                updateAuthUI(false); // Si c'est une tentative`;
                const readyMsg = `<div class="workout-prompt"><i class="fas fa-play-circle silencieuse qui échoue à cause d'une popup, on reste en mode déconnecté visuellement
            }"></i><span>Prêt: ${currentWorkoutType || 'Sélectionner'}.</span></div>`;
                if (!
            return;
        }
        if (tokenResponse && tokenResponse.access_token) {
            googleAccessToken) { progressText = "Connectez-vous"; infoHtml = loginMsg; }
                else if (!programsgoogleAccessToken = tokenResponse.access_token;
            showMessage("Connecté ! Chargement des données...", 250Loaded && googleAccessToken) { progressText = "Chargement..."; infoHtml = loadingMsg; } // Montrer charg0);
            if (driveStatusElement) { driveStatusElement.classList.add('loading'); driveStatusElement.style.display = 'inline-flex';}
            if(driveStatusTextElement) driveStatusTextElement.textContent =ement si connecté mais progs pas prêts
                else if (!currentWorkoutType) { progressText = "Sélectionnez P/P/L"; infoHtml = selectMsg; }
                else { progressText = `Prêt: ${currentWorkoutType 'Chargement...';
            let historyLoaded = false; let programsSuccess = false;
            try {
                await loadHistoryFromDrive(); historyLoaded = true;
                programsSuccess = await loadProgramsFromDrive(); programs}`; infoHtml = readyMsg; }
                break;
            case 'finished':
                const durationSeconds = workoutStartTimeLoaded = programsSuccess;
                if (programsLoaded) {
                    showMessage("Données prêtes.", 3000 ? (Date.now() - workoutStartTime) / 1000 : 0;
                exerciseName);
                    if (driveStatusElement) { driveStatusElement.classList.remove('loading', 'error'); drive = 'Entraînement Terminé !';
                infoHtml = `<div class="exercise-details" style="border-StatusElement.classList.add('success');}
                    if(driveStatusTextElement) driveStatusTextElement.textContent =color: var(--color-finished);"><i class="fas ${getIconForState('finished')}" style="color: var(--color-finished)"></i><span>Bravo ! ${durationSeconds > 0 ? `(${formatTime(duration 'Connecté';
                } else {
                    showMessage("Certains programmes n'ont pu être chargés depuis Drive. UtilisationSeconds)})` : ''}</span></div>`;
                progressText = `Fini (${originalCompletedWorkoutPlan.length des valeurs par défaut si nécessaire.", 5000, true);
                    if (driveStatusElement) { drive}/${originalCompletedWorkoutPlan.length})`;
                break;
            case 'preparing':
                const nextItem = currentStatusElement.classList.remove('loading'); driveStatusElement.classList.add('error'); }
                    if(driveStatusTextElement) driveStatusTextElement.textContent = 'Erreur Progs';
                    // On considère que les programmesWorkoutPlan[0];
                exerciseName = `Préparation...`;
                infoHtml = `<div class="break-info" style="border-color: var(--color-prepare);"><i class="fas ${getIconForState par défaut sont une forme de "chargement" partiel pour permettre l'utilisation
                    programsLoaded = true; // Important('preparing')} fa-spin" style="color: var(--color-prepare)"></i><span>Prêt pour <strong>${nextItem pour débloquer les boutons de workout
                }
            } catch (error) {
                console.error?.name || 'Exercice'}</strong> (${formatTime(prepareTimeLeft)})...</span></div>`;
                progressText("Erreur majeure chargement données Drive:", error);
                showMessage("Erreur majeure lors du chargement depuis Drive.", = `Prépa... (1/${currentWorkoutPlan.length})`;
                break;
            case 'exercise': 6000, true);
                if (driveStatusElement) { driveStatusElement.classList.remove('loading case 'paused': case 'break':
                if (!item) { exerciseName = 'Erreur'; infoHtml = '<p>Erreur de chargement.</p>'; progressText = `Étape ?/${currentWorkoutPlan.', 'success'); driveStatusElement.classList.add('error'); }
                if(driveStatusTextElement) driveStatusTextElement.textContent = 'Erreur Données'; programsLoaded = false;
            } finally {
                updateAuthlength}`; break; }
                exerciseName = `${item.name || (item.type === 'break' ? 'Repos' : 'Exercice Inconnu')}`;
                progressText = `Étape ${currentItemIndex + UI(true); // Met à jour l'UI en fonction de isLoggedIn (qui est true ici) et programsLoaded
                if1}/${currentWorkoutPlan.length}`;
                if (item.type === 'exercise' || item.type?. (programsLoaded) { populateExerciseSelect(); displayHistory(currentHistoryPeriod); displayExerciseProgress(); loadInProgressState(); }startsWith('exercise_')) {
                    const repsDisplay = item.reps_text || (item.reps
            }
        } else {
            handleTokenError({ error: "Réponse de token invalide ou_start !== undefined ? item.reps_start : item.reps) || '-';
                    let weightDisplay = '- vide" });
        }
    }
    function handleAuthClick() { initAudioContext(); if (!token';
                    if (item.weight_text) weightDisplay = item.weight_text;
                    else if (Client) { showMessage("Services Google non prêts. Veuillez patienter.", 3000); return; } if (driveitem.weight_details) weightDisplay = item.weight_details;
                    else if (item.weight !==StatusElement) { driveStatusElement.classList.add('loading'); driveStatusElement.classList.remove('error', undefined && item.weight_unit) weightDisplay = `${item.weight} ${item.weight_unit}`;
 'success'); driveStatusElement.style.display = 'inline-flex'; } if(driveStatusTextElement)                    else if (item.weight !== undefined && item.weight > 0) weightDisplay = `${item.weight driveStatusTextElement.textContent = 'Connexion...'; tokenClient.requestAccessToken({ prompt: 'consent' });} kg`;
                    else if (item.weight_unit === "Poids de corps") weightDisplay = "Poids de corps";
                    const details = item.details || ''; const setsInfo = item.sets_info }
    // Les fonctions findOrCreateFile, readFileContent, updateFileContent restent inchangées.

    // update || ''; const repsUnit = item.reps_unit ? ` ${item.reps_unit}` : '';AuthUI est cruciale pour gérer l'état des boutons
    function updateAuthUI(isLoggedIn) {

                    infoHtml = `<div class="exercise-details" style="border-color: var(--color-exercise        const body = document.body; body.classList.toggle('logged-in', isLoggedIn); body.classList.);">`;
                    if (setsInfo) infoHtml += `<span class="sets-info-text"><i class="toggle('logged-out', !isLoggedIn);
        if (driveStatusElement) { driveStatusElement.stylefas fa-layer-group"></i> ${setsInfo}</span>`;
                    infoHtml += `<span><i class="fas ${getIconForType(item.type)}" style="color: var(--color-exercise)"></i> ${reps.display = isLoggedIn ? 'inline-flex' : 'none'; if (!isLoggedIn) driveStatusElement.classNameDisplay}${repsUnit}</span>`;
                    if (weightDisplay !== '-') infoHtml += `<span><i class = ''; else { if (!driveStatusElement.classList.contains('loading') && !driveStatusElement.classList.contains('error')) driveStatusElement.classList.add('success'); } }
        if (driveConnectionStatusMain="fas fa-weight-hanging"></i> ${weightDisplay}</span>`;
                    if (details) infoHtml += && driveConnectionText) { driveConnectionStatusMain.style.display = isLoggedIn ? 'inline-flex' : 'none'; const dsClass = driveStatusElement?.className || ''; driveConnectionStatusMain.className = dsClass; if (isLoggedIn) { `<span class="details-text"><i class="fas fa-info-circle"></i> ${details}</span>`;
                    infoHtml += `</div>`;
                } else if (item.type === 'break') {
                     if (dsClass.includes('loading')) driveConnectionText.textContent = "Chargement..."; else if (dsClass.includes('infoHtml = `<div class="break-info" style="border-color: var(--color-break);"><i class="fas ${getIconForType('break')}" style="color: var(--color-break)"></i>error')) driveConnectionText.textContent = `Erreur Drive`; else driveConnectionText.textContent = "Connecté"; } }
        if (historyDriveStatus && historyActionsContainer) { historyActionsContainer.style.display = isLoggedIn ? 'flex<span>${item.name || `Pause: ${formatTime(item.duration || 0)}`}</span></div>`;
                    const nextExerciseIndex = currentItemIndex + 1;
                    if (nextExerciseIndex < currentWorkoutPlan.length' : 'none'; if (isLoggedIn) { historyDriveStatus.className = ''; if (isSavingDriveData && (currentWorkoutPlan[nextExerciseIndex].type === 'exercise' || currentWorkoutPlan[nextExerciseIndex].) { historyDriveStatus.textContent = 'Synchro...'; historyDriveStatus.classList.add('syncing'); } elsetype?.startsWith('exercise_'))) {
                        const nextEx = currentWorkoutPlan[nextExerciseIndex]; const next if (driveStatusElement?.classList.contains('loading')) { historyDriveStatus.textContent = 'Chargement...';Reps = nextEx.reps_text || (nextEx.reps_start !== undefined ? nextEx historyDriveStatus.classList.add('syncing'); } else if (driveStatusElement?.classList.contains('error')) { history.reps_start : nextEx.reps) || '-';
                        let nextWeight = '-'; if (nextDriveStatus.textContent = 'Erreur Synchro'; historyDriveStatus.classList.add('error'); } else {Ex.weight_text) nextWeight = nextEx.weight_text; else if (nextEx.weight_ historyDriveStatus.textContent = 'Synchro OK'; historyDriveStatus.classList.add('success'); } } }details) nextWeight = nextEx.weight_details; else if (nextEx.weight !== undefined && nextEx
        if(signInButton) signInButton.disabled = isLoggedIn || !tokenClient;

        const isTimerActive = ['preparing', 'exercise', 'break', 'paused'].includes(currentState);
        navButtons.forEach(btn => {.weight_unit) nextWeight = `${nextEx.weight} ${nextEx.weight_unit}`; else if (nextEx.weight !== undefined && nextEx.weight > 0) nextWeight = `${nextEx.weight} kg`; else if (nextEx.weight_unit === "Poids de corps") nextWeight = "P
             if(btn) btn.disabled = !(isLoggedIn && programsLoaded && !isTimerActive);
        oids de corps";
                        const nextRepsUnit = nextEx.reps_unit ? ` ${nextEx});
        document.querySelectorAll('nav a.nav-link').forEach(link => {
            if (isTimerActive.reps_unit}` : '';
                        infoHtml += `<div class="break-info" style="margin) {
                link.classList.add('disabled-link-look');
                link.onclick = (e) => e-top: 8px; opacity: 0.8; border-color: var(--color-exercise);"><i class="fas fa-arrow-right"></i><span>Suiv: ${nextEx.name || '?'}.preventDefault(); // Bloquer clic
            } else {
                link.classList.remove('disabled-link-look');
 (${nextReps}${nextRepsUnit}${nextWeight !== '-' ? '@' + nextWeight : ''})</span></div>                link.onclick = null; // Rétablir clic
            }
        });
        if(navHistoryBtn) navHistoryBtn.disabled = isTimerActive;
        if(navProgressBtn) navProgressBtn.disabled = !is`;
                    }
                }
                break;
            default: exerciseName = '?'; infoHtml = '<p>État inconnu.</p>'; progressText = ''; break;
        }
        if(currentExerciseNameDisplay) currentLoggedIn || isTimerActive; // Progession nécessite login

        if (currentState === 'idle') {
            constExerciseNameDisplay.textContent = exerciseName;
        if(currentExerciseContainer) currentExerciseContainer.innerHTML = info canStartWorkout = isLoggedIn && programsLoaded && !!currentWorkoutType && currentWorkoutPlan && currentWorkoutPlan.length > 0Html;
        if(progressTextArea) progressTextArea.textContent = progressText;
        body.className = Array.from(;
            if(startPauseBtn) { startPauseBtn.disabled = !canStartWorkout; startPauseBtn.innerHTMLbody.classList).filter(cls => !cls.startsWith('state-')).join(' ') + ` state-${currentState = `<i class="fas fa-play"></i> Démarrer`; startPauseBtn.className = ''; }
}`;
        body.classList.toggle('workout-active', !['idle', 'finished'].includes(currentState));
    }
    function getIconForState(state){ /* ... (Identique) ... */ }
    function getIcon        } else if (startPauseBtn) {
            startPauseBtn.disabled = ['preparing', 'finished'].includes(currentState);
        }
        if(prevBtn) prevBtn.disabled = !(isTimerActive && currentItemIndex > 0ForType(type){ /* ... (Identique) ... */ }
    function setState(newState) { /* ...);
        if(finishBtn) finishBtn.disabled = !isTimerActive;
        if(resetBtn (Identique) ... */ }
    function startPrepareCountdown() { /* ... (Identique) ... */ }) resetBtn.disabled = !isTimerActive && !isLoggedIn;
        updateWorkoutInfo(); // S'assurer que l
    function startBreakTimer() { /* ... (Identique) ... */ }
    function handleItemCompletion('UI est à jour après les changements d'état des boutons
        if(isLoggedIn) displayHistory(currentHistorynaturalEnd = false) { /* ... (Identique) ... */ }
    function handlePreviousClick() { /* ... (Identique) ... */ }
    function forceFinishWorkout() { /* ... (Identique) ... */ }
    function loadWorkout(type) { /* ... (Identique) ... */ }
    function resetCurrentPeriod); // N'afficher l'historique que si loggé
    }


    // Fonctions Cœur du Timer (Workout() { /* ... (Identique) ... */ }
    function showMessage(msg, duration = 3formatTime, updateTimerDisplay, updateTimerVisuals, updateWorkoutInfo, getIconForState, getIconForType000, isError = false) { /* ... (Identique) ... */ }
    function applyTheme, setState, startPrepareCountdown, startBreakTimer, handleItemCompletion, handlePreviousClick, forceFinishWorkout, load(theme) { /* ... (Identique) ... */ }
    function loadSavedTheme() { /* ... (Identique) ... */ }
    function showSection(sectionId) { /* ... (Identique) ... */Workout, resetCurrentWorkout, showMessage - inchangées par rapport à V3.7)
    function formatTime(seconds) { const cleanSeconds = Math.max(0, Math.round(seconds)); const minutes = Math. }
    function setActiveWorkoutNav(type) { /* ... (Identique) ... */ }
    function displayfloor(cleanSeconds / 60); const remainingSeconds = cleanSeconds % 60; return `${minutes.History(period = 'week') { /* ... (Identique) ... */ }
    function filterHistoryByPeriodtoString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`; }(history, period) { /* ... (Identique) ... */ }
    function renderHistoryList(filteredHistory) { /* ... (Identique) ... */ }
    function calculateAndDisplayStats(filteredHistory) { /* ... (Ident
    function updateTimerDisplay() { if (!timeDisplayDiv || !timerStateDisplay) return; let timeString = "00:00"; let stateText = ''; let stateClass = ''; const item = currentWorkoutPlan[currentItemIndex];ique) ... */ }
    function aggregateChartData(hist, period, metric = 'durationSeconds') { /* const durationSeconds = workoutStartTime ? (Date.now() - workoutStartTime) / 1000 :  ... (Identique) ... */ }
    function getChartXAxisTitle(period){ /* ... (Identique) ... */ }
    function renderHistoryChart(filteredHistory) { /* ... (Identique) ... */ }0; switch(currentState) { case 'exercise': timeString = "GO!"; stateText = item?.name || 'Exercice
    function updateChartColors() { /* ... (Identique) ... */ }
    function clearCharts() { /* ... ('; break; case 'break': timeString = formatTime(timeLeft); stateText = item?.name || 'ReposIdentique) ... */ }
    function setChartPlaceholder(canvasId, message, show = true) { /*'; break; case 'paused': timeString = (item?.type === 'break') ? formatTime(timeLeft) : "PAUSE"; stateText = 'En Pause'; break; case 'preparing': timeString = formatTime(prepareTimeLeft ... (Identique) ... */ }
    function populateExerciseSelect() { /* ... (Identique) ... */); stateText = 'Préparation'; break; case 'finished': timeString = "FINI!"; stateText = }
    function displayExerciseProgress() { /* ... (Identique) ... */ }
    function populateAndShowSummary() { /* ... (Identique) ... */ }
    async function finishSummary() { /* ... (Ident `Terminé (${formatTime(durationSeconds)})`; stateClass = 'finished-state'; break; default: timeique) ... */ }
    function closeSummary(updateUI = true) { /* ... (Identique) ...String = formatTime(0); stateText = 'Prêt'; break; } timeDisplayDiv.textContent = timeString; timer */ }
    async function saveHistoryToDrive() { /* ... (Identique) ... */ }
    asyncStateDisplay.textContent = stateText; timerStateDisplay.className = 'timer-state'; if (currentState !== 'idle function loadHistoryFromDrive() { /* ... (Identique) ... */ }
    async function loadProgramsFromDrive') timerStateDisplay.classList.add('visible'); if (stateClass) timerStateDisplay.classList.add(() { // Logique d'erreur améliorée
        if (!googleAccessToken) {
            programsLoaded = false;stateClass); if (currentState === 'preparing') timerStateDisplay.classList.add('preparing'); }
    function // Assurer que c'est faux si pas de token
            return false;
        }
        let all updateTimerVisuals(state) { if (!timeDisplayDiv || !timerStateDisplay) return; let stateColorVar =LoadedSuccessfully = true;
        loadedWorkouts = {}; // Réinitialiser pour s'assurer qu'on ne garde '--idle-color-val'; let stateGlowRgbVar = '--idle-color-rgb'; const root pas d'anciennes données

        for (const type of PROGRAM_TYPES) {
            const defaultProgObject = = document.documentElement; switch(state) { case 'exercise': stateColorVar = '--exercise-color-val'; stateG defaultWorkouts[type] || { routine_name: `${type} (Défaut)`, description: "ProgrammelowRgbVar = '--exercise-color-rgb'; root.style.setProperty('--current-timer-color-rgb par défaut.", workout_data: [] };
            let fileId = null;
            try {
                fileId = await findOrCreateFile(PROGRAM_FILENAMES[type], JSON.stringify(defaultProgObject, null', getComputedStyle(root).getPropertyValue('--exercise-color-rgb').trim()); break; case 'break':, 2));
                if (fileId) {
                    const content = await readFileContent(fileId); stateColorVar = '--break-color-val'; stateGlowRgbVar = '--break-color-rgb'; root.style.setProperty('--current-timer-color-rgb', getComputedStyle(root).getPropertyValue('--break-color-rgb
                    if (content !== null) {
                        try {
                            loadedWorkouts[type] = JSON.').trim()); break; case 'paused': stateColorVar = '--paused-color-val'; stateGlowRparse(content || JSON.stringify(defaultProgObject));
                            if (!loadedWorkouts[type].workout_data || !Array.isArray(loadedWorkouts[type].workout_data)) {
                                console.warn(`ProgrammegbVar = '--paused-color-rgb'; root.style.setProperty('--current-timer-color-rgb', getComputedStyle(root).getPropertyValue('--paused-color-rgb').trim()); break; case 'preparing': state ${type} (ID: ${fileId}) depuis Drive a une structure workout_data invalide. Utilisation du défaut.`);
ColorVar = '--preparing-color-val'; stateGlowRgbVar = '--preparing-color-rgb'; root.style                                loadedWorkouts[type] = JSON.parse(JSON.stringify(defaultProgObject));
                                // Ne.setProperty('--current-timer-color-rgb', getComputedStyle(root).getPropertyValue('--preparing-color-rgb').trim pas marquer allLoadedSuccessfully false ici, on a un fallback
                            }
                        } catch (parseError) {
()); break; case 'finished': stateColorVar = '--finished-color-val'; stateGlowRgbVar                            console.error(`Erreur parsing JSON pour programme ${type} (ID: ${fileId}):`, parseError, = '--finished-color-rgb'; root.style.setProperty('--current-timer-color-rgb', getComputedStyle( "Contenu:", content.substring(0,100)+"...");
                            showMessage(`Erreur format fichier ${type}.root).getPropertyValue('--finished-color-rgb').trim()); break; default: root.style.setProperty('--current-timer-color-rgb', getComputedStyle(root).getPropertyValue('--idle-color-rgb').trim()); break; Programme par défaut utilisé.`, 5000, true);
                            loadedWorkouts[type] = JSON } const stateColor = getComputedStyle(root).getPropertyValue(stateColorVar).trim(); const textGlowValue.parse(JSON.stringify(defaultProgObject));
                            allLoadedSuccessfully = false; // Marquer comme é = `0 0 10px ${stateColor}, 0 0 20px rgba(${stateGchec partiel si le parse échoue
                        }
                    } else { // Erreur de lecture du fichier (lowRgb}, 0.4)`; timeDisplayDiv.style.color = stateColor; timeDisplayDiv.style.textShadow = textGlowValue; timerStateDisplay.style.color = stateColor; timerStateDisplay.stylereadFileContent a déjà géré le message)
                        console.error(`Erreur lecture fichier pour programme ${type} (.textShadow = textGlowValue; root.style.setProperty('--current-timer-color', stateColor); }
ID: ${fileId}). Utilisation du défaut.`);
                        loadedWorkouts[type] = JSON.parse(JSON.stringify    function updateWorkoutInfo() { if (!currentExerciseContainer || !currentExerciseNameDisplay || !progressTracker || !progressTextArea ||(defaultProgObject));
                        allLoadedSuccessfully = false;
                    }
                } else { // Erreur !exerciseImageContainer || !exerciseImageDisplay) return; const item = currentWorkoutPlan[currentItemIndex]; let info findOrCreateFile
                    console.error(`Échec findOrCreateFile pour programme ${type}. Utilisation du défaut.`);Html = ''; let exerciseName = ''; let progressText = ''; const body = document.body; let showImage = false;
                    loadedWorkouts[type] = JSON.parse(JSON.stringify(defaultProgObject));
                    all let imageUrlForDisplay = ''; if (item && (item.type === 'exercise' || item.type?.startsWith('exerciseLoadedSuccessfully = false;
                }
            } catch (generalError) { // Erreur générale pendant le traitement de ce type_')) && (currentState === 'exercise' || (currentState === 'paused' && previousState === 'exercise'))) {
                 console.error(`Erreur générale chargement programme ${type}:`, generalError);
                 loadedWorkouts[type const normalizedName = normalizeExerciseName(item.name); imageUrlForDisplay = exerciseImageMapping[normalizedName]; if (] = JSON.parse(JSON.stringify(defaultProgObject));
                 allLoadedSuccessfully = false;
            imageUrlForDisplay) showImage = true; } else if (currentState === 'preparing' && currentWorkoutPlan[0}
        }
        programsLoaded = allLoadedSuccessfully; // Mettre à jour la variable globale
        if (!programsLoaded] && (currentWorkoutPlan[0].type === 'exercise' || currentWorkoutPlan[0].type?.startsWith('exercise_'))) { const normalizedName = normalizeExerciseName(currentWorkoutPlan[0].name); imageUrlForDisplay = exercise) {
            showMessage("Certains programmes n'ont pu être chargés. Versions par défaut utilisées.", 6000,ImageMapping[normalizedName]; if (imageUrlForDisplay) showImage = true; } if (showImage && imageUrl true);
        }
        // console.log("Programmes chargés (fin de loadProgramsFromDrive):", loadedForDisplay) { exerciseImageDisplay.src = imageUrlForDisplay; exerciseImageDisplay.alt = item?.name ||Workouts);
        return programsLoaded; // Retourner l'état global du chargement
    }
     "Image de l'exercice"; exerciseImageContainer.classList.add('visible'); } else { exerciseImageContainer.function saveInProgressState() { /* ... (Identique) ... */ }
    function loadInProgressState() { /* ... (IdentclassList.remove('visible'); setTimeout(() => { if (!exerciseImageContainer.classList.contains('visible')) { exerciseImageDisplay.ique) ... */ }
    function clearInProgressState() { /* ... (Identique) ... */ }
    src = ''; exerciseImageDisplay.alt = ''; } }, 400); } switch (currentState) { casefunction saveWorkoutToHistory() { /* ... (Identique) ... */ }
    function showRepAdjustmentOverlay() 'idle': exerciseName = "ArmorWorkout"; const loginMsg = `<div class="workout-prompt"><i class="fas fa { /* ... (Identique) ... */ }
    function hideRepAdjustmentOverlay() { /* ... (Identique-sign-in-alt"></i><span>Connectez-vous pour commencer.</span></div>`; const loadingMsg = `<div) ... */ }
    function handleRepAdjustClick(event) { /* ... (Identique) ... */ } class="workout-prompt"><i class="fas fa-spinner fa-spin"></i><span>Chargement des données...
    function findNextExerciseForAdjustment() { /* ... (Identique) ... */ }
    function initializeDOM</span></div>`; const selectMsg = `<div class="workout-prompt"><i class="fas fa-hand-pointerReferences() { /* ... (Identique) ... */ }
    function addEventListeners() { /* ... (Logique pour"></i><span>Sélectionnez un entraînement.</span></div>`; const readyMsg = `<div class="workout-prompt"><i class="fas fa-play-circle"></i><span>Prêt: ${currentWorkoutType || 'N/A'}. liens nav mise à jour) ... */
        if (startPauseBtn) startPauseBtn.addEventListener('click', () => { initAudioContext(); if (currentState === 'idle') setState('preparing'); else if (currentState === 'exercise' || currentState.</span></div>`; if (!googleAccessToken) { progressText = "Connectez-vous"; infoHtml = loginMsg; } else ifstartsWith('exercise_')) handleItemCompletion(false); else if (currentState === 'break') setState('paused'); else (!programsLoaded) { progressText = "Chargement..."; infoHtml = loadingMsg; } else if (!currentWorkoutType if (currentState === 'paused') setState((currentWorkoutPlan[currentItemIndex]?.type === 'exercise' || currentWorkoutPlan[currentItemIndex]?.type?.startsWith('exercise_')) ? 'exercise' : 'break'); });
        if (timerDisplay) { progressText = "Sélectionnez P/P/L"; infoHtml = selectMsg; } else {Element) timerDisplayElement.addEventListener('click', () => { initAudioContext(); if (isWorkoutActive && currentState !== 'preparing progressText = `Prêt: ${currentWorkoutType}`; infoHtml = readyMsg; } break; case 'finished': const durationSeconds = workoutStartTime ? (Date.now() - workoutStartTime) / 1000 : 0' && currentState !== 'finished') handleItemCompletion(false); else if (currentState === 'idle' && startPauseBtn && !; exerciseName = 'Terminé !'; infoHtml = `<div class="exercise-details" style="border-color:startPauseBtn.disabled) setState('preparing'); });
        if (skipBtn) skipBtn.addEventListener('click var(--color-finished);"><i class="fas ${getIconForState('finished')}" style="color: var(--color', () => { initAudioContext(); if (isWorkoutActive) handleItemCompletion(false); });
        if (prevBtn-finished)"></i><span>Bravo ! ${durationSeconds > 0 ? `(${formatTime(durationSeconds)})`) prevBtn.addEventListener('click', () => { initAudioContext(); handlePreviousClick(); });
        if ( : ''}</span></div>`; progressText = `Fini (${originalCompletedWorkoutPlan.length}/${originalCompletedWorkoutPlan.finishBtn) finishBtn.addEventListener('click', () => { initAudioContext(); forceFinishWorkout(); });
        length})`; break; case 'preparing': const nextItem = currentWorkoutPlan[0]; exerciseName = `Préparationif (resetBtn) resetBtn.addEventListener('click', () => { initAudioContext(); resetCurrentWorkout(); });...`; infoHtml = `<div class="break-info" style="border-color: var(--color-prepare);"><i
        navButtons.forEach(btn => { if (btn) btn.addEventListener('click', () => { initAudioContext(); class="fas ${getIconForState('preparing')} fa-spin" style="color: var(--color-prepare)"></i><span> loadWorkout(btn.dataset.workout); }); });
        document.querySelectorAll('nav a.nav-link').Prêt pour <strong>${nextItem?.name || 'Exercice'}</strong> (${formatTime(prepareTimeLeft)})...</span>forEach(link => {
            link.addEventListener('click', (e) => {
                initAudioContext();
                const isTimerActive = ['preparing', 'exercise', 'break', 'paused'].includes(currentState);
                </div>`; progressText = `Prépa... (1/${currentWorkoutPlan.length})`; break; case 'exercise': case 'pausedif (isTimerActive) {
                    e.preventDefault();
                    showMessage("Terminez ou mettez en pause': case 'break': if (!item) { exerciseName = 'Erreur'; infoHtml = '<p>Erreur charg l'entraînement avant de naviguer.", 3000);
                }
            });
        });
ement.</p>'; progressText = `Étape ?/${currentWorkoutPlan.length}`; break; } exerciseName = `${item        if(navHistoryBtn) navHistoryBtn.addEventListener('click', () => { initAudioContext(); showSection.name || (item.type === 'break' ? 'Repos' : '?')}`; progressText = `É('history-section'); });
        if(navProgressBtn) navProgressBtn.addEventListener('click', () =>tape ${currentItemIndex + 1}/${currentWorkoutPlan.length}`; if (item.type === 'exercise' || item.type { initAudioContext(); showSection('progress-section'); });
        historyFilterBtns.forEach(btn => {?.startsWith('exercise_')) { const repsDisplay = item.reps_text || (item.reps_ if(btn) btn.addEventListener('click', () => { initAudioContext(); displayHistory(btn.dataset.start !== undefined ? item.reps_start : item.reps) || '-'; let weightDisplay = '-period); }); });
        if(exerciseSelect) exerciseSelect.addEventListener('change', displayExerciseProgress);
        '; if (item.weight_text) weightDisplay = item.weight_text; else if (item.weightif(periodSelect) periodSelect.addEventListener('change', displayExerciseProgress);
        if(settingsIcon) settings_details) weightDisplay = item.weight_details; else if (item.weight !== undefined && item.weightIcon.addEventListener('click', () => { showMessage("Paramètres à venir !", 2000); });_unit) weightDisplay = `${item.weight} ${item.weight_unit}`; else if (item.weight
        if(signInButton) signInButton.addEventListener('click', handleAuthClick);
        if(finishSummaryBtn) finish !== undefined && item.weight > 0) weightDisplay = `${item.weight} kg`; else if (itemSummaryBtn.addEventListener('click', finishSummary);
        if(postWorkoutSummary) postWorkoutSummary.addEventListener('.weight_unit === "Poids de corps") weightDisplay = "Poids de corps"; const details = itemclick', (e) => { if (e.target === postWorkoutSummary) finishSummary(); });
        if(repAdjustMinusBtn) repAdjustMinusBtn.addEventListener('click', handleRepAdjustClick);
        if(.details || ''; const setsInfo = item.sets_info || ''; const repsUnit = item.reps_repAdjustPlusBtn) repAdjustPlusBtn.addEventListener('click', handleRepAdjustClick);
        if(repunit ? ` ${item.reps_unit}` : ''; infoHtml = `<div class="exercise-details"AdjustmentOverlay) repAdjustmentOverlay.addEventListener('click', (e) => { if (e.target === repAdjustment style="border-color: var(--color-exercise);">`; if (setsInfo) infoHtml += `<span classOverlay) hideRepAdjustmentOverlay(); });
        document.addEventListener('visibilitychange', () => { if (document.="sets-info-text"><i class="fas fa-layer-group"></i> ${setsInfo}</span>`;visibilityState === 'hidden' && isWorkoutActive) saveInProgressState(); });
        window.addEventListener('beforeunload infoHtml += `<span><i class="fas ${getIconForType(item.type)}" style="color:', () => { if (isWorkoutActive) saveInProgressState(); });
    }

    document.addEventListener('DOMContentLoaded', () var(--color-exercise)"></i> ${repsDisplay}${repsUnit}</span>`; if (weightDisplay !== '-') => {
        initializeDOMReferences();
        loadedWorkouts = JSON.parse(JSON.stringify(defaultWorkouts));
 infoHtml += `<span><i class="fas fa-weight-hanging"></i> ${weightDisplay}</span>`; if        initSounds(); addEventListeners(); loadSavedTheme();
        setState('idle'); updateAuthUI(!!googleAccessToken (details) infoHtml += `<span class="details-text"><i class="fas fa-info-circle">); checkAndInitGis();
        setChartPlaceholder('history-chart-canvas', "Connectez-vous pour voir l'historique.");
        setChartPlaceholder('exercise-progress-chart', "Connectez-vous pour voir la</i> ${details}</span>`; infoHtml += `</div>`; } else if (item.type === 'break') { infoHtml = `<div class="break-info" style="border-color: var(--color-break);"><i progression.");
        console.log("ArmorWorkout V3.8 Initialisé (Refonte Thème, UI Mobile class="fas ${getIconForType('break')}" style="color: var(--color-break)"></i><span>${item.name || `Pause: ${formatTime(item.duration || 0)}`}</span></div>`; const, Gestion Erreurs Progs).");
    });
</script>
</body>
</html>
