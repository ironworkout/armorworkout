Absolument. Il est essentiel que l'éditeur et le minuteur parlent exactement le même "langage" JSON pour que tout soit cohérent.

J'ai donc mis à jour la page de l'éditeur pour qu'elle corresponde parfaitement à la structure de données utilisée par le minuteur. Cela inclut la gestion des exercices basés sur la durée.

Résumé des Modifications Apportées à l'Éditeur :

Gestion Claire des Exercices Chronométrés :

Le formulaire pour un exercice inclut désormais un champ "Durée (s)".

Logique :

Si vous remplissez le champ "Durée (s)", l'exercice sera automatiquement traité comme un exercice chronométré dans le minuteur.

Si vous remplissez le champ "Reps", il sera traité comme un exercice basé sur les répétitions.

Pour éviter toute confusion, j'ai mis en place une logique où si vous entrez une durée, le champ "Reps" est ignoré, et vice-versa. Cela garantit que votre fichier JSON est toujours propre.

Champ weight_text Standardisé :

Comme nous l'avions fait pour le minuteur, l'éditeur utilise maintenant un champ unique "Poids / Résistance (Texte)" qui correspond à la clé weight_text. C'est le seul endroit où vous définissez la charge, garantissant une cohérence parfaite entre ce que vous éditez et ce que vous voyez pendant l'entraînement.

Interface d'Édition Améliorée :

Toutes les améliorations précédentes sont conservées : duplication d'étapes, ajout intelligent, gestion des sessions, import/export, et regroupement des champs avec un menu "Plus d'options".

L'éditeur est maintenant non seulement plus puissant et ergonomique, mais aussi parfaitement aligné avec la logique de fonctionnement du minuteur.

Voici le code complet et corrigé de la page de l'éditeur.

code
Html
play_circle
download
content_copy
expand_less
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArmorWorkout - Éditeur de Programme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color-dark: #030712; 
            --secondary-bg-color-dark: #0B132B; 
            --primary-text-color-dark: #F0F4F8; 
            --secondary-text-color-dark: #A0AEC0; 
            --border-color-dark: #1E293B; 
            --electric-blue: #00BFFF; 
            --electric-cyan: #22D3EE; 
            --electric-blue-light: #4D94FF; 
            --glow-accent: #0AF; 
            --electric-blue-rgb: 0, 191, 255;
            --electric-cyan-rgb: 34, 211, 238;
            --glow-accent-rgb: 0, 170, 255;
            --secondary-bg-color-dark-rgb: 11, 19, 43;
            --bg-color-dark-rgb: 3, 7, 18;
            --neon-pink: #FF1493; 
            --neon-purple: #9400D3; 
            --neon-green: #39FF14; 
            --neon-red: #FF3131; 
            --neon-yellow: #FFF01F; 
            --neon-pink-rgb: 255, 20, 147;
            --neon-purple-rgb: 148, 0, 211;
            --neon-green-rgb: 57, 255, 20;
            --neon-red-rgb: 255, 49, 49;
            --neon-yellow-rgb: 255, 240, 31;
            --glow-red: 0 0 8px var(--neon-red), 0 0 12px rgba(var(--neon-red-rgb),0.7);
            --glow-green: 0 0 8px var(--neon-green), 0 0 12px rgba(var(--neon-green-rgb),0.7);
            --glow-yellow: 0 0 8px var(--neon-yellow), 0 0 12px rgba(var(--neon-yellow-rgb),0.7);
            --glow-pink: 0 0 8px var(--neon-pink), 0 0 12px rgba(var(--neon-pink-rgb),0.7);
            --glow-purple: 0 0 8px var(--neon-purple), 0 0 12px rgba(var(--neon-purple-rgb),0.7);
            --electric-yellow: var(--neon-yellow); 
            --electric-yellow-rgb: var(--neon-yellow-rgb);
            --color-exercise-default: var(--neon-pink);
            --color-break: var(--neon-yellow);
            --font-family-main: 'Inter', sans-serif;
            --font-family-titles: 'Orbitron', sans-serif; 
            --border-radius-lg: 10px;
            --border-radius-md: 8px;
            --border-radius-sm: 6px;
            --transition-speed: 0.3s;
            --bg-color: var(--bg-color-dark);
            --secondary-bg-color: var(--secondary-bg-color-dark);
            --primary-text-color: var(--primary-text-color-dark);
            --secondary-text-color: var(--secondary-text-color-dark);
            --border-color: var(--border-color-dark);
            --accent-border-color: rgba(var(--electric-blue-rgb), 0.4); 
            --input-bg: #1A202C; 
            --link-color: var(--electric-cyan);
            --button-connect-color: var(--neon-green);
            --button-connect-glow: var(--glow-green);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-family-main); background-color: var(--bg-color); color: var(--primary-text-color);
            line-height: 1.65; transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
            display: flex; flex-direction: column; min-height: 100vh;
            -webkit-font-smoothing: antialiased; overflow-x: hidden;
            background-image: radial-gradient(ellipse at center, rgba(var(--electric-blue-rgb), 0.08) 0%, transparent 60%),
                              linear-gradient(0deg, rgba(var(--bg-color-dark-rgb), 0.5) 0%, rgba(var(--bg-color-dark-rgb), 0.9) 100%);
            position: relative; 
        }
        body::before { 
            content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-image: linear-gradient(rgba(var(--electric-blue-rgb), 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(var(--electric-blue-rgb), 0.05) 1px, transparent 1px);
            background-size: 30px 30px; z-index: -1; opacity: 0.7;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 30px 20px; width: 100%; flex-grow: 1; display: flex; flex-direction: column; }
        header {
            padding: 15px 0; background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.5); backdrop-filter: blur(8px) saturate(150%);
            border-bottom: 1px solid rgba(var(--electric-blue-rgb), 0.3); box-shadow: 0 2px 15px rgba(var(--electric-blue-rgb), 0.1);
            position: sticky; top:0; z-index: 1000; 
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto; padding: 0 25px; flex-wrap: wrap; gap: 15px 20px; }
        header h1 { font-size: 1.6em; color: var(--primary-text-color); margin: 0; font-weight: 700; display: flex; align-items: center; gap: 10px; font-family: var(--font-family-titles); text-shadow: 0 0 8px rgba(var(--electric-cyan-rgb), 0.7); }
        header h1 i { color: var(--electric-cyan); animation: subtlePulse 3s infinite ease-in-out; }
        @keyframes subtlePulse { 0%, 100% { opacity: 0.7; transform: scale(1); } 50% { opacity: 1; transform: scale(1.015); } }
        .header-link { color: var(--secondary-text-color); font-size: 0.9em; text-decoration: none; display: inline-flex; align-items: center; gap: 5px; transition: color var(--transition-speed) ease; padding: 8px 12px; border-radius: var(--border-radius-sm); border: 1px solid transparent; }
        .header-link:hover { color: var(--link-color); background-color: rgba(var(--electric-blue-rgb), 0.1); border-color: rgba(var(--electric-blue-rgb), 0.4); text-shadow: 0 0 5px rgba(var(--electric-blue-rgb), 0.5); }
        .header-actions { display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .auth-controls { display: flex; gap: 10px; align-items: center; }
        .auth-controls button {
            background: none; border: 1px solid var(--accent-border-color); color: var(--secondary-text-color); padding: 6px 14px;
            border-radius: var(--border-radius-md); font-size: 0.85em; font-weight: 500; cursor: pointer;
            transition: all var(--transition-speed) ease; display: inline-flex; align-items: center; gap: 6px; text-decoration: none;
        }
        .auth-controls button:disabled { opacity: 0.5; cursor: not-allowed; pointer-events: auto; border-color: var(--border-color) !important; color: var(--secondary-text-color) !important; box-shadow: none !important; background-color: transparent !important; }
        .auth-controls button:not(:disabled):hover { border-color: var(--primary-text-color); color: var(--primary-text-color); }
        #signin-button, #signin-button-prompt { border-color: var(--button-connect-color); color: var(--button-connect-color); }
        #signin-button:not(:disabled):hover, #signin-button-prompt:not(:disabled):hover { background-color: rgba(var(--neon-green-rgb), 0.1); box-shadow: var(--glow-green); border-color: var(--neon-green); }
        #drive-status { font-size: 0.8em; color: var(--secondary-text-color); margin-left: 5px; transition: opacity 0.3s, color 0.3s, border-color 0.3s; min-width: fit-content; text-align: right; font-style: normal; padding: 4px 8px; background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.5); border-radius: var(--border-radius-sm); border: 1px solid var(--border-color); display: none; }
        #drive-status.loading { color: var(--neon-yellow); border-color: var(--neon-yellow); animation: blink-border 1.5s infinite ease-in-out; }
        #drive-status.error { color: var(--neon-red); border-color: var(--neon-red); }
        #drive-status.success { color: var(--neon-green); border-color: var(--neon-green); }
        @keyframes blink-border { 50% { border-color: rgba(var(--neon-yellow-rgb), 0.4); } }
        body.logged-out #signin-button { display: inline-flex; } body.logged-out #drive-status { display: none; }
        body.logged-in #signin-button { display: none; } body.logged-in #drive-status { display: inline-block; }
        main { flex-grow: 1; display: flex; flex-direction: column; align-items: center; padding-top: 20px; } 
        main h2 { font-size: 1.8em; font-weight: 700; margin-bottom: 25px; text-align: center; color: var(--primary-text-color); display: flex; align-items: center; gap: 12px; justify-content: center; font-family: var(--font-family-titles); text-shadow: 0 0 8px rgba(var(--electric-cyan-rgb), 0.7);}
        main h2 i { color: var(--electric-cyan); animation: subtlePulse 3s infinite ease-in-out; }
        #connection-prompt { text-align: center; padding: 40px 20px; background-color: var(--secondary-bg-color); border-radius: var(--border-radius-lg); border: 1px dashed var(--border-color); margin: 20px auto; max-width: 600px; }
        #connection-prompt p { margin-bottom: 15px; color: var(--secondary-text-color); }
        #connection-prompt button { padding: 8px 18px; border: 1px solid; font-size: 0.9em; }
        #program-editor-area { width: 100%; background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.6); backdrop-filter: blur(10px) saturate(130%); border-radius: var(--border-radius-lg); border: 1px solid rgba(var(--electric-blue-rgb), 0.2); padding: 25px; display: none; flex-direction: column; gap: 25px; box-shadow: 0 5px 25px rgba(var(--bg-color-dark-rgb), 0.5), inset 0 0 15px rgba(var(--electric-blue-rgb), 0.1); }
        body.logged-in #program-editor-area { display: flex; }
        .program-tabs { display: flex; gap: 10px; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; flex-wrap: wrap; align-items: center; }
        .program-tabs button { padding: 8px 18px; font-size: 1em; font-weight: 500; border: 1px solid transparent; background: none; color: var(--secondary-text-color); cursor: pointer; transition: all var(--transition-speed) ease; border-radius: var(--border-radius-md); position: relative; }
        .program-tabs button:disabled { color: rgba(var(--secondary-text-color-dark-rgb), 0.5); cursor: not-allowed; opacity: 0.6; }
        .program-tabs button:not(:disabled):hover { background-color: rgba(var(--electric-blue-rgb), 0.1); color: var(--primary-text-color); }
        .program-tabs button.active { color: var(--electric-cyan); background-color: rgba(var(--electric-cyan-rgb), 0.15); font-weight: 700; border-color: var(--electric-cyan); box-shadow: 0 0 10px rgba(var(--electric-cyan-rgb),0.3); }
        .program-tabs #add-session-btn { margin-left: auto; border-style: dashed; }
        .program-tabs #session-options-btn { padding: 8px 10px; font-size: 0.9em; }
        
        #program-display { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 15px; min-height: 200px; }
        #program-display:empty::before { content: "Connectez-vous et chargez un programme."; display: block; text-align: center; padding: 50px 20px; color: var(--secondary-text-color); font-style: italic; }
        
        .insert-control { position: relative; height: 20px; }
        .insert-control .insert-line { position: absolute; left: 0; right: 0; top: 50%; height: 2px; background-color: transparent; transition: background-color 0.2s; }
        .insert-control:hover .insert-line { background-color: var(--accent-border-color); }
        .insert-control .add-here-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; background: var(--secondary-bg-color); border: 1px solid var(--accent-border-color); color: var(--link-color); border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 1.1em; cursor: pointer; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s, transform 0.2s; }
        .insert-control:hover .add-here-btn { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1.1); }

        .program-step { background-color: var(--bg-color); border: 1px solid var(--border-color); border-left-width: 4px; border-radius: var(--border-radius-md); padding: 15px; display: grid; grid-template-columns: auto 1fr auto; gap: 10px 15px; align-items: start; position: relative; transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease; cursor: grab; }
        .program-step:hover { border-color: var(--accent-border-color); box-shadow: 0 2px 8px rgba(var(--bg-color-dark-rgb),0.3); }
        .step-icon { font-size: 1.3em; padding-top: 5px; grid-column: 1 / 2; align-self: center; transition: color var(--transition-speed) ease; }
        .break-step .step-icon { color: var(--color-break); }
        .step-content { grid-column: 2 / 3; display: flex; flex-direction: column; gap: 15px; }
        .step-fields-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
        .step-field { display: flex; flex-direction: column; gap: 4px; }
        .step-field label { font-size: 0.8em; font-weight: 500; color: var(--secondary-text-color); }
        .step-field input, .step-field textarea { width: 100%; padding: 8px 10px; font-size: 0.9em; border-radius: var(--border-radius-sm); border: 1px solid var(--border-color); background-color: var(--input-bg); color: var(--primary-text-color); transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease; }
        .step-field input:focus, .step-field textarea:focus { border-color: var(--electric-cyan); outline: none; box-shadow: 0 0 0 2px rgba(var(--electric-cyan-rgb), 0.3); }
        .step-field textarea { min-height: 40px; resize: vertical; font-family: inherit;}
        .step-field.full-width { grid-column: 1 / -1; }
        .step-field input[type="number"] { -moz-appearance: textfield; }
        .step-field input[type="number"]::-webkit-outer-spin-button, .step-field input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        
        .step-field-group h4 { font-size: 0.75em; text-transform: uppercase; color: var(--secondary-text-color); letter-spacing: 1px; margin-bottom: 8px; border-bottom: 1px solid var(--border-color); padding-bottom: 4px; }
        .advanced-fields { display: none; margin-top: 15px; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .step-actions { grid-column: 3 / 4; display: flex; flex-direction: column; gap: 8px; align-items: center; padding-top: 5px; }
        .step-actions button { background: none; border: none; color: var(--secondary-text-color); font-size: 1.1em; cursor: pointer; padding: 5px; transition: color var(--transition-speed) ease, background-color var(--transition-speed) ease; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
        .step-actions button:hover { color: var(--primary-text-color); background-color: rgba(var(--primary-text-color-dark-rgb), 0.1); }
        .step-actions .delete-step-btn:hover { color: var(--neon-red); background-color: rgba(var(--neon-red-rgb), 0.1); }
        .program-step.sortable-ghost { opacity: 0.4; background-color: rgba(var(--electric-blue-rgb), 0.1); border-style: dashed; }
        .program-step.sortable-chosen { cursor: grabbing; border-color: var(--electric-cyan); box-shadow: 0 4px 12px rgba(var(--electric-cyan-rgb), 0.3); }
        .editor-actions { display: flex; justify-content: space-between; align-items: center; gap: 15px; flex-wrap: wrap; border-top: 1px solid var(--border-color); padding-top: 25px; margin-top: 10px; }
        .add-buttons { display: flex; gap: 10px; flex-wrap: wrap; }
        .editor-actions button { padding: 9px 20px; font-size: 0.95em; font-weight: 500; border-radius: var(--border-radius-md); cursor: pointer; transition: all var(--transition-speed) ease; display: inline-flex; align-items: center; gap: 8px; border: 1px solid transparent; }
        .editor-actions button:disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; }
        #add-exercise-btn { border-color: var(--color-exercise-default); color: var(--color-exercise-default); background: transparent; }
        #add-exercise-btn:not(:disabled):hover { background-color: rgba(var(--neon-pink-rgb), 0.1); box-shadow: var(--glow-pink); }
        #add-break-btn { border-color: var(--color-break); color: var(--color-break); background: transparent; }
        #add-break-btn:not(:disabled):hover { background-color: rgba(var(--neon-yellow-rgb), 0.1); box-shadow: var(--glow-yellow); }
        #save-program-btn { border: none; background-color: var(--neon-green); color: #030712; box-shadow: 0 2px 5px rgba(0,0,0,0.2); } 
        #save-program-btn:not(:disabled):hover { filter: brightness(1.1); box-shadow: 0 4px 10px rgba(0,0,0,0.25), var(--glow-green); }
        #save-program-btn:disabled { background-color: var(--secondary-text-color); color: rgba(var(--bg-color-dark-rgb),0.7); box-shadow: none; border-color: var(--secondary-text-color); }
        
        /* Dropdown Menu for Session Options */
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { display: none; position: absolute; background-color: var(--secondary-bg-color); min-width: 180px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.4); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); z-index: 10; right: 0; margin-top: 5px; overflow: hidden;}
        .dropdown-content a { color: var(--secondary-text-color); padding: 10px 15px; text-decoration: none; display: flex; align-items: center; gap: 10px; font-size: 0.9em; transition: background-color 0.2s, color 0.2s; }
        .dropdown-content a i { width: 16px; text-align: center; }
        .dropdown-content a:hover { background-color: rgba(var(--electric-blue-rgb), 0.1); color: var(--primary-text-color); }
        .dropdown-content a.delete:hover { background-color: rgba(var(--neon-red-rgb), 0.1); color: var(--neon-red); }
        .dropdown.show .dropdown-content { display: block; }
        #importer { display: none; }
        
        .message-area { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); background-color: rgba(var(--secondary-bg-color-dark-rgb), 0.9); color: var(--primary-text-color); border: 1px solid var(--border-color); padding: 12px 25px; border-radius: var(--border-radius-md); z-index: 3000; opacity: 0; transition: opacity 0.5s ease, transform 0.5s ease, bottom 0.5s ease, background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; pointer-events: none; font-size: 0.95em; box-shadow: 0 4px 15px rgba(0,0,0,0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); max-width: 90%; text-align: center; }
        .message-area.visible { opacity: 1; transform: translate(-50%, 0); bottom: 40px; pointer-events: auto; }
        .message-area.error { background-color: rgba(var(--neon-red-rgb), 0.8); color: #fff; border-color: var(--neon-red); text-shadow: 0 0 5px rgba(0,0,0,0.5); box-shadow: 0 4px 15px rgba(0,0,0,0.3), 0 0 10px var(--glow-red); }
        .message-area.success { background-color: rgba(var(--neon-green-rgb), 0.8); color: #030712; border-color: var(--neon-green); text-shadow: none; box-shadow: 0 4px 15px rgba(0,0,0,0.3), 0 0 10px var(--glow-green); }
        .message-area.info { background-color: rgba(var(--electric-blue-rgb), 0.8); color: #fff; border-color: var(--electric-blue); box-shadow: 0 4px 15px rgba(0,0,0,0.3), 0 0 10px var(--glow-blue); }
        footer { color: var(--secondary-text-color); opacity: 0.7; border-top: 1px solid rgba(var(--electric-blue-rgb), 0.2); margin-top: 60px; padding: 25px; text-align: center; transition: border-color var(--transition-speed) ease, color var(--transition-speed) ease; background-color: rgba(var(--bg-color-dark-rgb), 0.7); backdrop-filter: blur(3px); }
        footer a { color: var(--link-color); text-decoration: none; transition: color var(--transition-speed) ease; }
        footer a:hover { color: var(--primary-text-color); text-decoration: underline; text-shadow: 0 0 8px var(--link-color); }
        footer .fab.fa-google-drive { color: var(--neon-green); }
        @media (max-width: 768px) { .container { padding: 20px 15px; } main h2 { font-size: 1.4em; } .program-step { grid-template-columns: auto 1fr; } .step-actions { grid-column: 2 / 3; flex-direction: row; justify-content: flex-end; padding-top: 0; align-items: center; } .step-content { grid-template-columns: 1fr; } }
        @media (max-width: 480px) { .header-content { padding: 0 15px; } .header-actions { gap: 10px; } .auth-controls button { padding: 5px 10px; font-size: 0.8em; } main h2 { font-size: 1.3em; } .program-tabs { gap: 5px; } .program-tabs button { padding: 6px 12px; font-size: 0.9em; } .program-step { padding: 12px; } .step-field input, .step-field textarea { padding: 6px 8px; font-size: 0.85em;} .editor-actions { flex-direction: column; align-items: stretch; } .editor-actions button { width: 100%; justify-content: center; } }
    </style>
</head>
<body class="logged-out dark-theme"> 

<header>
    <div class="header-content">
        <a href="index.html" class="header-link"><i class="fas fa-arrow-left"></i> Retour au Timer</a>
        <h1><i class="fas fa-shield-halved"></i> ArmorWorkout</h1>
        <div class="header-actions">
            <div class="auth-controls">
                <button id="signin-button" disabled><i class="fab fa-google"></i> Connecter Drive</button>
            </div>
            <span id="drive-status"></span>
        </div>
    </div>
</header>

<div class="container">
    <main>
        <h2><i class="fas fa-edit"></i> Éditeur de Programme</h2>

        <div id="connection-prompt">
            <p>Veuillez vous connecter à votre compte Google Drive pour charger et modifier votre programme d'entraînement.</p>
            <button id="signin-button-prompt" disabled><i class="fab fa-google"></i> Connecter Drive</button>
        </div>

        <div id="program-editor-area">
            <div class="program-tabs" id="program-tabs">
            </div>

            <div id="program-display"></div>
            
            <div class="insert-control" id="final-insert-control">
                <div class="insert-line"></div>
                <button class="add-here-btn" title="Ajouter une étape ici"><i class="fas fa-plus"></i></button>
            </div>

            <div class="editor-actions">
                <div class="add-buttons">
                    <button id="add-exercise-btn" disabled><i class="fas fa-dumbbell"></i> Ajouter Exercice</button>
                    <button id="add-break-btn" disabled><i class="fas fa-hourglass-half"></i> Ajouter Pause</button>
                </div>
                <button id="save-program-btn" disabled><i class="fas fa-save"></i> Sauvegarder Programme</button>
            </div>
        </div>
    </main>
</div>

<footer>
    <p>© <span id="current-year-editor">2024</span> ArmorWorkout Éditeur. Programme stocké sur <i class="fab fa-google-drive" aria-hidden="true"></i> Google Drive.</p>
     <p><a href="index.html">Retourner au Timer</a> | <a href="https://github.com/ironworkout/armorworkout" target="_blank" rel="noopener noreferrer"><i class="fab fa-github" aria-hidden="true"></i> Voir sur GitHub</a></p>
</footer>

<div id="message-area" class="message-area" role="status" aria-live="polite"></div>
<input type="file" id="importer" accept=".json,application/json">

<script>
    const GOOGLE_CLIENT_ID = "731283926358-viam3ulpgna14flfdeb9m92l8s620hoi.apps.googleusercontent.com";
    const GOOGLE_DRIVE_SCOPES = 'https://www.googleapis.com/auth/drive.file';
    const FULL_PROGRAM_FILENAME = "programmeCompletHypertrophieElite_v1.json"; 
    const GIS_CHECK_INTERVAL = 100; 
    const GIS_MAX_RETRIES = 50;

    let loadedFullProgram = null; 

    let signInButton, driveStatusElement, 
        signInButtonPrompt, connectionPrompt, programEditorArea,
        programTabsContainer, programDisplay, addExerciseBtn, addBreakBtn, saveProgramBtn,
        messageArea, fileImporter;

    let googleAccessToken = null;
    let tokenClient = null;
    let programFileId = null; 
    let programsLoaded = false; 
    let currentEditingSessionName = null; 
    let isDirty = false;
    let messageTimeoutId = null;
    let sortableInstance = null;
    let gisCheckRetries = 0;

</script>

</body>
</html>
